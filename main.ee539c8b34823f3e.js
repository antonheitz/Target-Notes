(self.webpackChunkpaper_dragon=self.webpackChunkpaper_dragon||[]).push([[179],{189:(ut,Pe,fe)=>{"use strict";function $(t){return"function"==typeof t}function J(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ie=J(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function H(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ye{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if($(r))try{r()}catch(s){e=s instanceof ie?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{L(s)}catch(o){e=e??[],o instanceof ie?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ie(e)}}add(e){var n;if(e&&e!==this)if(this.closed)L(e);else{if(e instanceof ye){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&H(n,e)}remove(e){const{_finalizers:n}=this;n&&H(n,e),e instanceof ye&&e._removeParent(this)}}ye.EMPTY=(()=>{const t=new ye;return t.closed=!0,t})();const me=ye.EMPTY;function Ve(t){return t instanceof ye||t&&"closed"in t&&$(t.remove)&&$(t.add)&&$(t.unsubscribe)}function L(t){$(t)?t():t.unsubscribe()}const se={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},K={setTimeout(t,e,...n){const{delegate:r}=K;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=K;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Y(t){K.setTimeout(()=>{const{onUnhandledError:e}=se;if(!e)throw t;e(t)})}function X(){}const Q=x("C",void 0,void 0);function x(t,e,n){return{kind:t,value:e,error:n}}let M=null;function m(t){if(se.useDeprecatedSynchronousErrorHandling){const e=!M;if(e&&(M={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=M;if(M=null,n)throw r}}else t()}class w extends ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ve(e)&&e.add(this)):this.destination=z}static create(e,n,r){return new he(e,n,r)}next(e){this.isStopped?ot(function N(t){return x("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ot(function F(t){return x("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ot(Q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const D=Function.prototype.bind;function R(t,e){return D.call(t,e)}class j{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){W(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){W(r)}else W(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){W(n)}}}class he extends w{constructor(e,n,r){let i;if(super(),$(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&se.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&R(e.next,s),error:e.error&&R(e.error,s),complete:e.complete&&R(e.complete,s)}):i=e}this.destination=new j(i)}}function W(t){se.useDeprecatedSynchronousErrorHandling?function h(t){se.useDeprecatedSynchronousErrorHandling&&M&&(M.errorThrown=!0,M.error=t)}(t):Y(t)}function ot(t,e){const{onStoppedNotification:n}=se;n&&K.setTimeout(()=>n(t,e))}const z={closed:!0,next:X,error:function Ne(t){throw t},complete:X},ue="function"==typeof Symbol&&Symbol.observable||"@@observable";function we(t){return t}let Te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function re(t){return t&&t instanceof w||function rn(t){return t&&$(t.next)&&$(t.error)&&$(t.complete)}(t)&&Ve(t)}(n)?n:new he(n,r,i);return m(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Pt(r))((i,s)=>{const o=new he({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ue](){return this}pipe(...n){return function Ye(t){return 0===t.length?we:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Pt(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Pt(t){var e;return null!==(e=t??se.Promise)&&void 0!==e?e:Promise}const ce=J(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let te=(()=>{class t extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ae(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ce}next(n){m(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){m(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){m(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?me:(this.currentObservers=null,s.push(n),new ye(()=>{this.currentObservers=null,H(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Te;return n.source=this,n}}return t.create=(e,n)=>new ae(e,n),t})();class ae extends te{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:me}}function Sp(t){return $(t?.lift)}function sn(t){return e=>{if(Sp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function on(t,e,n,r,i){return new yb(t,e,n,r,i)}class yb extends w{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function jt(t,e){return sn((n,r)=>{let i=0;n.subscribe(on(r,s=>{r.next(t.call(e,s,i++))}))})}function wi(t){return this instanceof wi?(this.v=t,this):new wi(t)}function Db(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(g){r[g]&&(i[g]=function(f){return new Promise(function(p,v){s.push([g,f,p,v])>1||a(g,f)})})}function a(g,f){try{!function c(g){g.value instanceof wi?Promise.resolve(g.value.v).then(u,l):d(s[0][2],g)}(r[g](f))}catch(p){d(s[0][3],p)}}function u(g){a("next",g)}function l(g){a("throw",g)}function d(g,f){g(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Eb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Tp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){!function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}(a,c,(o=t[s](o)).done,o.value)})}}}const Hu=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ap(t){return $(t?.then)}function xp(t){return $(t[ue])}function Op(t){return Symbol.asyncIterator&&$(t?.[Symbol.asyncIterator])}function Pp(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Np=function Cb(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Fp(t){return $(t?.[Np])}function Rp(t){return Db(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield wi(n.read());if(i)return yield wi(void 0);yield yield wi(r)}}finally{n.releaseLock()}})}function kp(t){return $(t?.getReader)}function fn(t){if(t instanceof Te)return t;if(null!=t){if(xp(t))return function Sb(t){return new Te(e=>{const n=t[ue]();if($(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Hu(t))return function Mb(t){return new Te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Ap(t))return function Ib(t){return new Te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Y)})}(t);if(Op(t))return Lp(t);if(Fp(t))return function Tb(t){return new Te(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(kp(t))return function Ab(t){return Lp(Rp(t))}(t)}throw Pp(t)}function Lp(t){return new Te(e=>{(function xb(t,e){var n,r,i,s;return function _b(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Eb(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Fr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ts(t,e,n=1/0){return $(e)?ts((r,i)=>jt((s,o)=>e(r,s,i,o))(fn(t(r,i))),n):("number"==typeof e&&(n=e),sn((r,i)=>function Ob(t,e,n,r,i,s,o,a){const c=[];let u=0,l=0,d=!1;const g=()=>{d&&!c.length&&!u&&e.complete()},f=v=>u<r?p(v):c.push(v),p=v=>{s&&e.next(v),u++;let y=!1;fn(n(v,l++)).subscribe(on(e,_=>{i?.(_),s?f(_):e.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){const _=c.shift();o?Fr(e,o,()=>p(_)):p(_)}g()}catch(_){e.error(_)}}))};return t.subscribe(on(e,f,()=>{d=!0,g()})),()=>{a?.()}}(r,i,t,n)))}function Bp(t=1/0){return ts(we,t)}const $u=new Te(t=>t.complete());function jp(t){return t&&$(t.schedule)}function Vu(t){return t[t.length-1]}function to(t){return jp(Vu(t))?t.pop():void 0}function $p(t,e=0){return sn((n,r)=>{n.subscribe(on(r,i=>Fr(r,t,()=>r.next(i),e),()=>Fr(r,t,()=>r.complete(),e),i=>Fr(r,t,()=>r.error(i),e)))})}function Vp(t,e=0){return sn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Up(t,e){if(!t)throw new Error("Iterable cannot be null");return new Te(n=>{Fr(n,e,()=>{const r=t[Symbol.asyncIterator]();Fr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function no(t,e){return e?function jb(t,e){if(null!=t){if(xp(t))return function Fb(t,e){return fn(t).pipe(Vp(e),$p(e))}(t,e);if(Hu(t))return function kb(t,e){return new Te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Ap(t))return function Rb(t,e){return fn(t).pipe(Vp(e),$p(e))}(t,e);if(Op(t))return Up(t,e);if(Fp(t))return function Lb(t,e){return new Te(n=>{let r;return Fr(n,e,()=>{r=t[Np](),Fr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>$(r?.return)&&r.return()})}(t,e);if(kp(t))return function Bb(t,e){return Up(Rp(t),e)}(t,e)}throw Pp(t)}(t,e):fn(t)}function Uu(...t){const e=to(t),n=function Nb(t,e){return"number"==typeof Vu(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?fn(r[0]):Bp(n)(no(r,e)):$u}function qu(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new he({next:()=>{r.unsubscribe(),t()}});return fn(e(...n)).subscribe(r)}function wt(t){for(let e in t)if(t[e]===wt)return e;throw Error("Could not find renamed property on target object.")}function Et(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Et).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Wu(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Hb=wt({__forward_ref__:wt});function Gu(t){return t.__forward_ref__=Gu,t.toString=function(){return Et(this())},t}function ke(t){return function Ku(t){return"function"==typeof t&&t.hasOwnProperty(Hb)&&t.__forward_ref__===Gu}(t)?t():t}function Qu(t){return t&&!!t.\u0275providers}class ne extends Error{constructor(e,n){super(function Ca(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function ze(t){return"string"==typeof t?t:null==t?"":String(t)}function Sa(t,e){throw new ne(-201,!1)}function Un(t,e){null==t&&function mt(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ze(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ma(t){return zp(t,Ia)||zp(t,Gp)}function zp(t,e){return t.hasOwnProperty(e)?t[e]:null}function Wp(t){return t&&(t.hasOwnProperty(Yu)||t.hasOwnProperty(Kb))?t[Yu]:null}const Ia=wt({\u0275prov:wt}),Yu=wt({\u0275inj:wt}),Gp=wt({ngInjectableDef:wt}),Kb=wt({ngInjectorDef:wt});var Ue=(()=>((Ue=Ue||{})[Ue.Default=0]="Default",Ue[Ue.Host=1]="Host",Ue[Ue.Self=2]="Self",Ue[Ue.SkipSelf=4]="SkipSelf",Ue[Ue.Optional=8]="Optional",Ue))();let Zu;function qn(t){const e=Zu;return Zu=t,e}function Kp(t,e,n){const r=Ma(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ue.Optional?null:void 0!==e?e:void Sa(Et(t))}const bt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ro={},Xu="__NG_DI_FLAG__",Ta="ngTempTokenPath",Zb=/\n/gm,Qp="__source";let io;function ns(t){const e=io;return io=t,e}function Jb(t,e=Ue.Default){if(void 0===io)throw new ne(-203,!1);return null===io?Kp(t,void 0,e):io.get(t,e&Ue.Optional?null:void 0,e)}function Ce(t,e=Ue.Default){return(function Qb(){return Zu}()||Jb)(ke(t),e)}function so(t,e=Ue.Default){return Ce(t,Aa(e))}function Aa(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ju(t){const e=[];for(let n=0;n<t.length;n++){const r=ke(t[n]);if(Array.isArray(r)){if(0===r.length)throw new ne(900,!1);let i,s=Ue.Default;for(let o=0;o<r.length;o++){const a=r[o],c=eC(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(Ce(i,s))}else e.push(Ce(r))}return e}function oo(t,e){return t[Xu]=e,t.prototype[Xu]=e,t}function eC(t){return t[Xu]}function si(t){return{toString:t}.toString()}var ir=(()=>((ir=ir||{})[ir.OnPush=0]="OnPush",ir[ir.Default=1]="Default",ir))(),sr=(()=>{return(t=sr||(sr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",sr;var t})();const Rr={},ft=[],xa=wt({\u0275cmp:wt}),el=wt({\u0275dir:wt}),tl=wt({\u0275pipe:wt}),Zp=wt({\u0275mod:wt}),kr=wt({\u0275fac:wt}),ao=wt({__NG_ELEMENT_ID__:wt});let rC=0;function oi(t){return si(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ir.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||ft,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||sr.Emulated,id:"c"+rC++,styles:t.styles||ft,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=t.dependencies,o=t.features;return i.inputs=eg(t.inputs,r),i.outputs=eg(t.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Xp).filter(Jp):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(yn).filter(Jp):null,i})}function Xp(t){return vt(t)||hn(t)}function Jp(t){return null!==t}function vr(t){return si(()=>({type:t.type,bootstrap:t.bootstrap||ft,declarations:t.declarations||ft,imports:t.imports||ft,exports:t.exports||ft,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function eg(t,e){if(null==t)return Rr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const zn=oi;function vt(t){return t[xa]||null}function hn(t){return t[el]||null}function yn(t){return t[tl]||null}function Fn(t){return Array.isArray(t)&&"object"==typeof t[1]}function ar(t){return Array.isArray(t)&&!0===t[1]}function il(t){return 0!=(4&t.flags)}function ho(t){return t.componentOffset>-1}function Ra(t){return 1==(1&t.flags)}function cr(t){return null!==t.template}function oC(t){return 0!=(256&t[2])}function Ei(t,e){return t.hasOwnProperty(kr)?t[kr]:null}class uC{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function og(t){return t.type.prototype.ngOnChanges&&(t.setInput=dC),lC}function lC(){const t=cg(this),e=t?.current;if(e){const n=t.previous;if(n===Rr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function dC(t,e,n,r){const i=this.declaredInputs[n],s=cg(t)||function fC(t,e){return t[ag]=e}(t,{previous:Rr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new uC(c&&c.currentValue,e,a===Rr),t[r]=e}const ag="__ngSimpleChanges__";function cg(t){return t[ag]||null}function an(t){for(;Array.isArray(t);)t=t[0];return t}function Rn(t,e){return an(e[t.index])}function dg(t,e){return t.data[e]}function kn(t,e){const n=e[t];return Fn(n)?n:n[0]}function Ba(t){return 64==(64&t[2])}function ai(t,e){return null==e?null:t[e]}function fg(t){t[18]=0}function ol(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const We={lFrame:Eg(null),bindingsEnabled:!0};function pg(){return We.bindingsEnabled}function V(){return We.lFrame.lView}function lt(){return We.lFrame.tView}function Br(t){return We.lFrame.contextLView=t,t[8]}function jr(t){return We.lFrame.contextLView=null,t}function cn(){let t=gg();for(;null!==t&&64===t.type;)t=t.parent;return t}function gg(){return We.lFrame.currentTNode}function _r(t,e){const n=We.lFrame;n.currentTNode=t,n.isParent=e}function al(){return We.lFrame.isParent}function cs(){return We.lFrame.bindingIndex++}function SC(t,e){const n=We.lFrame;n.bindingIndex=n.bindingRootIndex=t,ul(e)}function ul(t){We.lFrame.currentDirectiveIndex=t}function dl(t){We.lFrame.currentQueryIndex=t}function IC(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function wg(t,e,n){if(n&Ue.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Ue.Host||(i=IC(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=We.lFrame=Dg();return r.currentTNode=e,r.lView=t,!0}function fl(t){const e=Dg(),n=t[1];We.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Dg(){const t=We.lFrame,e=null===t?null:t.child;return null===e?Eg(t):e}function Eg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function bg(){const t=We.lFrame;return We.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Cg=bg;function hl(){const t=bg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Dn(){return We.lFrame.selectedIndex}function bi(t){We.lFrame.selectedIndex=t}function Nt(){const t=We.lFrame;return dg(t.tView,t.selectedIndex)}function ja(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),c&&(t.viewHooks||(t.viewHooks=[])).push(-n,c),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function Ha(t,e,n){Sg(t,e,3,n)}function $a(t,e,n,r){(3&t[2])===n&&Sg(t,e,n,r)}function pl(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Sg(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&t[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[18]+=65536),(a<s||-1==s)&&(kC(t,n,e,c),t[18]=(4294901760&t[18])+c+2),c++}function kC(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class go{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ml(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Ig(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Mg(t){return 3===t||4===t||6===t}function Ig(t){return 64===t.charCodeAt(0)}function mo(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Tg(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Tg(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ag(t){return-1!==t}function Va(t){return 32767&t}function Ua(t,e){let n=function HC(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let vl=!0;function qa(t){const e=vl;return vl=t,e}let $C=0;const wr={};function za(t,e){const n=Pg(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,yl(r.data,t),yl(e,null),yl(r.blueprint,null));const i=_l(t,e),s=t.injectorIndex;if(Ag(i)){const o=Va(i),a=Ua(i,e),c=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function yl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pg(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function _l(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=jg(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function wl(t,e,n){!function VC(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ao)&&(r=n[ao]),null==r&&(r=n[ao]=$C++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ng(t,e,n){if(n&Ue.Optional||void 0!==t)return t;Sa()}function Fg(t,e,n,r){if(n&Ue.Optional&&void 0===r&&(r=null),!(n&(Ue.Self|Ue.Host))){const i=t[9],s=qn(void 0);try{return i?i.get(e,r,n&Ue.Optional):Kp(e,r,n&Ue.Optional)}finally{qn(s)}}return Ng(r,0,n)}function Rg(t,e,n,r=Ue.Default,i){if(null!==t){if(1024&e[2]){const o=function KC(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=kg(s,o,n,r|Ue.Self,wr);if(a!==wr)return a;let c=s.parent;if(!c){const u=o[21];if(u){const l=u.get(n,wr,r);if(l!==wr)return l}c=jg(o),o=o[15]}s=c}return i}(t,e,n,r,wr);if(o!==wr)return o}const s=kg(t,e,n,r,wr);if(s!==wr)return s}return Fg(e,n,r,i)}function kg(t,e,n,r,i){const s=function zC(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ao)?t[ao]:void 0;return"number"==typeof e?e>=0?255&e:WC:e}(n);if("function"==typeof s){if(!wg(e,t,r))return r&Ue.Host?Ng(i,0,r):Fg(e,n,r,i);try{const o=s(r);if(null!=o||r&Ue.Optional)return o;Sa()}finally{Cg()}}else if("number"==typeof s){let o=null,a=Pg(t,e),c=-1,u=r&Ue.Host?e[16][6]:null;for((-1===a||r&Ue.SkipSelf)&&(c=-1===a?_l(t,e):e[a+8],-1!==c&&Bg(r,!1)?(o=e[1],a=Va(c),e=Ua(c,e)):a=-1);-1!==a;){const l=e[1];if(Lg(s,a,l.data)){const d=qC(a,e,n,o,r,u);if(d!==wr)return d}c=e[a+8],-1!==c&&Bg(r,e[1].data[a+8]===u)&&Lg(s,a,e)?(o=l,a=Va(c),e=Ua(c,e)):a=-1}}return i}function qC(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],l=function Wa(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,l=s>>20,g=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<g;f++){const p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){const f=o[c];if(f&&cr(f)&&f.type===n)return c}return null}(a,o,n,null==r?ho(a)&&vl:r!=o&&0!=(3&a.type),i&Ue.Host&&s===a);return null!==l?Ci(e,o,l,a):wr}function Ci(t,e,n,r){let i=t[n];const s=e.data;if(function LC(t){return t instanceof go}(i)){const o=i;o.resolving&&function $b(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ne(-200,`Circular dependency in DI detected for ${t}${n}`)}(function gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ze(t)}(s[n]));const a=qa(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?qn(o.injectImpl):null;wg(t,r,Ue.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function RC(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=og(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==c&&qn(c),qa(a),o.resolving=!1,Cg()}}return i}function Lg(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Bg(t,e){return!(t&Ue.Self||t&Ue.Host&&e)}class ls{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Rg(this._tNode,this._lView,e,Aa(r),n)}}function WC(){return new ls(cn(),V())}function jg(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const fs="__parameters__";function ps(t,e,n){return si(()=>{const r=function bl(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,l){const d=c.hasOwnProperty(fs)?c[fs]:Object.defineProperty(c,fs,{value:[]})[fs];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Se{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ze({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Si(t,e){t.forEach(n=>Array.isArray(n)?Si(n,e):e(n))}function $g(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ga(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Mi=oo(ps("Optional"),8),wo=oo(ps("SkipSelf"),4);var In=(()=>((In=In||{})[In.Important=1]="Important",In[In.DashCase=2]="DashCase",In))();const Ol=new Map;let wS=0;const Nl="__ngContext__";function mn(t,e){Fn(e)?(t[Nl]=e[20],function ES(t){Ol.set(t[20],t)}(e)):t[Nl]=e}function Rl(t,e){return undefined(t,e)}function Co(t){const e=t[3];return ar(e)?e[3]:e}function kl(t){return cm(t[13])}function Ll(t){return cm(t[4])}function cm(t){for(;null!==t&&!ar(t);)t=t[4];return t}function vs(t,e,n,r,i){if(null!=r){let s,o=!1;ar(r)?s=r:Fn(r)&&(o=!0,r=r[0]);const a=an(r);0===t&&null!==n?null==i?pm(e,n,a):Ii(e,n,a,i||null,!0):1===t&&null!==n?Ii(e,n,a,i||null,!0):2===t?function ql(t,e,n){const r=Za(t,e);r&&function VS(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function zS(t,e,n,r,i){const s=n[7];s!==an(n)&&vs(e,t,r,s,i);for(let a=10;a<n.length;a++){const c=n[a];So(c[1],c,t,e,r,s)}}(e,t,s,n,i)}}function jl(t,e,n){return t.createElement(e,n)}function lm(t,e){const n=t[9],r=n.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,ol(i,-1)),n.splice(r,1)}function Hl(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&lm(i,r),e>0&&(t[n-1][4]=r[4]);const s=Ga(t,10+e);!function FS(t,e){So(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function dm(t,e){if(!(128&e[2])){const n=e[11];n.destroyNode&&So(t,e,n,3,null,null),function LS(t){let e=t[13];if(!e)return $l(t[1],t);for(;e;){let n=null;if(Fn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Fn(e)&&$l(e[1],e),e=e[3];null===e&&(e=t),Fn(e)&&$l(e[1],e),n=e&&e[4]}e=n}}(e)}}function $l(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function $S(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof go)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function HS(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(t,e),1===e[1].type&&e[11].destroy();const n=e[17];if(null!==n&&ar(e[3])){n!==e[3]&&lm(n,e);const r=e[19];null!==r&&r.detachView(t)}!function bS(t){Ol.delete(t[20])}(e)}}function fm(t,e,n){return function hm(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===sr.None||s===sr.Emulated)return null}return Rn(r,n)}}(t,e.parent,n)}function Ii(t,e,n,r,i){t.insertBefore(e,n,r,i)}function pm(t,e,n){t.appendChild(e,n)}function gm(t,e,n,r,i){null!==r?Ii(t,e,n,r,i):pm(t,e,n)}function Za(t,e){return t.parentNode(e)}let Gl,ym=function vm(t,e,n){return 40&t.type?Rn(t,n):null};function Xa(t,e,n,r){const i=fm(t,r,e),s=e[11],a=function mm(t,e,n){return ym(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)gm(s,i,n[c],a,!1);else gm(s,i,n,a,!1)}function Ja(t,e){if(null!==e){const n=e.type;if(3&n)return Rn(e,t);if(4&n)return Ul(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Ja(t,r);{const i=t[e.index];return ar(i)?Ul(-1,i):an(i)}}if(32&n)return Rl(e,t)()||an(t[e.index]);{const r=wm(t,e);return null!==r?Array.isArray(r)?r[0]:Ja(Co(t[16]),r):Ja(t,e.next)}}return null}function wm(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ul(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Ja(r,i)}return e[7]}function zl(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===e&&(a&&mn(an(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)zl(t,e,n.child,r,i,s,!1),vs(e,t,i,a,s);else if(32&c){const u=Rl(n,r);let l;for(;l=u();)vs(e,t,i,l,s);vs(e,t,i,a,s)}else 16&c?Dm(t,e,r,n,i,s):vs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function So(t,e,n,r,i,s){zl(n,r,t.firstChild,e,i,s,!1)}function Dm(t,e,n,r,i,s){const o=n[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)vs(e,t,i,c[u],s);else zl(t,e,c,o[3],i,s,!0)}function Em(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function bm(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&ml(t,e,r),null!==i&&Em(t,e,i),null!==s&&function GS(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const Lm=new Se("ENVIRONMENT_INITIALIZER"),Bm=new Se("INJECTOR",-1),jm=new Se("INJECTOR_DEF_TYPES");class Hm{get(e,n=ro){if(n===ro){const r=new Error(`NullInjectorError: No provider for ${Et(e)}!`);throw r.name="NullInjectorError",r}return n}}function SM(...t){return{\u0275providers:$m(0,t),\u0275fromNgModule:!0}}function $m(t,...e){const n=[],r=new Set;let i;return Si(e,s=>{const o=s;Xl(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&Vm(i,n),n}function Vm(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];Jl(i,s=>{e.push(s)})}}function Xl(t,e,n,r){if(!(t=ke(t)))return!1;let i=null,s=Wp(t);const o=!s&&vt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const c=t.ngModule;if(s=Wp(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)Xl(u,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Si(s.imports,l=>{Xl(l,e,n,r)&&(u||(u=[]),u.push(l))})}finally{}void 0!==u&&Vm(u,e)}if(!a){const u=Ei(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:ft},{provide:jm,useValue:i,multi:!0},{provide:Lm,useValue:()=>Ce(i),multi:!0})}const c=s.providers;null==c||a||Jl(c,l=>{e.push(l)})}}return i!==t&&void 0!==t.providers}function Jl(t,e){for(let n of t)Qu(n)&&(n=n.\u0275providers),Array.isArray(n)?Jl(n,e):e(n)}const MM=wt({provide:String,useValue:wt});function ed(t){return null!==t&&"object"==typeof t&&MM in t}function xi(t){return"function"==typeof t}const td=new Se("Set Injector scope."),ic={},TM={};let nd;function sc(){return void 0===nd&&(nd=new Hm),nd}class ys{}class zm extends ys{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,id(e,o=>this.processProvider(o)),this.records.set(Bm,_s(void 0,this)),i.has("environment")&&this.records.set(ys,_s(void 0,this));const s=this.records.get(td);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(jm.multi,ft,Ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=ns(this),r=qn(void 0);try{return e()}finally{ns(n),qn(r)}}get(e,n=ro,r=Ue.Default){this.assertNotDestroyed(),r=Aa(r);const i=ns(this),s=qn(void 0);try{if(!(r&Ue.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function NM(t){return"function"==typeof t||"object"==typeof t&&t instanceof Se}(e)&&Ma(e);a=c&&this.injectableDefInScope(c)?_s(rd(e),ic):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Ue.Self?sc():this.parent).get(e,n=r&Ue.Optional&&n===ro?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Ta]=o[Ta]||[]).unshift(Et(e)),i)throw o;return function tC(t,e,n,r){const i=t[Ta];throw e[Qp]&&i.unshift(e[Qp]),t.message=function nC(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Et(e);if(Array.isArray(e))i=e.map(Et).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Et(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Zb,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Ta]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{qn(s),ns(i)}}resolveInjectorInitializers(){const e=ns(this),n=qn(void 0);try{const r=this.get(Lm.multi,ft,Ue.Self);for(const i of r)i()}finally{ns(e),qn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Et(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){let n=xi(e=ke(e))?e:ke(e&&e.provide);const r=function xM(t){return ed(t)?_s(void 0,t.useValue):_s(function Wm(t,e,n){let r;if(xi(t)){const i=ke(t);return Ei(i)||rd(i)}if(ed(t))r=()=>ke(t.useValue);else if(function qm(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Ju(t.deps||[]));else if(function Um(t){return!(!t||!t.useExisting)}(t))r=()=>Ce(ke(t.useExisting));else{const i=ke(t&&(t.useClass||t.provide));if(!function OM(t){return!!t.deps}(t))return Ei(i)||rd(i);r=()=>new i(...Ju(t.deps))}return r}(t),ic)}(e);if(xi(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=_s(void 0,ic,!0),i.factory=()=>Ju(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===ic&&(n.value=TM,n.value=n.factory()),"object"==typeof n.value&&n.value&&function PM(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ke(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function rd(t){const e=Ma(t),n=null!==e?e.factory:Ei(t);if(null!==n)return n;if(t instanceof Se)throw new ne(204,!1);if(t instanceof Function)return function AM(t){const e=t.length;if(e>0)throw function _o(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new ne(204,!1);const n=function Wb(t){const e=t&&(t[Ia]||t[Gp]);if(e){const n=function Gb(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new ne(204,!1)}function _s(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function id(t,e){for(const n of t)Array.isArray(n)?id(n,e):n&&Qu(n)?id(n.\u0275providers,e):e(n)}class FM{}class Gm{}class kM{resolveComponentFactory(e){throw function RM(t){const e=Error(`No component factory found for ${Et(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let oc=(()=>{class t{}return t.NULL=new kM,t})();function LM(){return ws(cn(),V())}function ws(t,e){return new Oi(Rn(t,e))}let Oi=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=LM,t})();class To{}let Qm=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function jM(){const t=V(),n=kn(cn().index,t);return(Fn(n)?n:t)[11]}(),t})(),HM=(()=>{class t{}return t.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>null}),t})();class Ao{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const $M=new Ao("15.1.1"),sd={};function ad(t){return t.ngOriginalError}class ci{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ad(e);for(;n&&ad(n);)n=ad(n);return n||null}}function Zm(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const Xm="ng-template";function XM(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Zm(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Jm(t){return 4===t.type&&t.value!==Xm}function JM(t,e,n){return e===(4!==t.type||n?t.value:Xm)}function eI(t,e,n){let r=4;const i=t.attrs||[],s=function rI(t){for(let e=0;e<t.length;e++)if(Mg(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!JM(t,c,n)||""===c&&1===e.length){if(ur(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!XM(t.attrs,u,n)){if(ur(r))return!1;o=!0}continue}const d=tI(8&r?"class":c,i,Jm(t),n);if(-1===d){if(ur(r))return!1;o=!0;continue}if(""!==u){let g;g=d>s?"":i[d+1].toLowerCase();const f=8&r?g:null;if(f&&-1!==Zm(f,u,0)||2&r&&u!==g){if(ur(r))return!1;o=!0}}}}else{if(!o&&!ur(r)&&!ur(c))return!1;if(o&&ur(c))continue;o=!1,r=c|1&r}}return ur(r)||o}function ur(t){return 0==(1&t)}function tI(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function iI(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ev(t,e,n=!1){for(let r=0;r<e.length;r++)if(eI(t,e[r],n))return!0;return!1}function tv(t,e){return t?":not("+e.trim()+")":e}function oI(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ur(o)&&(e+=tv(s,i),i=""),r=o,s=s||!ur(r);n++}return""!==i&&(e+=tv(s,i)),e}const Ge={};function Tt(t){nv(lt(),V(),Dn()+t,!1)}function nv(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&Ha(e,s,n)}else{const s=t.preOrderHooks;null!==s&&$a(e,s,0,n)}bi(n)}function ov(t,e=null,n=null,r){const i=av(t,e,n,r);return i.resolveInjectorInitializers(),i}function av(t,e=null,n=null,r,i=new Set){const s=[n||ft,SM(t)];return r=r||("object"==typeof t?void 0:Et(t)),new zm(s,e||sc(),r||null,i)}let qr=(()=>{class t{static create(n,r){if(Array.isArray(n))return ov({name:""},r,n,"");{const i=n.name??"";return ov({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=ro,t.NULL=new Hm,t.\u0275prov=Ze({token:t,providedIn:"any",factory:()=>Ce(Bm)}),t.__NG_ELEMENT_ID__=-1,t})();function Ke(t,e=Ue.Default){const n=V();return null===n?Ce(t,e):Rg(cn(),n,ke(t),e)}function pv(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];dl(n[r]),o.contentQueries(2,e[s],s)}}}function cc(t,e,n,r,i,s,o,a,c,u,l){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==l||t&&1024&t[2])&&(d[2]|=1024),fg(d),d[3]=d[15]=t,d[8]=n,d[10]=o||t&&t[10],d[11]=a||t&&t[11],d[12]=c||t&&t[12]||null,d[9]=u||t&&t[9]||null,d[6]=s,d[20]=function DS(){return wS++}(),d[21]=l,d[16]=2==e.type?t[16]:d,d}function bs(t,e,n,r,i){let s=t.data[e];if(null===s)s=function fd(t,e,n,r,i){const s=gg(),o=al(),c=t.data[e]=function NI(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(t,e,n,r,i),function CC(){return We.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function po(){const t=We.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _r(s,!0),s}function xo(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hd(t,e,n){fl(e);try{const r=t.viewQuery;null!==r&&bd(1,r,n);const i=t.template;null!==i&&gv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&pv(t,e),t.staticViewQueries&&bd(2,t.viewQuery,n);const s=t.components;null!==s&&function xI(t,e){for(let n=0;n<e.length;n++)XI(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,hl()}}function uc(t,e,n,r){const i=e[2];if(128!=(128&i)){fl(e);try{fg(e),function vg(t){return We.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&gv(t,e,n,2,r);const o=3==(3&i);if(o){const u=t.preOrderCheckHooks;null!==u&&Ha(e,u,null)}else{const u=t.preOrderHooks;null!==u&&$a(e,u,0,null),pl(e,0)}if(function YI(t){for(let e=kl(t);null!==e;e=Ll(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r];512&i[2]||ol(i[3],1),i[2]|=512}}}(e),function QI(t){for(let e=kl(t);null!==e;e=Ll(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Ba(r)&&uc(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&pv(t,e),o){const u=t.contentCheckHooks;null!==u&&Ha(e,u)}else{const u=t.contentHooks;null!==u&&$a(e,u,1),pl(e,1)}!function TI(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)bi(~i);else{const s=i,o=n[++r],a=n[++r];SC(o,s),a(2,e[s])}}}finally{bi(-1)}}(t,e);const a=t.components;null!==a&&function AI(t,e){for(let n=0;n<e.length;n++)ZI(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&bd(2,c,r),o){const u=t.viewCheckHooks;null!==u&&Ha(e,u)}else{const u=t.viewHooks;null!==u&&$a(e,u,2),pl(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,ol(e[3],-1))}finally{hl()}}}function gv(t,e,n,r,i){const s=Dn(),o=2&r;try{bi(-1),o&&e.length>22&&nv(t,e,22,!1),n(r,i)}finally{bi(s)}}function pd(t,e,n){if(il(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function gd(t,e,n){pg()&&(function jI(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;ho(n)&&function WI(t,e,n){const r=Rn(e,t),i=mv(n),s=t[10],o=lc(t,cc(t,i,null,n.onPush?32:16,r,e,s,s.createRenderer(r,n),null,null,null));t[e.index]=o}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||za(n,e),mn(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const c=t.data[a],u=Ci(e,t,a,n);mn(u,e),null!==o&&GI(0,a-i,u,c,0,o),cr(c)&&(kn(n.index,e)[8]=Ci(e,t,a,n))}}(t,e,n,Rn(n,e)),64==(64&n.flags)&&Ev(t,e,n))}function md(t,e,n=Rn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function mv(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function vd(t,e,n,r,i,s,o,a,c,u){const l=22+r,d=l+i,g=function OI(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ge);return n}(l,d),f="function"==typeof u?u():u;return g[1]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function yv(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?_v(n,e,i,s):r.hasOwnProperty(i)&&_v(n,e,r[i],s)}return n}function _v(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function jn(t,e,n,r,i,s,o,a){const c=Rn(e,n);let l,u=e.inputs;!a&&null!=u&&(l=u[r])?(Cd(t,n,l,r,i),ho(e)&&wv(n,e.index)):3&e.type&&(r=function RI(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function wv(t,e){const n=kn(e,t);16&n[2]||(n[2]|=32)}function yd(t,e,n,r){let i=!1;if(pg()){const s=null===r?null:{"":-1},o=function $I(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(ev(e,o.selectors,!1))if(r||(r=[]),cr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),_d(t,e,a.length)}else r.unshift(o),_d(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&(i=!0,Dv(t,e,n,a,s,c)),s&&function VI(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new ne(-301,!1);r.push(e[i],s)}}}(n,r,s)}return n.mergedAttrs=mo(n.mergedAttrs,n.attrs),i}function Dv(t,e,n,r,i,s){for(let u=0;u<r.length;u++)wl(za(n,e),t,r[u].type);!function qI(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=xo(t,e,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];n.mergedAttrs=mo(n.mergedAttrs,l.hostAttrs),zI(t,n,e,c,l),UI(c,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function FI(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,u=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],g=n?n.get(d):null,p=g?g.outputs:null;c=yv(d.inputs,l,c,g?g.inputs:null),u=yv(d.outputs,l,u,p);const v=null===c||null===o||Jm(e)?null:KI(c,l,o);a.push(v)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(t,n,s)}function Ev(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function MC(){return We.lFrame.currentDirectiveIndex}();try{bi(s);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];ul(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&HI(c,u)}}finally{bi(-1),ul(o)}}function HI(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function _d(t,e,n){e.componentOffset=n,(t.components||(t.components=[])).push(e.index)}function UI(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;cr(e)&&(n[""]=t)}}function zI(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Ei(i.type)),o=new go(s,cr(i),Ke);t.blueprint[r]=o,n[r]=o,function LI(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function BI(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,xo(t,n,i.hostVars,Ge),i)}function GI(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let c=0;c<o.length;){const u=o[c++],l=o[c++],d=o[c++];null!==a?r.setInput(n,d,u,l):n[l]=d}}}function KI(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function bv(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null]}function ZI(t,e){const n=kn(e,t);if(Ba(n)){const r=n[1];48&n[2]?uc(r,n,r.template,n[8]):n[5]>0&&Dd(n)}}function Dd(t){for(let r=kl(t);null!==r;r=Ll(r))for(let i=10;i<r.length;i++){const s=r[i];if(Ba(s))if(512&s[2]){const o=s[1];uc(o,s,o.template,s[8])}else s[5]>0&&Dd(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=kn(n[r],t);Ba(i)&&i[5]>0&&Dd(i)}}function XI(t,e){const n=kn(e,t),r=n[1];(function JI(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),hd(r,n,n[8])}function lc(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ed(t){for(;t;){t[2]|=32;const e=Co(t);if(oC(t)&&!e)return t;t=e}return null}function dc(t,e,n,r=!0){const i=e[10];i.begin&&i.begin();try{uc(t,e,t.template,n)}catch(o){throw r&&Iv(e,o),o}finally{i.end&&i.end()}}function bd(t,e,n){dl(0),e(t,n)}function Cv(t){return t[7]||(t[7]=[])}function Sv(t){return t.cleanup||(t.cleanup=[])}function Iv(t,e){const n=t[9],r=n?n.get(ci,null):null;r&&r.handleError(e)}function Cd(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=e[o],u=t.data[o];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function zr(t,e,n){const r=function La(t,e){return an(e[t])}(e,t);!function um(t,e,n){t.setValue(e,n)}(t[11],r,n)}function fc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Wu(i,a):2==s&&(r=Wu(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function hc(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(an(s)),ar(s))for(let a=10;a<s.length;a++){const c=s[a],u=c[1].firstChild;null!==u&&hc(c[1],c,u,r)}const o=n.type;if(8&o)hc(t,e,n.child,r);else if(32&o){const a=Rl(n,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=wm(e,n);if(Array.isArray(a))r.push(...a);else{const c=Co(e[16]);hc(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class Oo{get rootNodes(){const e=this._lView,n=e[1];return hc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ar(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Hl(e,r),Ga(n,r))}this._attachedToViewContainer=!1}dm(this._lView[1],this._lView)}onDestroy(e){!function vv(t,e,n,r){const i=Cv(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Sv(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Ed(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){dc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kS(t,e){So(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e}}class eT extends Oo{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;dc(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class Tv extends oc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=vt(e);return new Po(n,this.ngModule)}}function Av(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class nT{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Aa(r);const i=this.injector.get(e,sd,r);return i!==sd||n===sd?i:this.parentInjector.get(e,n,r)}}class Po extends Gm{get inputs(){return Av(this.componentDef.inputs)}get outputs(){return Av(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function aI(t){return t.map(oI).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof ys?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new nT(e,s):e,a=o.get(To,null);if(null===a)throw new ne(407,!1);const c=o.get(HM,null),u=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=r?function PI(t,e,n){return t.selectRootElement(e,n===sr.ShadowDom)}(u,r,this.componentDef.encapsulation):jl(u,l,function tT(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),g=this.componentDef.onPush?288:272,f=vd(0,null,null,1,0,null,null,null,null,null),p=cc(null,f,null,g,null,null,a,u,c,o,null);let v,y;fl(p);try{const _=this.componentDef;let b,E=null;_.findHostDirectiveDefs?(b=[],E=new Map,_.findHostDirectiveDefs(_,b,E),b.push(_)):b=[_];const I=function iT(t,e){const n=t[1];return t[22]=e,bs(n,22,2,"#host",null)}(p,d),T=function sT(t,e,n,r,i,s,o,a){const c=i[1];!function oT(t,e,n,r){for(const i of t)e.mergedAttrs=mo(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(fc(e,e.mergedAttrs,!0),null!==n&&bm(r,n,e))}(r,t,e,o);const u=s.createRenderer(e,n),l=cc(i,mv(n),null,n.onPush?32:16,i[t.index],t,s,u,a||null,null,null);return c.firstCreatePass&&_d(c,t,r.length-1),lc(i,l),i[t.index]=l}(I,d,_,b,p,a,u);y=dg(f,22),d&&function cT(t,e,n,r){if(r)ml(t,n,["ng-version",$M.full]);else{const{attrs:i,classes:s}=function cI(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!ur(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&ml(t,n,i),s&&s.length>0&&Em(t,n,s.join(" "))}}(u,_,d,r),void 0!==n&&function uT(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(y,this.ngContentSelectors,n),v=function aT(t,e,n,r,i,s){const o=cn(),a=i[1],c=Rn(o,i);Dv(a,i,o,n,null,r);for(let l=0;l<n.length;l++)mn(Ci(i,a,o.directiveStart+l,o),i);Ev(a,i,o),c&&mn(c,i);const u=Ci(i,a,o.directiveStart+o.componentOffset,o);if(t[8]=i[8]=u,null!==s)for(const l of s)l(u,e);return pd(a,o,t),u}(T,_,b,E,p,[lT]),hd(f,p,null)}finally{hl()}return new rT(this.componentType,v,ws(y,p),p,y)}}class rT extends FM{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new eT(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;Cd(s[1],s,i,e,n),wv(s,this._tNode.index)}}get injector(){return new ls(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function lT(){const t=cn();ja(V()[1],t)}let pc=null;function Pi(){if(!pc){const t=bt.Symbol;if(t&&t.iterator)pc=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(pc=r)}}}return pc}function gc(t){return!!Md(t)&&(Array.isArray(t)||!(t instanceof Map)&&Pi()in t)}function Md(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function vn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ss(t,e,n,r){return vn(t,cs(),n)?e+ze(n)+r:Ge}function qt(t,e,n,r,i,s,o,a){const c=V(),u=lt(),l=t+22,d=u.firstCreatePass?function CT(t,e,n,r,i,s,o,a,c){const u=e.consts,l=bs(e,t,4,o||null,ai(u,a));yd(e,n,l,ai(u,c)),ja(e,l);const d=l.tViews=vd(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,n,r,i,s,o):u.data[l];_r(d,!1);const g=c[11].createComment("");Xa(u,c,g,d),mn(g,c),lc(c,c[l]=bv(g,c,g,d)),Ra(d)&&gd(u,c,d),null!=o&&md(c,d,a)}function At(t,e,n){const r=V();return vn(r,cs(),e)&&jn(lt(),Nt(),r,t,e,r[11],n,!1),At}function Id(t,e,n,r,i){const o=i?"class":"style";Cd(t,n,e.inputs[o],o,r)}function Le(t,e,n,r){const i=V(),s=lt(),o=22+t,a=i[11],c=i[o]=jl(a,e,function FC(){return We.lFrame.currentNamespace}()),u=s.firstCreatePass?function IT(t,e,n,r,i,s,o){const a=e.consts,u=bs(e,t,2,i,ai(a,s));return yd(e,n,u,ai(a,o)),null!==u.attrs&&fc(u,u.attrs,!1),null!==u.mergedAttrs&&fc(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];return _r(u,!0),bm(a,c,u),32!=(32&u.flags)&&Xa(s,i,c,u),0===function yC(){return We.lFrame.elementDepthCount}()&&mn(c,i),function _C(){We.lFrame.elementDepthCount++}(),Ra(u)&&(gd(s,i,u),pd(s,u,i)),null!==r&&md(i,u),Le}function Qe(){let t=cn();al()?function cl(){We.lFrame.isParent=!1}():(t=t.parent,_r(t,!1));const e=t;!function wC(){We.lFrame.elementDepthCount--}();const n=lt();return n.firstCreatePass&&(ja(n,t),il(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function BC(t){return 0!=(8&t.flags)}(e)&&Id(n,e,V(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function jC(t){return 0!=(16&t.flags)}(e)&&Id(n,e,V(),e.stylesWithoutHost,!1),Qe}function Hn(t,e,n,r){return Le(t,e,n,r),Qe(),Hn}function vc(){return V()}function xd(t){return!!t&&"function"==typeof t.then}const AT=function Wv(t){return!!t&&"function"==typeof t.subscribe};function Qn(t,e,n,r){const i=V(),s=lt(),o=cn();return function Kv(t,e,n,r,i,s,o){const a=Ra(r),u=t.firstCreatePass&&Sv(t),l=e[8],d=Cv(e);let g=!0;if(3&r.type||o){const v=Rn(r,e),y=o?o(v):v,_=d.length,b=o?I=>o(an(I[r.index])):r.index;let E=null;if(!o&&a&&(E=function xT(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==E)(E.__ngLastListenerFn__||E).__ngNextListenerFn__=s,E.__ngLastListenerFn__=s,g=!1;else{s=Yv(r,e,l,s,!1);const I=n.listen(y,i,s);d.push(s,I),u&&u.push(i,b,_,_+1)}}else s=Yv(r,e,l,s,!1);const f=r.outputs;let p;if(g&&null!==f&&(p=f[i])){const v=p.length;if(v)for(let y=0;y<v;y+=2){const T=e[p[y]][p[y+1]].subscribe(s),P=d.length;d.push(s,T),u&&u.push(i,r.index,P,-(P+1))}}}(s,i,i[11],o,t,e,r),Qn}function Qv(t,e,n,r){try{return!1!==n(r)}catch(i){return Iv(t,i),!1}}function Yv(t,e,n,r,i){return function s(o){if(o===Function)return r;Ed(t.componentOffset>-1?kn(t.index,e):e);let c=Qv(e,0,r,o),u=s.__ngNextListenerFn__;for(;u;)c=Qv(e,0,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function En(t=1){return function TC(t){return(We.lFrame.contextLView=function AC(t,e){for(;t>0;)e=e[15],t--;return e}(t,We.lFrame.contextLView))[8]}(t)}function Od(t,e,n){return Pd(t,"",e,"",n),Od}function Pd(t,e,n,r,i){const s=V(),o=Ss(s,e,n,r);return o!==Ge&&jn(lt(),Nt(),s,t,o,s[11],i,!1),Pd}function Lt(t,e=""){const n=V(),r=lt(),i=t+22,s=r.firstCreatePass?bs(r,i,1,e,null):r.data[i],o=n[i]=function Bl(t,e){return t.createText(e)}(n[11],e);Xa(r,n,o,s),_r(s,!1)}function Fs(t,e,n){const r=V(),i=Ss(r,t,e,n);return i!==Ge&&zr(r,Dn(),i),Fs}const ks="en-US";let Vy=ks;class Ls{}class D1{}class p_ extends Ls{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tv(this);const r=function Nn(t,e){const n=t[Zp]||null;if(!n&&!0===e)throw new Error(`Type ${Et(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Ur(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=av(e,n,[{provide:Ls,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],Et(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ud extends D1{constructor(e){super(),this.moduleType=e}create(e){return new p_(this.moduleType,e)}}function Cc(t,e,n,r){return function E_(t,e,n,r,i,s){const o=e+n;return vn(t,o,i)?function br(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function Ho(t,e){const n=t[e];return n===Ge?void 0:n}(t,o+1)}(V(),function wn(){const t=We.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}function zd(t){return e=>{setTimeout(t,void 0,e)}}const Wr=class Y1 extends te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=zd(s),i&&(i=zd(i)),o&&(o=zd(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ye&&e.add(a),a}};let Gr=(()=>{class t{}return t.__NG_ELEMENT_ID__=ex,t})();const X1=Gr,J1=class extends X1{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,i=cc(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),hd(r,i,e),new Oo(i)}};function ex(){return function Sc(t,e){return 4&t.type?new J1(e,t,ws(t,e)):null}(cn(),V())}let Mr=(()=>{class t{}return t.__NG_ELEMENT_ID__=tx,t})();function tx(){return function A_(t,e){let n;const r=e[t.index];if(ar(r))n=r;else{let i;if(8&t.type)i=an(r);else{const s=e[11];i=s.createComment("");const o=Rn(t,e);Ii(s,Za(s,o),i,function US(t,e){return t.nextSibling(e)}(s,o),!1)}e[t.index]=n=bv(r,e,i,t),lc(e,n)}return new I_(n,t,e)}(cn(),V())}const nx=Mr,I_=class extends nx{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ws(this._hostTNode,this._hostLView)}get injector(){return new ls(this._hostTNode,this._hostLView)}get parentInjector(){const e=_l(this._hostTNode,this._hostLView);if(Ag(e)){const n=Ua(e,this._hostLView),r=Va(e);return new ls(n[1].data[r+8],n)}return new ls(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=T_(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(e,n,r,i,s){const o=e&&!function yo(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const c=o?e:new Po(vt(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const g=(o?u:this.parentInjector).get(ys,null);g&&(s=g)}const l=c.create(u,i,void 0,s);return this.insert(l.hostView,a),l}insert(e,n){const r=e._lView,i=r[1];if(function vC(t){return ar(t[3])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[3],g=new I_(d,d[6],d[3]);g.detach(g.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function BS(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],$g(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function jS(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(i,r,o,s);const a=Ul(s,o),c=r[11],u=Za(c,o[7]);return null!==u&&function RS(t,e,n,r,i,s){r[0]=i,r[6]=e,So(t,r,n,1,i,s)}(i,o[6],c,r,u,a),e.attachToViewContainerRef(),$g(Gd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=T_(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Hl(this._lContainer,n);r&&(Ga(Gd(this._lContainer),n),dm(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Hl(this._lContainer,n);return r&&null!=Ga(Gd(this._lContainer),n)?new Oo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function T_(t){return t[8]}function Gd(t){return t[8]||(t[8]=[])}function Ic(...t){}const rf=new Se("Application Initializer");let Tc=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Ic,this.reject=Ic,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(xd(s))n.push(s);else if(AT(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Ce(rf,8))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Uo=new Se("AppId",{providedIn:"root",factory:function J_(){return`${sf()}${sf()}${sf()}`}});function sf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ew=new Se("Platform Initializer"),qo=new Se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nx=new Se("appBootstrapListener"),tw=new Se("AnimationModuleType"),Ir=new Se("LocaleId",{providedIn:"root",factory:()=>so(Ir,Ue.Optional|Ue.SkipSelf)||function Fx(){return typeof $localize<"u"&&$localize.locale||ks}()}),jx=(()=>Promise.resolve(0))();function af(t){typeof Zone>"u"?jx.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class zt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wr(!1),this.onMicrotaskEmpty=new Wr(!1),this.onStable=new Wr(!1),this.onError=new Wr(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Hx(){let t=bt.requestAnimationFrame,e=bt.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Ux(t){const e=()=>{!function Vx(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,uf(t),t.isCheckStableRunning=!0,cf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),uf(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return iw(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),sw(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return iw(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),sw(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,uf(t),cf(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zt.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(zt.isInAngularZone())throw new ne(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,$x,Ic,Ic);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const $x={};function cf(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function iw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sw(t){t._nesting--,cf(t)}class qx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wr,this.onMicrotaskEmpty=new Wr,this.onStable=new Wr,this.onError=new Wr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const ow=new Se(""),Ac=new Se("");let ff,lf=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ff||(function zx(t){ff=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zt.assertNotInAngularZone(),af(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())af(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(Ce(zt),Ce(df),Ce(Ac))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})(),df=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ff?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),li=null;const aw=new Se("AllowMultipleToken"),hf=new Se("PlatformDestroyListeners");function uw(t,e,n=[]){const r=`Platform: ${e}`,i=new Se(r);return(s=[])=>{let o=pf();if(!o||o.injector.get(aw,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Kx(t){if(li&&!li.get(aw,!1))throw new ne(400,!1);li=t;const e=t.get(dw);(function cw(t){const e=t.get(ew,null);e&&e.forEach(n=>n())})(t)}(function lw(t=[],e){return qr.create({name:e,providers:[{provide:td,useValue:"platform"},{provide:hf,useValue:new Set([()=>li=null])},...t]})}(a,r))}return function Yx(t){const e=pf();if(!e)throw new ne(401,!1);return e}()}}function pf(){return li?.get(dw)??null}let dw=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function hw(t,e){let n;return n="noop"===t?new qx:("zone.js"===t?void 0:t)||new zt(e),n}(r?.ngZone,function fw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:zt,useValue:i}];return i.run(()=>{const o=qr.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),c=a.injector.get(ci,null);if(!c)throw new ne(402,!1);return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:l=>{c.handleError(l)}});a.onDestroy(()=>{xc(this._modules,a),u.unsubscribe()})}),function pw(t,e,n){try{const r=n();return xd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(c,i,()=>{const u=a.injector.get(Tc);return u.runInitializers(),u.donePromise.then(()=>(function Uy(t){Un(t,"Expected localeId to be defined"),"string"==typeof t&&(Vy=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ir,ks)||ks),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=gw({},r);return function Wx(t,e,n){const r=new Ud(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(zo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new ne(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(hf,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Ce(qr))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function gw(t,e){return Array.isArray(e)?e.reduce(gw,t):{...t,...e}}let zo=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Te(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Te(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{zt.assertNotInAngularZone(),af(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{zt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),u.unsubscribe()}});this.isStable=Uu(s,o.pipe(function qp(t={}){const{connector:e=(()=>new te),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,u=0,l=!1,d=!1;const g=()=>{a?.unsubscribe(),a=void 0},f=()=>{g(),o=c=void 0,l=d=!1},p=()=>{const v=o;f(),v?.unsubscribe()};return sn((v,y)=>{u++,!d&&!l&&g();const _=c=c??e();y.add(()=>{u--,0===u&&!d&&!l&&(a=qu(p,i))}),_.subscribe(y),!o&&u>0&&(o=new he({next:b=>_.next(b),error:b=>{d=!0,g(),a=qu(f,n,b),_.error(b)},complete:()=>{l=!0,g(),a=qu(f,r),_.complete()}}),fn(v).subscribe(o))})(s)}}()))}bootstrap(n,r){const i=n instanceof Gm;if(!this._injector.get(Tc).done)throw!i&&function co(t){const e=vt(t)||hn(t)||yn(t);return null!==e&&e.standalone}(n),new ne(405,false);let o;o=i?n:this._injector.get(oc).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function Gx(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Ls),u=o.create(qr.NULL,[],r||o.selector,a),l=u.location.nativeElement,d=u.injector.get(ow,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),xc(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ne(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;xc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Nx,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ne(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(Ce(zt),Ce(ys),Ce(ci))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ww{constructor(){}supports(e){return gc(e)}create(e){return new aO(e)}}const oO=(t,e)=>e;class aO{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||oO}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<Ew(r,i,s)?n:r,a=Ew(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,l=c-i;if(u!=l){for(let g=0;g<u;g++){const f=g<s.length?s[g]:s[g]=0,p=f+g;l<=p&&p<u&&(s[g]=f+1)}s[o.previousIndex]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!gc(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function DT(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Pi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new cO(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Dw),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Dw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class cO{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uO{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Dw{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new uO,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ew(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class bw{constructor(){}supports(e){return e instanceof Map||Md(e)}create(){return new lO}}class lO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||Md(e)))throw new ne(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new dO(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class dO{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Cw(){return new Nc([new ww])}let Nc=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Cw()),deps:[[t,new wo,new Mi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new ne(901,!1)}}return t.\u0275prov=Ze({token:t,providedIn:"root",factory:Cw}),t})();function Sw(){return new Wo([new bw])}let Wo=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Sw()),deps:[[t,new wo,new Mi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new ne(901,!1)}}return t.\u0275prov=Ze({token:t,providedIn:"root",factory:Sw}),t})();const pO=uw(null,"core",[]);let gO=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Ce(zo))},t.\u0275mod=vr({type:t}),t.\u0275inj=rr({}),t})(),_f=null;function Go(){return _f}class yO{}const Zt=new Se("DocumentToken"),Af=/\s+/,Rw=[];let xf=(()=>{class t{constructor(n,r,i,s){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=Rw,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Af):Rw}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Af):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,Boolean(n[r]));this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Af).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return t.\u0275fac=function(n){return new(n||t)(Ke(Nc),Ke(Wo),Ke(Oi),Ke(Qm))},t.\u0275dir=zn({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class sP{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Of=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new sP(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Bw(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{Bw(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(Ke(Mr),Ke(Gr),Ke(Nc))},t.\u0275dir=zn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function Bw(t,e){t.context.$implicit=e.item}let Uc=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new aP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){jw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){jw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(Ke(Mr),Ke(Gr))},t.\u0275dir=zn({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class aP{constructor(){this.$implicit=null,this.ngIf=null}}function jw(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Et(e)}'.`)}let PP=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=vr({type:t}),t.\u0275inj=rr({}),t})();const Vw="browser";function kf(t){return t===Vw}class lN extends yO{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class jf extends lN{static makeCurrent(){!function vO(t){_f||(_f=t)}(new jf)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function dN(){return Zo=Zo||document.querySelector("base"),Zo?Zo.getAttribute("href"):null}();return null==n?null:function fN(t){zc=zc||document.createElement("a"),zc.setAttribute("href",t);const e=zc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Zo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function rP(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let zc,Zo=null;const Qw=new Se("TRANSITION_ID"),pN=[{provide:rf,useFactory:function hN(t,e,n){return()=>{n.get(Tc).donePromise.then(()=>{const r=Go(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Qw,Zt,qr],multi:!0}];let mN=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();const Wc=new Se("EventManagerPlugins");let Gc=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Ce(Wc),Ce(zt))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();class Yw{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Go().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Zw=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})(),Xo=(()=>{class t extends Zw{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Xw),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Xw))}}return t.\u0275fac=function(n){return new(n||t)(Ce(Zt))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();function Xw(t){Go().remove(t)}const Hf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$f=/%COMP%/g;function Vf(t,e){return e.flat(100).map(n=>n.replace($f,t))}function t0(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Kc=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Uf(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case sr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new EN(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case sr.ShadowDom:return new bN(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Vf(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Ce(Gc),Ce(Xo),Ce(Uo))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();class Uf{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Hf[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(r0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(r0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Hf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Hf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(In.DashCase|In.Important)?e.style.setProperty(n,r,i&In.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&In.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,t0(r)):this.eventManager.addEventListener(e,n,t0(r))}}function r0(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class EN extends Uf{constructor(e,n,r,i){super(e),this.component=r;const s=Vf(i+"-"+r.id,r.styles);n.addStyles(s),this.contentAttr=function _N(t){return"_ngcontent-%COMP%".replace($f,t)}(i+"-"+r.id),this.hostAttr=function wN(t){return"_nghost-%COMP%".replace($f,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class bN extends Uf{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Vf(i.id,i.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let CN=(()=>{class t extends Yw{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(Ce(Zt))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();const s0=["alt","control","meta","shift"],SN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let IN=(()=>{class t extends Yw{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Go().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),s0.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=SN[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),s0.forEach(o=>{o!==i&&(0,MN[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(Ce(Zt))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();const ON=uw(pO,"browser",[{provide:qo,useValue:Vw},{provide:ew,useValue:function TN(){jf.makeCurrent()},multi:!0},{provide:Zt,useFactory:function xN(){return function ZS(t){Gl=t}(document),document},deps:[]}]),c0=new Se(""),u0=[{provide:Ac,useClass:class gN{addToWindow(e){bt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},bt.getAllAngularTestabilities=()=>e.getAllTestabilities(),bt.getAllAngularRootElements=()=>e.getAllRootElements(),bt.frameworkStabilizers||(bt.frameworkStabilizers=[]),bt.frameworkStabilizers.push(r=>{const i=bt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Go().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:ow,useClass:lf,deps:[zt,df,Ac]},{provide:lf,useClass:lf,deps:[zt,df,Ac]}],l0=[{provide:td,useValue:"root"},{provide:ci,useFactory:function AN(){return new ci},deps:[]},{provide:Wc,useClass:CN,multi:!0,deps:[Zt,zt,qo]},{provide:Wc,useClass:IN,multi:!0,deps:[Zt]},{provide:Kc,useClass:Kc,deps:[Gc,Xo,Uo]},{provide:To,useExisting:Kc},{provide:Zw,useExisting:Xo},{provide:Xo,useClass:Xo,deps:[Zt]},{provide:Gc,useClass:Gc,deps:[Wc,zt]},{provide:class LP{},useClass:mN,deps:[]},[]];let d0=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Uo,useValue:n.appId},{provide:Qw,useExisting:Uo},pN]}}}return t.\u0275fac=function(n){return new(n||t)(Ce(c0,12))},t.\u0275mod=vr({type:t}),t.\u0275inj=rr({providers:[...l0,...u0],imports:[PP,gO]}),t})();function g0(t){return Array.isArray(t)?t:[t]}function m0(t){return t instanceof Oi?t.nativeElement:t}typeof window<"u"&&window;const{isArray:VN}=Array,{getPrototypeOf:UN,prototype:qN,keys:zN}=Object;const{isArray:GN}=Array;function Gf(t){return jt(e=>function KN(t,e){return GN(e)?t(...e):t(e)}(t,e))}function QN(...t){const e=to(t),n=function Hp(t){return $(Vu(t))?t.pop():void 0}(t),{args:r,keys:i}=function v0(t){if(1===t.length){const e=t[0];if(VN(e))return{args:e,keys:null};if(function WN(t){return t&&"object"==typeof t&&UN(t)===qN}(e)){const n=zN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return no([],e);const s=new Te(function YN(t,e,n=we){return r=>{_0(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)_0(e,()=>{const u=no(t[c],e);let l=!1;u.subscribe(on(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function y0(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):we));return n?s.pipe(Gf(n)):s}function _0(t,e,n){t?Fr(n,t,e):e()}function Jo(...t){return function ZN(){return Bp(1)}()(no(t,to(t)))}function Yr(t){return t<=0?()=>$u:sn((e,n)=>{let r=0;e.subscribe(on(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function fi(t,e){return sn((n,r)=>{let i=0;n.subscribe(on(r,s=>t.call(e,s,i++)&&r.next(s)))})}class JN extends ye{constructor(e,n){super()}schedule(e,n=0){return this}}const Qc={setInterval(t,e,...n){const{delegate:r}=Qc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Qc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0},w0={now:()=>(w0.delegate||Date).now(),delegate:void 0};class ea{constructor(e,n=ea.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}ea.now=w0.now;const Kf=new class tF extends ea{constructor(e,n=ea.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}(class eF extends JN{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Qc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Qc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,H(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}),nF=Kf;function iF(...t){const e=to(t);return sn((n,r)=>{(e?Jo(t,n,e):Jo(t,n)).subscribe(r)})}function sF(t){return sn((e,n)=>{fn(t).subscribe(on(n,()=>n.complete(),X)),!n.closed&&e.subscribe(n)})}let Qf;try{Qf=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Qf=!1}let ta,D0=(()=>{class t{constructor(n){this._platformId=n,this.isBrowser=this._platformId?kf(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Qf)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(n){return new(n||t)(Ce(qo))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Yc(t){return function oF(){if(null==ta&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ta=!0}))}finally{ta=ta||!1}return ta}()?t:!!t.capture}const b0=new Set;let $s,lF=(()=>{class t{constructor(n){this._platform=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):fF}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&function dF(t){if(!b0.has(t))try{$s||($s=document.createElement("style"),$s.setAttribute("type","text/css"),document.head.appendChild($s)),$s.sheet&&($s.sheet.insertRule(`@media ${t} {body{ }}`,0),b0.add(t))}catch(e){console.error(e)}}(n),this._matchMedia(n)}}return t.\u0275fac=function(n){return new(n||t)(Ce(D0))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function fF(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let C0=(()=>{class t{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new te}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return S0(g0(n)).some(i=>this._registerQuery(i).mql.matches)}observe(n){let s=QN(S0(g0(n)).map(o=>this._registerQuery(o).observable));return s=Jo(s.pipe(Yr(1)),s.pipe(function XN(t){return fi((e,n)=>t<=n)}(1),function rF(t,e=Kf){return sn((n,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+t,l=e.now();if(l<u)return i=this.schedule(void 0,u-l),void r.add(i);a()}n.subscribe(on(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))),s.pipe(jt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);const r=this._mediaMatcher.matchMedia(n),s={observable:new Te(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(iF(r),jt(({matches:o})=>({query:n,matches:o})),sF(this._destroySubject)),mql:r};return this._queries.set(n,s),s}}return t.\u0275fac=function(n){return new(n||t)(Ce(lF),Ce(zt))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function S0(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}class hi{constructor(e){this.observer=e,this.screenSize="big",this.currentMainView="spaces",this.currentSpaceId="";const n="(max-width: 900px)",r="(max-width: 450px)";this.observer.observe([n,r]).subscribe(i=>{this.setScreenSize(i.breakpoints[r]?"small":i.breakpoints[n]?"medium":"big")})}setScreenSize(e){this.screenSize=e}getScreenSize(){return this.screenSize}setCurrentMainView(e){this.currentMainView=e}getCurrentMainView(){return this.currentMainView}setCurrentSpaceId(e){this.currentSpaceId=e}getCurrentSpaceId(){return this.currentSpaceId}}function M0(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function Xe(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(c){M0(s,r,i,o,a,"next",c)}function a(c){M0(s,r,i,o,a,"throw",c)}o(void 0)})}}hi.\u0275fac=function(e){return new(e||hi)(Ce(C0))},hi.\u0275prov=Ze({token:hi,factory:hi.\u0275fac,providedIn:"root"});var Xc,hF=fe(294),Tr=fe.n(hF),pF=fe(452),Zf=fe.n(pF),gF=new Uint8Array(16);function mF(){if(!Xc&&!(Xc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xc(gF)}const vF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,_F=function yF(t){return"string"==typeof t&&vF.test(t)};for(var un=[],Xf=0;Xf<256;++Xf)un.push((Xf+256).toString(16).substr(1));const Jf=function EF(t,e,n){var r=(t=t||{}).random||(t.rng||mF)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function wF(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(un[t[e+0]]+un[t[e+1]]+un[t[e+2]]+un[t[e+3]]+"-"+un[t[e+4]]+un[t[e+5]]+"-"+un[t[e+6]]+un[t[e+7]]+"-"+un[t[e+8]]+un[t[e+9]]+"-"+un[t[e+10]]+un[t[e+11]]+un[t[e+12]]+un[t[e+13]]+un[t[e+14]]+un[t[e+15]]).toLowerCase();if(!_F(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var Vs,xn,I0=fe(899),bF=fe(69),Zr=fe.n(bF);function Jc(t){return"$"+t}function T0(t){return t.substring(1)}function Xr(){this._store={}}function na(t){if(this._store=new Xr,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}Xr.prototype.get=function(t){var e=Jc(t);return this._store[e]},Xr.prototype.set=function(t,e){var n=Jc(t);return this._store[n]=e,!0},Xr.prototype.has=function(t){return Jc(t)in this._store},Xr.prototype.keys=function(){return Object.keys(this._store).map(t=>T0(t))},Xr.prototype.delete=function(t){var e=Jc(t),n=e in this._store;return delete this._store[e],n},Xr.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var i=e[n];t(this._store[i],i=T0(i))}},Object.defineProperty(Xr.prototype,"size",{get:function(){return Object.keys(this._store).length}}),na.prototype.add=function(t){return this._store.set(t,!0)},na.prototype.has=function(t){return this._store.has(t)},na.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})},Object.defineProperty(na.prototype,"size",{get:function(){return this._store.size}}),function CF(){if(typeof Symbol>"u"||typeof Map>"u"||typeof Set>"u")return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(Vs=Set,xn=Map):(Vs=na,xn=Xr);var eh,A0=Function.prototype.toString,TF=A0.call(Object);function en(t){var e,n,r;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,r=t.length;n<r;n++)e[n]=en(t[n]);return e}if(t instanceof Date&&isFinite(t))return t.toISOString();if(function SF(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer||typeof Blob<"u"&&t instanceof Blob}(t))return function IF(t){if(t instanceof ArrayBuffer)return function MF(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),r=new Uint8Array(t);return n.set(r),e}(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}(t);if(!function AF(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&A0.call(n)==TF}(t))return t;for(n in e={},t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=en(t[n]);typeof i<"u"&&(e[n]=i)}return e}function x0(t){var e=!1;return function(...n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)}}function O0(t){return function(...e){e=en(e);var n=this,r="function"==typeof e[e.length-1]&&e.pop(),i=new Promise(function(s,o){var a;try{var c=x0(function(u,l){u?o(u):s(l)});e.push(c),(a=t.apply(n,e))&&"function"==typeof a.then&&s(a)}catch(u){o(u)}});return r&&i.then(function(s){r(null,s)},r),i}}function Vt(t,e){return O0(function(...n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return function xF(t,e,n){if(t.constructor.listeners("debug").length){for(var r=["api",t.name,e],i=0;i<n.length-1;i++)r.push(n[i]);t.constructor.emit("debug",r);var s=n[n.length-1];n[n.length-1]=function(o,a){var c=["api",t.name,e];c=c.concat(o?["error",o]:["success",a]),t.constructor.emit("debug",c),s(o,a)}}}(r,t,n),this.taskqueue.isReady?e.apply(this,n):new Promise(function(i,s){r.taskqueue.addTask(function(o){o?s(o):i(r[t].apply(r,n))})})})}function ra(t,e){for(var n={},r=0,i=e.length;r<i;r++){var s=e[r];s in t&&(n[s]=t[s])}return n}function P0(t){return t}function PF(t){return[{ok:t}]}function N0(t,e,n){var r=e.docs,i=new xn;r.forEach(function(v){i.has(v.id)?i.get(v.id).push(v):i.set(v.id,[v])});var s=i.size,o=0,a=new Array(s);var d=[];i.forEach(function(v,y){d.push(y)});var g=0;!function f(){if(!(g>=d.length)){var v=Math.min(g+6,d.length),y=d.slice(g,v);(function p(v,y){v.forEach(function(_,b){var E=y+b,I=i.get(_),T=ra(I[0],["atts_since","attachments"]);T.open_revs=I.map(function(U){return U.rev}),T.open_revs=T.open_revs.filter(P0);var P=P0;0===T.open_revs.length&&(delete T.open_revs,P=PF),["revs","attachments","binary","ajax","latest"].forEach(function(U){U in e&&(T[U]=e[U])}),t.get(_,T,function(U,oe){var G;G=U?[{error:U}]:P(oe),function l(v,y,_){a[v]={id:y,docs:_},function u(){++o===s&&function c(){var v=[];a.forEach(function(y){y.docs.forEach(function(_){v.push({id:y.id,docs:[_]})})}),n(null,{results:v})}()}()}(E,_,G),f()})})})(y,g),g+=y.length}}()}try{localStorage.setItem("_pouch_check_localstorage",1),eh=!!localStorage.getItem("_pouch_check_localstorage")}catch{eh=!1}function eu(){return eh}class NF extends(Zr()){constructor(){super(),this._listeners={},eu()&&addEventListener("storage",function(e){this.emit(e.key)})}addListener(e,n,r,i){if(!this._listeners[n]){var s=!1,o=this;this._listeners[n]=a,this.on(e,a)}function a(){if(o._listeners[n])if(s)s="waiting";else{s=!0;var c=ra(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);r.changes(c).on("change",function(l){l.seq>i.since&&!i.cancelled&&(i.since=l.seq,i.onChange(l))}).on("complete",function(){"waiting"===s&&Tr()(a),s=!1}).on("error",function u(){s=!1})}}}removeListener(e,n){n in this._listeners&&(super.removeListener(e,this._listeners[n]),delete this._listeners[n])}notifyLocalWindows(e){eu()&&(localStorage[e]="a"===localStorage[e]?"b":"a")}notify(e){this.emit(e),this.notifyLocalWindows(e)}}function Xn(t){if(typeof console<"u"&&"function"==typeof console[t]){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function RF(t){var e=0;return t||(e=2e3),function FF(t,e){var n=6e5;return t=parseInt(t,10)||0,(e=parseInt(e,10))!=e||e<=t?e=(t||1)<<1:e+=1,e>n&&(t=n>>1,e=n),~~((e-t)*Math.random()+t)}(t,e)}function th(t,e){Xn("info","The above "+t+" is totally normal. "+e)}var Bi="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};class xt extends Error{constructor(e,n,r){super(),this.status=e,this.name=n,this.message=r,this.error=!0}toString(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})}}new xt(401,"unauthorized","Name or password is incorrect.");var kF=new xt(400,"bad_request","Missing JSON list of 'docs'"),Jn=new xt(404,"not_found","missing"),Us=new xt(409,"conflict","Document update conflict"),F0=new xt(400,"bad_request","_id field must contain a string"),LF=new xt(412,"missing_id","_id is required for puts"),BF=new xt(400,"bad_request","Only reserved document ids may start with underscore."),rh=(new xt(412,"precondition_failed","Database not open"),new xt(500,"unknown_error","Database encountered an unknown error")),R0=new xt(500,"badarg","Some query argument is invalid"),jF=(new xt(400,"invalid_request","Request was invalid"),new xt(400,"query_parse_error","Some query parameter is invalid")),k0=new xt(500,"doc_validation","Bad special document member"),tu=new xt(400,"bad_request","Something wrong with the request"),ih=new xt(400,"bad_request","Document must be a JSON object"),sh=(new xt(404,"not_found","Database not found"),new xt(500,"indexed_db_went_bad","unknown")),L0=(new xt(500,"web_sql_went_bad","unknown"),new xt(500,"levelDB_went_went_bad","unknown"),new xt(403,"forbidden","Forbidden by design doc validate_doc_update function"),new xt(400,"bad_request","Invalid rev format")),HF=(new xt(412,"file_exists","The database could not be created, the file already exists."),new xt(412,"missing_stub","A pre-existing attachment stub wasn't found"));function Je(t,e){function n(r){for(var i=Object.getOwnPropertyNames(t),s=0,o=i.length;s<o;s++)"function"!=typeof t[i[s]]&&(this[i[s]]=t[i[s]]);void 0===this.stack&&(this.stack=(new Error).stack),void 0!==r&&(this.reason=r)}return n.prototype=xt.prototype,new n(e)}function qs(t){if("object"!=typeof t){var e=t;(t=rh).data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),"stack"in t||(t.stack=(new Error).stack),t}function oh(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(i){i.doc||(i.doc={});var s=n&&function $F(t,e,n){try{return!t(e,n)}catch(i){var r="Filter function threw: "+i.toString();return Je(tu,r)}}(t.filter,i.doc,e);if("object"==typeof s)return s;if(s)return!1;if(t.include_docs){if(!t.attachments)for(var o in i.doc._attachments)Object.prototype.hasOwnProperty.call(i.doc._attachments,o)&&(i.doc._attachments[o].stub=!0)}else delete i.doc;return!0}}function nu(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function B0(t){var e;if(t?"string"!=typeof t?e=Je(F0):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=Je(BF)):e=Je(LF),e)throw e}function Ar(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(Xn("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function ah(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function j0(t){var e=ah(t);return e?e.join("/"):null}new xt(413,"invalid_url","Provided URL is invalid");var H0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],$0="queryKey",UF=/(?:^|&)([^&=]*)=?([^&]*)/g,qF=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function V0(t){for(var e=qF.exec(t),n={},r=14;r--;){var i=H0[r],s=e[r]||"",o=-1!==["user","password"].indexOf(i);n[i]=o?decodeURIComponent(s):s}return n[$0]={},n[H0[12]].replace(UF,function(a,c,u){c&&(n[$0][c]=u)}),n}function ch(t,e){var n=[],r=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n.push(i),r.push(e[i]));return n.push(t),Function.apply(null,n).apply(null,r)}function ru(t,e,n){return t.get(e).catch(function(r){if(404!==r.status)throw r;return{}}).then(function(r){var i=r._rev,s=n(r);return s?(s._id=e,s._rev=i,function zF(t,e,n){return t.put(e).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(409!==r.status)throw r;return ru(t,e._id,n)})}(t,s,n)):{updated:!1,rev:i}})}var uh=function(t){return atob(t)},ia=function(t){return btoa(t)};function lh(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(s){if("TypeError"!==s.name)throw s;for(var r=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(e.type)}}function WF(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function dh(t,e){return lh([WF(t)],{type:e})}function fh(t,e){return dh(uh(t),e)}function U0(t,e){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(i){var s=i.target.result||"";if(r)return e(s);e(function GF(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return e}(s))},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function q0(t,e){U0(t,function(n){e(n)})}function hh(t,e){q0(t,function(n){e(ia(n))})}var QF=self.setImmediate||self.setTimeout;function JF(t,e,n,r,i){(n>0||r<e.size)&&(e=function XF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}(e,n,r)),function KF(t,e){var n=new FileReader;n.onloadend=function(r){var i=r.target.result||new ArrayBuffer(0);e(i)},n.readAsArrayBuffer(t)}(e,function(s){t.append(s),i()})}function eR(t,e,n,r,i){(n>0||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e),i()}function ph(t,e){var n="string"==typeof t,r=n?t.length:t.size,i=Math.min(32768,r),s=Math.ceil(r/i),o=0,a=n?new(Zf()):new(Zf().ArrayBuffer),c=n?eR:JF;function u(){QF(d)}function l(){var f=function ZF(t){return ia(t)}(a.end(!0));e(f),a.destroy()}function d(){var g=o*i;o++,c(a,t,g,g+i,o<s?u:l)}d()}function z0(t){return Zf().hash(t)}function W0(t,e){if(!e)return Jf().replace(/-/g,"").toLowerCase();var n=Bi({},t);return delete n._rev_tree,z0(JSON.stringify(n))}var iu=Jf;function ji(t){for(var e,n,r,s,i=t.rev_tree.slice();s=i.pop();){var o=s.ids,a=o[2],c=s.pos;if(a.length)for(var u=0,l=a.length;u<l;u++)i.push({pos:c+1,ids:a[u]});else{var d=!!o[1].deleted,g=o[0];(!e||(r!==d?r:n!==c?n<c:e<g))&&(e=g,n=c,r=d)}}return n+"-"+e}function Hi(t,e){for(var r,n=t.slice();r=n.pop();)for(var i=r.pos,s=r.ids,o=s[2],a=e(0===o.length,i,s[0],r.ctx,s[1]),c=0,u=o.length;c<u;c++)n.push({pos:i+1,ids:o[c],ctx:a})}function tR(t,e){return t.pos-e.pos}function gh(t){var e=[];Hi(t,function(i,s,o,a,c){i&&e.push({rev:s+"-"+o,pos:s,opts:c})}),e.sort(tR).reverse();for(var n=0,r=e.length;n<r;n++)delete e[n].pos;return e}function mh(t){for(var e=ji(t),n=gh(t.rev_tree),r=[],i=0,s=n.length;i<s;i++){var o=n[i];o.rev!==e&&!o.opts.deleted&&r.push(o.rev)}return r}function G0(t){for(var r,e=[],n=t.slice();r=n.pop();){var i=r.pos,s=r.ids,o=s[0],a=s[1],c=s[2],u=0===c.length,l=r.history?r.history.slice():[];l.push({id:o,opts:a}),u&&e.push({pos:i+1-l.length,ids:l});for(var d=0,g=c.length;d<g;d++)n.push({pos:i+1,ids:c[d],history:l})}return e.reverse()}function iR(t,e){return t.pos-e.pos}function oR(t,e,n){var r=function sR(t,e,n){for(var s,r=0,i=t.length;r<i;)n(t[s=r+i>>>1],e)<0?r=s+1:i=s;return r}(t,e,n);t.splice(r,0,e)}function K0(t,e){for(var n,r,i=e,s=t.length;i<s;i++){var o=t[i],a=[o.id,o.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function aR(t,e){return t[0]<e[0]?-1:1}function Q0(t,e){for(var n=[{tree1:t,tree2:e}],r=!1;n.length>0;){var i=n.pop(),s=i.tree1,o=i.tree2;(s[1].status||o[1].status)&&(s[1].status="available"===s[1].status||"available"===o[1].status?"available":"missing");for(var a=0;a<o[2].length;a++)if(s[2][0]){for(var c=!1,u=0;u<s[2].length;u++)s[2][u][0]===o[2][a][0]&&(n.push({tree1:s[2][u],tree2:o[2][a]}),c=!0);c||(r="new_branch",oR(s[2],o[2][a],aR))}else r="new_leaf",s[2][0]=o[2][a]}return{conflicts:r,tree:t}}function Y0(t,e,n){var o,r=[],i=!1,s=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var a=0,c=t.length;a<c;a++){var u=t[a];if(u.pos===e.pos&&u.ids[0]===e.ids[0])o=Q0(u.ids,e.ids),r.push({pos:u.pos,ids:o.tree}),i=i||o.conflicts,s=!0;else if(!0!==n){var l=u.pos<e.pos?u:e,d=u.pos<e.pos?e:u,f=[],p=[];for(p.push({ids:l.ids,diff:d.pos-l.pos,parent:null,parentIdx:null});p.length>0;){var v=p.pop();if(0!==v.diff)for(var y=v.ids[2],_=0,b=y.length;_<b;_++)p.push({ids:y[_],diff:v.diff-1,parent:v.ids,parentIdx:_});else v.ids[0]===d.ids[0]&&f.push(v)}var E=f[0];E?(o=Q0(E.ids,d.ids),E.parent[2][E.parentIdx]=o.tree,r.push({pos:l.pos,ids:l.ids}),i=i||o.conflicts,s=!0):r.push(u)}else r.push(u)}return s||r.push(e),r.sort(iR),{tree:r,conflicts:i||"internal_node"}}function Z0(t,e,n){var r=Y0(t,e),i=function cR(t,e){for(var r,i,n=G0(t),s=0,o=n.length;s<o;s++){var u,a=n[s],c=a.ids;if(c.length>e){r||(r={});var l=c.length-e;u={pos:a.pos+l,ids:K0(c,l)};for(var d=0;d<l;d++)r[a.pos+d+"-"+c[d].id]=!0}else u={pos:a.pos,ids:K0(c,0)};i=i?Y0(i,u,!0).tree:[u]}return r&&Hi(i,function(f,p,v){delete r[p+"-"+v]}),{tree:i,revs:r?Object.keys(r):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function lR(t){return t.ids}function Jr(t,e){e||(e=ji(t));for(var i,n=e.substring(e.indexOf("-")+1),r=t.rev_tree.map(lR);i=r.pop();){if(i[0]===n)return!!i[1].deleted;r=r.concat(i[2])}}function $i(t){return/^_local/.test(t)}function hR(t,e,n){var r=[{rev:t._rev}];"all_docs"===n.style&&(r=gh(e.rev_tree).map(function(s){return{rev:s.rev}}));var i={id:e.id,changes:r,doc:t};return Jr(e,t._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=mh(e),i.doc._conflicts.length||delete i.doc._conflicts),i}class pR extends(Zr()){constructor(e,n,r){super(),this.db=e;var i=(n=n?en(n):{}).complete=x0((a,c)=>{a?function VF(t,e){return"listenerCount"in t?t.listenerCount(e):Zr().listenerCount(t,e)}(this,"error")>0&&this.emit("error",a):this.emit("complete",c),this.removeAllListeners(),e.removeListener("destroyed",s)});r&&(this.on("complete",function(a){r(null,a)}),this.on("error",r));const s=()=>{this.cancel()};e.once("destroyed",s),n.onChange=(a,c,u)=>{this.isCancelled||function fR(t,e,n,r){try{t.emit("change",e,n,r)}catch(i){Xn("error",'Error in .on("change", function):',i)}}(this,a,c,u)};var o=new Promise(function(a,c){n.complete=function(u,l){u?c(u):a(l)}});this.once("cancel",function(){e.removeListener("destroyed",s),n.complete(null,{status:"cancelled"})}),this.then=o.then.bind(o),this.catch=o.catch.bind(o),this.then(function(a){i(null,a)},i),e.taskqueue.isReady?this.validateChanges(n):e.taskqueue.addTask(a=>{a?n.complete(a):this.isCancelled?this.emit("cancel"):this.validateChanges(n)})}cancel(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")}validateChanges(e){var n=e.complete;et._changesFilterPlugin?et._changesFilterPlugin.validate(e,r=>{if(r)return n(r);this.doChanges(e)}):this.doChanges(e)}doChanges(e){var n=e.complete;if("live"in(e=en(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=hR,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(et._changesFilterPlugin){if(et._changesFilterPlugin.normalize(e),et._changesFilterPlugin.shouldFilter(this,e))return et._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(i){i in e&&Xn("warn",'The "'+i+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&"function"==typeof r.cancel){const i=this.cancel;this.cancel=(...s)=>{r.cancel(),i.apply(this,s)}}}else this.db.info().then(i=>{this.isCancelled?n(null,{status:"cancelled"}):(e.since=i.update_seq,this.doChanges(e))},n)}}function X0(t,e){return t<e?-1:t>e?1:0}function vh(t,e){return function(n,r){n||r[0]&&r[0].error?((n=n||r[0]).docId=e,t(n)):t(null,r.length?r[0]:r)}}function mR(t,e){var n=X0(t._id,e._id);return 0!==n?n:X0(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function J0(t){var e=t._compactionQueue[0],n=e.opts,r=e.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(n.last_seq=i.last_seq),t._compact(n,function(s,o){s?r(s):r(null,o),Tr()(function(){t._compactionQueue.shift(),t._compactionQueue.length&&J0(t)})})})}class eD extends(Zr()){_setup(){this.post=Vt("post",function(e,n,r){if("function"==typeof n&&(r=n,n={}),"object"!=typeof e||Array.isArray(e))return r(Je(ih));this.bulkDocs({docs:[e]},n,vh(r,e._id))}).bind(this),this.put=Vt("put",function(e,n,r){if("function"==typeof n&&(r=n,n={}),"object"!=typeof e||Array.isArray(e))return r(Je(ih));if(B0(e._id),$i(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,r):this._putLocal(e,r);const i=o=>{"function"==typeof this._put&&!1!==n.new_edits?this._put(e,n,o):this.bulkDocs({docs:[e]},n,vh(o,e._id))};n.force&&e._rev?(function s(){var o=e._rev.split("-"),a=o[1],u=parseInt(o[0],10)+1,l=W0();e._revisions={start:u,ids:[l,a]},e._rev=u+"-"+l,n.new_edits=!1}(),i(function(o){r(o,o?null:{ok:!0,id:e._id,rev:e._rev})})):i(r)}).bind(this),this.putAttachment=Vt("putAttachment",function(e,n,r,i,s){var o=this;function a(c){var u="_rev"in c?parseInt(c._rev,10):0;return c._attachments=c._attachments||{},c._attachments[n]={content_type:s,data:i,revpos:++u},o.put(c)}return"function"==typeof s&&(s=i,i=r,r=null),typeof s>"u"&&(s=i,i=r,r=null),s||Xn("warn","Attachment",n,"on document",e,"is missing content_type"),o.get(e).then(function(c){if(c._rev!==r)throw Je(Us);return a(c)},function(c){if(c.reason===Jn.message)return a({_id:e});throw c})}).bind(this),this.removeAttachment=Vt("removeAttachment",function(e,n,r,i){this.get(e,(s,o)=>{if(s)i(s);else{if(o._rev===r)return o._attachments?(delete o._attachments[n],0===Object.keys(o._attachments).length&&delete o._attachments,void this.put(o,i)):i();i(Je(Us))}})}).bind(this),this.remove=Vt("remove",function(e,n,r,i){var s;"string"==typeof n?(s={_id:e,_rev:n},"function"==typeof r&&(i=r,r={})):(s=e,"function"==typeof n?(i=n,r={}):(i=r,r=n)),(r=r||{}).was_delete=!0;var o={_id:s._id,_rev:s._rev||r.rev,_deleted:!0};if($i(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(s,i);this.bulkDocs({docs:[o]},r,vh(i,o._id))}).bind(this),this.revsDiff=Vt("revsDiff",function(e,n,r){"function"==typeof n&&(r=n,n={});var i=Object.keys(e);if(!i.length)return r(null,{});var s=0,o=new xn;function a(u,l){o.has(u)||o.set(u,{missing:[]}),o.get(u).missing.push(l)}i.map(function(u){this._getRevisionTree(u,function(l,d){if(l&&404===l.status&&"missing"===l.message)o.set(u,{missing:e[u]});else{if(l)return r(l);!function c(u,l){var d=e[u].slice(0);Hi(l,function(g,f,p,v,y){var _=f+"-"+p,b=d.indexOf(_);-1!==b&&(d.splice(b,1),"available"!==y.status&&a(u,_))}),d.forEach(function(g){a(u,g)})}(u,d)}if(++s===i.length){var g={};return o.forEach(function(f,p){g[p]=f}),r(null,g)}})},this)}).bind(this),this.bulkGet=Vt("bulkGet",function(e,n){N0(this,e,n)}).bind(this),this.compactDocument=Vt("compactDocument",function(e,n,r){this._getRevisionTree(e,(i,s)=>{if(i)return r(i);var o=function vR(t){var e={},n=[];return Hi(t,function(r,i,s,o){var a=i+"-"+s;return r&&(e[a]=0),void 0!==o&&n.push({from:o,to:a}),a}),n.reverse(),n.forEach(function(r){e[r.from]=void 0===e[r.from]?1+e[r.to]:Math.min(e[r.from],1+e[r.to])}),e}(s),a=[],c=[];Object.keys(o).forEach(function(u){o[u]>n&&a.push(u)}),Hi(s,function(u,l,d,g,f){var p=l+"-"+d;"available"===f.status&&-1!==a.indexOf(p)&&c.push(p)}),this._doCompaction(e,c,r)})}).bind(this),this.compact=Vt("compact",function(e,n){"function"==typeof e&&(n=e,e={}),e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:n}),1===this._compactionQueue.length&&J0(this)}).bind(this),this.get=Vt("get",function(e,n,r){if("function"==typeof n&&(r=n,n={}),"string"!=typeof e)return r(Je(F0));if($i(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var i=[];const s=()=>{var c=[],u=i.length;if(!u)return r(null,c);i.forEach(l=>{this.get(e,{rev:l,revs:n.revs,latest:n.latest,attachments:n.attachments,binary:n.binary},function(d,g){if(d)c.push({missing:l});else{for(var f,p=0,v=c.length;p<v;p++)if(c[p].ok&&c[p].ok._rev===g._rev){f=!0;break}f||c.push({ok:g})}--u||r(null,c)})})};if(!n.open_revs)return this._get(e,n,(c,u)=>{if(c)return c.docId=e,r(c);var l=u.doc,d=u.metadata,g=u.ctx;if(n.conflicts){var f=mh(d);f.length&&(l._conflicts=f)}if(Jr(d,l._rev)&&(l._deleted=!0),n.revs||n.revs_info){for(var p=l._rev.split("-"),v=parseInt(p[0],10),y=p[1],_=G0(d.rev_tree),b=null,E=0;E<_.length;E++){var I=_[E],T=I.ids.map(function(xe){return xe.id}).indexOf(y);(T===v-1||!b&&-1!==T)&&(b=I)}if(!b)return(c=new Error("invalid rev tree")).docId=e,r(c);var U=b.ids.map(function(xe){return xe.id}).indexOf(l._rev.split("-")[1])+1;if(b.ids.splice(U,b.ids.length-U),b.ids.reverse(),n.revs&&(l._revisions={start:b.pos+b.ids.length-1,ids:b.ids.map(function(xe){return xe.id})}),n.revs_info){var G=b.pos+b.ids.length;l._revs_info=b.ids.map(function(xe){return{rev:--G+"-"+xe.id,status:xe.opts.status}})}}if(n.attachments&&l._attachments){var de=l._attachments,pe=Object.keys(de).length;if(0===pe)return r(null,l);Object.keys(de).forEach(xe=>{this._getAttachment(l._id,xe,de[xe],{rev:l._rev,binary:n.binary,ctx:g},function(Me,Ee){var B=l._attachments[xe];B.data=Ee,delete B.stub,delete B.length,--pe||r(null,l)})})}else{if(l._attachments)for(var Re in l._attachments)Object.prototype.hasOwnProperty.call(l._attachments,Re)&&(l._attachments[Re].stub=!0);r(null,l)}});if("all"===n.open_revs)this._getRevisionTree(e,function(c,u){if(c)return r(c);i=gh(u).map(function(l){return l.rev}),s()});else{if(!Array.isArray(n.open_revs))return r(Je(rh,"function_clause"));i=n.open_revs;for(var o=0;o<i.length;o++){var a=i[o];if("string"!=typeof a||!/^\d+-/.test(a))return r(Je(L0))}s()}}).bind(this),this.getAttachment=Vt("getAttachment",function(e,n,r,i){r instanceof Function&&(i=r,r={}),this._get(e,r,(s,o)=>s?i(s):o.doc._attachments&&o.doc._attachments[n]?(r.ctx=o.ctx,r.binary=!0,void this._getAttachment(e,n,o.doc._attachments[n],r,i)):i(Je(Jn)))}).bind(this),this.allDocs=Vt("allDocs",function(e,n){if("function"==typeof e&&(n=e,e={}),e.skip=typeof e.skip<"u"?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return n(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(i){return i in e})[0];if(r)return void n(Je(jF,"Query parameter `"+r+"` is not compatible with multi-get"));if(!Ar(this)&&(function yR(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}(e),0===e.keys.length))return this._allDocs({limit:0},n)}return this._allDocs(e,n)}).bind(this),this.close=Vt("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}).bind(this),this.info=Vt("info",function(e){this._info((n,r)=>{if(n)return e(n);r.db_name=r.db_name||this.name,r.auto_compaction=!(!this.auto_compaction||Ar(this)),r.adapter=this.adapter,e(null,r)})}).bind(this),this.id=Vt("id",function(e){return this._id(e)}).bind(this),this.bulkDocs=Vt("bulkDocs",function(e,n,r){if("function"==typeof n&&(r=n,n={}),n=n||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(Je(kF));for(var i=0;i<e.docs.length;++i)if("object"!=typeof e.docs[i]||Array.isArray(e.docs[i]))return r(Je(ih));var s;if(e.docs.forEach(function(c){c._attachments&&Object.keys(c._attachments).forEach(function(u){s=s||function wR(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}(u),c._attachments[u].content_type||Xn("warn","Attachment",u,"on document",c._id,"is missing content_type")})}),s)return r(Je(tu,s));"new_edits"in n||(n.new_edits=!("new_edits"in e)||e.new_edits);var o=this;!n.new_edits&&!Ar(o)&&e.docs.sort(mR),function gR(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var s=r[i];n._attachments[s]=ra(n._attachments[s],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var a=e.docs.map(function(c){return c._id});this._bulkDocs(e,n,function(c,u){if(c)return r(c);if(n.new_edits||(u=u.filter(function(g){return g.error})),!Ar(o))for(var l=0,d=u.length;l<d;l++)u[l].id=u[l].id||a[l];r(null,u)})}).bind(this),this.registerDependentDatabase=Vt("registerDependentDatabase",function(e,n){var r=en(this.__opts);this.__opts.view_adapter&&(r.adapter=this.__opts.view_adapter);var i=new this.constructor(e,r);ru(this,"_local/_pouch_dependentDbs",function s(o){return o.dependentDbs=o.dependentDbs||{},!o.dependentDbs[e]&&(o.dependentDbs[e]=!0,o)}).then(function(){n(null,{db:i})}).catch(n)}).bind(this),this.destroy=Vt("destroy",function(e,n){"function"==typeof e&&(n=e,e={});var r=!("use_prefix"in this)||this.use_prefix;const i=()=>{this._destroy(e,(s,o)=>{if(s)return n(s);this._destroyed=!0,this.emit("destroyed"),n(null,o||{ok:!0})})};if(Ar(this))return i();this.get("_local/_pouch_dependentDbs",(s,o)=>{if(s)return 404!==s.status?n(s):i();var c=this.constructor,u=Object.keys(o.dependentDbs).map(l=>{var d=r?l.replace(new RegExp("^"+c.prefix),""):l;return new c(d,this.__opts).destroy()});Promise.all(u).then(i,n)})}).bind(this)}_compact(e,n){var s,r={return_docs:!1,last_seq:e.last_seq||0},i=[],o=0;const a=l=>{this.activeTasks.update(s,{completed_items:++o}),i.push(this.compactDocument(l.id,0))},c=l=>{this.activeTasks.remove(s,l),n(l)},u=l=>{var d=l.last_seq;Promise.all(i).then(()=>ru(this,"_local/compaction",g=>(!g.last_seq||g.last_seq<d)&&(g.last_seq=d,g))).then(()=>{this.activeTasks.remove(s),n(null,{ok:!0})}).catch(c)};this.info().then(l=>{s=this.activeTasks.add({name:"database_compaction",total_items:l.update_seq-r.last_seq}),this.changes(r).on("change",a).on("complete",u).on("error",c)})}changes(e,n){return"function"==typeof e&&(n=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new pR(this,e,n)}type(){return"function"==typeof this._type?this._type():this.adapter}}eD.prototype.purge=Vt("_purge",function(t,e,n){if(typeof this._purge>"u")return n(Je(rh,"Purge is not implemented in the "+this.adapter+" adapter."));var r=this;r._getRevisionTree(t,(i,s)=>{if(i)return n(i);if(!s)return n(Je(Jn));let o;try{o=function rR(t,e){let n=[];const r=t.slice();let i;for(;i=r.pop();){const{pos:s,ids:o}=i,a=`${s}-${o[0]}`,c=o[2];if(n.push(a),a===e){if(0!==c.length)throw new Error("The requested revision is not a leaf");return n.reverse()}(0===c.length||c.length>1)&&(n=[]);for(let u=0,l=c.length;u<l;u++)r.push({pos:s+1,ids:c[u]})}if(0===n.length)throw new Error("The requested revision does not exist");return n.reverse()}(s,e)}catch(a){return n(a.message||a)}r._purge(t,o,(a,c)=>{if(a)return n(a);(function _R(t,e,n){return t.get("_local/purges").then(function(r){const i=r.purgeSeq+1;return r.purges.push({docId:e,rev:n,purgeSeq:i}),r.purges.length>self.purged_infos_limit&&r.purges.splice(0,r.purges.length-self.purged_infos_limit),r.purgeSeq=i,r}).catch(function(r){if(404!==r.status)throw r;return{_id:"_local/purges",purges:[{docId:e,rev:n,purgeSeq:0}],purgeSeq:0}}).then(function(r){return t.put(r)})})(r,t,e).then(function(){return n(null,c)})})})});class DR{constructor(){this.isReady=!1,this.failed=!1,this.queue=[]}execute(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()}fail(e){this.failed=e,this.execute()}ready(e){this.isReady=!0,this.db=e,this.execute()}addTask(e){this.queue.push(e),this.failed&&this.execute()}}function tD(t,e){let n=function(...r){if(!(this instanceof n))return new n(...r);e.apply(this,r)};return function bR(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t}})}(n,t),n}class nD extends eD{constructor(e,n){super(),this._setup(e,n)}_setup(e,n){if(super._setup(),n=n||{},e&&"object"==typeof e&&(e=(n=e).name,delete n.name),void 0===n.deterministic_revs&&(n.deterministic_revs=!0),this.__opts=n=en(n),this.auto_compaction=n.auto_compaction,this.purged_infos_limit=n.purged_infos_limit||1e3,this.prefix=et.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var i=function ER(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=et.adapters,i=et.preferredAdapters,s=et.prefix,o=e.adapter;if(!o)for(var a=0;a<i.length&&"idb"===(o=i[a])&&"websql"in r&&eu()&&localStorage["_pouch__websqldb_"+s+t];++a)Xn("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var c=r[o];return{name:c&&"use_prefix"in c&&!c.use_prefix?t:s+t,adapter:o}}((n.prefix||"")+e,n);if(n.name=i.name,n.adapter=n.adapter||i.adapter,this.name=e,this._adapter=n.adapter,et.emit("debug",["adapter","Picked adapter: ",n.adapter]),!et.adapters[n.adapter]||!et.adapters[n.adapter].valid())throw new Error("Invalid Adapter: "+n.adapter);if(n.view_adapter&&(!et.adapters[n.view_adapter]||!et.adapters[n.view_adapter].valid()))throw new Error("Invalid View Adapter: "+n.view_adapter);this.taskqueue=new DR,this.adapter=n.adapter,et.adapters[n.adapter].call(this,n,s=>{if(s)return this.taskqueue.fail(s);(function CR(t){function e(r){t.removeListener("closed",n),r||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)})(this),this.emit("created",this),et.emit("created",this.name),this.taskqueue.ready(this)})}}const et=tD(nD,function(t,e){nD.prototype._setup.call(this,t,e)});var SR=typeof AbortController<"u"?AbortController:function(){return{abort:function(){}}},rD=fetch,zs=Headers;et.adapters={},et.preferredAdapters=[],et.prefix="_pouch_";var iD=new(Zr());function yh(t,e){for(var n=t,r=0,i=e.length;r<i&&(n=n[e[r]]);r++);return n}function _h(t){for(var e=[],n="",r=0,i=t.length;r<i;r++){var s=t[r];r>0&&"\\"===t[r-1]&&("$"===s||"."===s)?n=n.substring(0,n.length-1)+s:"."===s?(e.push(n),n=""):n+=s}return e.push(n),e}(function IR(t){Object.keys(Zr().prototype).forEach(function(n){"function"==typeof Zr().prototype[n]&&(t[n]=iD[n].bind(iD))});var e=t._destructionListeners=new xn;t.on("ref",function(r){e.has(r.name)||e.set(r.name,[]),e.get(r.name).push(r)}),t.on("unref",function(r){if(e.has(r.name)){var i=e.get(r.name),s=i.indexOf(r);s<0||(i.splice(s,1),i.length>1?e.set(r.name,i):e.delete(r.name))}}),t.on("destroyed",function(r){if(e.has(r)){var i=e.get(r);e.delete(r),i.forEach(function(s){s.emit("destroyed",!0)})}})})(et),et.adapter=function(t,e,n){e.valid()&&(et.adapters[t]=e,n&&et.preferredAdapters.push(t))},et.plugin=function(t){if("function"==typeof t)t(et);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){et.prototype[e]=t[e]})}return this.__defaults&&(et.__defaults=Bi({},this.__defaults)),et},et.defaults=function(t){let e=tD(et,function(n,r){r=r||{},n&&"object"==typeof n&&(n=(r=n).name,delete r.name),r=Bi({},e.__defaults,r),et.call(this,n,r)});return e.preferredAdapters=et.preferredAdapters.slice(),Object.keys(et).forEach(function(n){n in e||(e[n]=et[n])}),e.__defaults=Bi({},this.__defaults,t),e},et.fetch=function(t,e){return rD(t,e)},et.prototype.activeTasks=et.activeTasks=new class MR{constructor(){this.tasks={}}list(){return Object.values(this.tasks)}add(e){const n=Jf();return this.tasks[n]={id:n,name:e.name,total_items:e.total_items,created_at:(new Date).toJSON()},n}get(e){return this.tasks[e]}remove(e,n){return delete this.tasks[e],this.tasks}update(e,n){const r=this.tasks[e];if(typeof r<"u"){const i={id:r.id,name:r.name,created_at:r.created_at,total_items:n.total_items||r.total_items,completed_items:n.completed_items||r.completed_items,updated_at:(new Date).toJSON()};this.tasks[e]=i}return this.tasks}};var xR=["$or","$nor","$not"];function sD(t){return xR.indexOf(t)>-1}function oD(t){return Object.keys(t)[0]}function sa(t){var e={},n={$or:!0,$nor:!0};return t.forEach(function(r){Object.keys(r).forEach(function(i){var s=r[i];if("object"!=typeof s&&(s={$eq:s}),sD(i))if(s instanceof Array){if(n[i])return n[i]=!1,void(e[i]=s);var o=[];e[i].forEach(function(c){Object.keys(s).forEach(function(u){var l=s[u],d=Math.max(Object.keys(c).length,Object.keys(l).length),g=sa([c,l]);Object.keys(g).length<=d||o.push(g)})}),e[i]=o}else e[i]=sa([s]);else{var a=e[i]=e[i]||{};Object.keys(s).forEach(function(c){var u=s[c];return"$gt"===c||"$gte"===c?function PR(t,e,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):typeof n.$gt<"u"?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e)}(c,u,a):"$lt"===c||"$lte"===c?function NR(t,e,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):typeof n.$lt<"u"?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e)}(c,u,a):"$ne"===c?function FR(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}(u,a):"$eq"===c?function RR(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}(u,a):"$regex"===c?function kR(t,e){"$regex"in e?e.$regex.push(t):e.$regex=[t]}(u,a):void(a[c]=u)})}})}),e}function aD(t){for(var e in t){if(Array.isArray(t))for(var n in t)t[n].$and&&(t[n]=sa(t[n].$and));var r=t[e];"object"==typeof r&&aD(r)}return t}function cD(t,e){for(var n in t){"$and"===n&&(e=!0);var r=t[n];"object"==typeof r&&(e=cD(r,e))}return e}function LR(t){var e=en(t);cD(e,!1)&&"$and"in(e=aD(e))&&(e=sa(e.$and)),["$or","$nor"].forEach(function(o){o in e&&e[o].forEach(function(a){for(var c=Object.keys(a),u=0;u<c.length;u++){var l=c[u],d=a[l];("object"!=typeof d||null===d)&&(a[l]={$eq:d})}})}),"$not"in e&&(e.$not=sa([e.$not]));for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],s=e[i];("object"!=typeof s||null===s)&&(s={$eq:s}),e[i]=s}return wh(e),e}function wh(t){Object.keys(t).forEach(function(e){var n=t[e];Array.isArray(n)?n.forEach(function(r){r&&"object"==typeof r&&wh(r)}):"$ne"===e?t.$ne=[n]:"$regex"===e?t.$regex=[n]:n&&"object"==typeof n&&wh(n)})}function Ut(t,e){if(t===e)return 0;t=Vi(t),e=Vi(e);var n=bh(t),r=bh(e);if(n-r!=0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return function zR(t,e){return t===e?0:t>e?1:-1}(t,e)}return Array.isArray(t)?function qR(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=Ut(t[r],e[r]);if(0!==i)return i}return t.length===e.length?0:t.length>e.length?1:-1}(t,e):function WR(t,e){for(var n=Object.keys(t),r=Object.keys(e),i=Math.min(n.length,r.length),s=0;s<i;s++){var o=Ut(n[s],r[s]);if(0!==o||0!==(o=Ut(t[n[s]],e[r[s]])))return o}return n.length===r.length?0:n.length>r.length?1:-1}(t,e)}function Vi(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var r=0;r<n;r++)t[r]=Vi(e[r])}else{if(t instanceof Date)return t.toJSON();if(null!==t)for(var i in t={},e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s<"u"&&(t[i]=Vi(s))}}}return t}function gr(t){return bh(t=Vi(t))+""+function HR(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return function GR(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),r=t<0,i=r?"0":"2",o=function jR(t,e,n){var r=function BR(t,e,n){for(var r="",i=n-t.length;r.length<i;)r+=e;return r}(t,e,n);return r+t}(((r?-n:n)- -324).toString(),"0",3);i+=""+o;var a=Math.abs(parseFloat(e[0]));r&&(a=10-a);var c=a.toFixed(20);return i+""+c.replace(/\.?0+$/,"")}(t);case"string":return t.replace(/\u0002/g,"\x02\x02").replace(/\u0001/g,"\x01\x02").replace(/\u0000/g,"\x01\x01");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,i=n.length,s="";if(e)for(;++r<i;)s+=gr(n[r]);else for(;++r<i;){var o=n[r];s+=gr(o)+gr(t[o])}return s}return""}(t)+"\0"}function $R(t,e){var r,n=e;if("1"===t[e])r=0,e++;else{var s="0"===t[e];e++;var o="",a=t.substring(e,e+3),c=parseInt(a,10)+-324;for(s&&(c=-c),e+=3;;){var u=t[e];if("\0"===u)break;o+=u,e++}r=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),s&&(r-=10),0!==c&&(r=parseFloat(r+"e"+c))}return{num:r,length:e-n}}function VR(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var i=r.element,s=r.index;Array.isArray(i)?i.push(n):s===t.length-2?i[t.pop()]=n:t.push(n)}}function UR(t){for(var e=[],n=[],r=0;;){var i=t[r++];if("\0"!==i)switch(i){case"1":e.push(null);break;case"2":e.push("1"===t[r]),r++;break;case"3":var s=$R(t,r);e.push(s.num),r+=s.length;break;case"4":for(var o="";;){var a=t[r];if("\0"===a)break;o+=a,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"\x01").replace(/\u0002\u0002/g,"\x02"),e.push(o);break;case"5":var c={element:[],index:e.length};e.push(c.element),n.push(c);break;case"6":var u={element:{},index:e.length};e.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===e.length)return e.pop();VR(e,n)}}}function bh(t){var n=["boolean","number","string","object"].indexOf(typeof t);return~n?null===t?1:Array.isArray(t)?5:n<3?n+2:n+3:Array.isArray(t)?5:void 0}function Ws(t,e,n){return n.every(function(r){var i=e[r],s=_h(r),o=yh(t,s);return sD(r)?function YR(t,e,n){return"$or"===t?e.some(function(r){return Ws(n,r,Object.keys(r))}):"$not"===t?!Ws(n,e,Object.keys(e)):!e.find(function(r){return Ws(n,r,Object.keys(r))})}(r,i,t):su(i,t,s,o)})}function su(t,e,n,r){return!t||("object"==typeof t?Object.keys(t).every(function(i){var s=t[i];if(0===i.indexOf("$"))return lD(i,e,s,n,r);var o=_h(i);if(void 0===r&&"object"!=typeof s&&o.length>0)return!1;var a=yh(r,o);return"object"==typeof s?su(s,e,n,a):lD("$eq",e,s,o,a)}):t===r)}function lD(t,e,n,r,i){if(!fD[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return fD[t](e,n,r,i)}function oa(t){return typeof t<"u"&&null!==t}function Ui(t){return typeof t<"u"}function dD(t,e){return e.some(function(n){return t instanceof Array?t.some(function(r){return 0===Ut(n,r)}):0===Ut(n,t)})}var fD={$elemMatch:function(t,e,n,r){return!(!Array.isArray(r)||0===r.length)&&r.some("object"==typeof r[0]&&null!==r[0]?function(i){return Ws(i,e,Object.keys(e))}:function(i){return su(e,t,n,i)})},$allMatch:function(t,e,n,r){return!(!Array.isArray(r)||0===r.length)&&r.every("object"==typeof r[0]&&null!==r[0]?function(i){return Ws(i,e,Object.keys(e))}:function(i){return su(e,t,n,i)})},$eq:function(t,e,n,r){return Ui(r)&&0===Ut(r,e)},$gte:function(t,e,n,r){return Ui(r)&&Ut(r,e)>=0},$gt:function(t,e,n,r){return Ui(r)&&Ut(r,e)>0},$lte:function(t,e,n,r){return Ui(r)&&Ut(r,e)<=0},$lt:function(t,e,n,r){return Ui(r)&&Ut(r,e)<0},$exists:function(t,e,n,r){return e?Ui(r):!Ui(r)},$mod:function(t,e,n,r){return oa(r)&&function ZR(t,e){return"number"==typeof t&&parseInt(t,10)===t&&t%e[0]===e[1]}(r,e)},$ne:function(t,e,n,r){return e.every(function(i){return 0!==Ut(r,i)})},$in:function(t,e,n,r){return oa(r)&&dD(r,e)},$nin:function(t,e,n,r){return oa(r)&&!dD(r,e)},$size:function(t,e,n,r){return oa(r)&&Array.isArray(r)&&function JR(t,e){return t.length===e}(r,e)},$all:function(t,e,n,r){return Array.isArray(r)&&function XR(t,e){return e.every(function(n){return t.some(function(r){return 0===Ut(n,r)})})}(r,e)},$regex:function(t,e,n,r){return oa(r)&&"string"==typeof r&&e.every(function(i){return function ek(t,e){return new RegExp(e).test(t)}(r,i)})},$type:function(t,e,n,r){return function tk(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}}(r,e)}};function sk(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter)return e(new Error('selector invalid for filter "'+("string"==typeof t.filter?t.filter:"function")+'"'));e()}function ok(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=j0(t.view):t.filter=j0(t.filter))}function ak(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!Ar(t.db)}function ck(t,e){var n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var r=Je(tu,"`view` filter parameter not found or invalid.");return n(r)}var i=ah(e.view);t.db.get("_design/"+i[0],function(o,a){if(t.isCancelled)return n(null,{status:"cancelled"});if(o)return n(qs(o));var c=a&&a.views&&a.views[i[1]]&&a.views[i[1]].map;if(!c)return n(Je(Jn,a.views?"missing json key: "+i[1]:"missing json key: views"));e.filter=function ik(t){return ch(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}(c),t.doChanges(e)})}else if(e.selector)e.filter=function(o){return function nk(t,e){if("object"!=typeof e)throw new Error("Selector error: expected a JSON object");var r=function QR(t,e,n){if(t=t.filter(function(o){return Ws(o.doc,e.selector,n)}),e.sort){var r=function KR(t){function e(n){return t.map(function(r){var s=_h(oD(r));return yh(n,s)})}return function(n,r){var o=Ut(e(n.doc),e(r.doc));return 0!==o?o:function AR(t,e){return t<e?-1:t>e?1:0}(n.doc._id,r.doc._id)}}(e.sort);t=t.sort(r),"string"!=typeof e.sort[0]&&"desc"===function OR(t){return t[oD(t)]}(e.sort[0])&&(t=t.reverse())}if("limit"in e||"skip"in e){var i=e.skip||0;t=t.slice(i,("limit"in e?e.limit:t.length)+i)}return t}([{doc:t}],{selector:e=LR(e)},Object.keys(e));return r&&1===r.length}(o,e.selector)},t.doChanges(e);else{var s=ah(e.filter);t.db.get("_design/"+s[0],function(o,a){if(t.isCancelled)return n(null,{status:"cancelled"});if(o)return n(qs(o));var c=a&&a.filters&&a.filters[s[1]];if(!c)return n(Je(Jn,a&&a.filters?"missing json key: "+s[1]:"missing json key: filters"));e.filter=function rk(t){return ch('"use strict";\nreturn '+t+";",{})}(c),t.doChanges(e)})}}function hD(t){return t.reduce(function(e,n){return e[n]=!0,e},{})}et.plugin(function uk(t){t._changesFilterPlugin={validate:sk,normalize:ok,shouldFilter:ak,filter:ck}}),et.version="8.0.0";var lk=hD(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),dk=hD(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function pD(t){if(!/^\d+-/.test(t))return Je(L0);var e=t.indexOf("-"),n=t.substring(0,e),r=t.substring(e+1);return{prefix:parseInt(n,10),id:r}}function gD(t,e,n){n||(n={deterministic_revs:!0});var r,i,s,o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=iu()),i=W0(t,n.deterministic_revs),t._rev){if((s=pD(t._rev)).error)return s;t._rev_tree=[{pos:s.prefix,ids:[s.id,{status:"missing"},[[i,o,[]]]]}],r=s.prefix+1}else t._rev_tree=[{pos:1,ids:[i,o,[]]}],r=1;else if(t._revisions&&(t._rev_tree=function fk(t,e){for(var n=t.start-t.ids.length+1,r=t.ids,i=[r[0],e,[]],s=1,o=r.length;s<o;s++)i=[r[s],{status:"missing"},[i]];return[{pos:n,ids:i}]}(t._revisions,o),r=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if((s=pD(t._rev)).error)return s;t._rev_tree=[{pos:r=s.prefix,ids:[i=s.id,o,[]]}]}B0(t._id),t._rev=r+"-"+i;var a={metadata:{},data:{}};for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var u="_"===c[0];if(u&&!lk[c]){var l=Je(k0,c);throw l.message=k0.message+": "+c,l}u&&!dk[c]?a.metadata[c.slice(1)]=t[c]:a.data[c]=t[c]}return a}function mk(t,e,n){if(t.stub)return n();"string"==typeof t.data?function pk(t,e,n){var r=function hk(t){try{return uh(t)}catch{return{error:Je(R0,"Attachment is not a valid base64 string")}}}(t.data);if(r.error)return n(r.error);t.length=r.length,t.data="blob"===e?dh(r,t.content_type):"base64"===e?ia(r):r,ph(r,function(i){t.digest="md5-"+i,n()})}(t,e,n):function gk(t,e,n){ph(t.data,function(r){t.digest="md5-"+r,t.length=t.data.size||t.data.length||0,"binary"===e?q0(t.data,function(i){t.data=i,n()}):"base64"===e?hh(t.data,function(i){t.data=i,n()}):n()})}(t,e,n)}function wk(t,e,n,r,i,s,o,a,c){t=t||1e3;var l=a.new_edits,d=new xn,g=0,f=e.length;function p(){++g===f&&c&&c()}e.forEach(function(v,y){if(v._id&&$i(v._id))n[v._deleted?"_removeLocal":"_putLocal"](v,{ctx:i},function(E,I){s[y]=E||I,p()});else{var b=v.metadata.id;d.has(b)?(f--,d.get(b).push([v,y])):d.set(b,[[v,y]])}}),d.forEach(function(v,y){var _=0;function b(){++_<v.length?E():p()}function E(){var I=v[_],T=I[0],P=I[1];if(r.has(y))!function yk(t,e,n,r,i,s,o,a){if(function uR(t,e){for(var o,n=t.slice(),r=e.split("-"),i=parseInt(r[0],10),s=r[1];o=n.pop();){if(o.pos===i&&o.ids[0]===s)return!0;for(var a=o.ids[2],c=0,u=a.length;c<u;c++)n.push({pos:o.pos+1,ids:a[c]})}return!1}(e.rev_tree,n.metadata.rev)&&!a)return r[i]=n,s();var c=e.winningRev||ji(e),u="deleted"in e?e.deleted:Jr(e,c),l="deleted"in n.metadata?n.metadata.deleted:Jr(n.metadata),d=/^1-/.test(n.metadata.rev);if(u&&!l&&a&&d){var g=n.data;g._rev=c,g._id=n.metadata.id,n=gD(g,a)}var f=Z0(e.rev_tree,n.metadata.rev_tree[0],t);if(a&&(u&&l&&"new_leaf"!==f.conflicts||!u&&"new_leaf"!==f.conflicts||u&&!l&&"new_branch"===f.conflicts)){var v=Je(Us);return r[i]=v,s()}var y=n.metadata.rev;n.metadata.rev_tree=f.tree,n.stemmedRevs=f.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var _=ji(n.metadata),b=Jr(n.metadata,_),E=u===b?0:u<b?-1:1;o(n,_,b,y===_?b:Jr(n.metadata,y),!0,E,i,s)}(t,r.get(y),T,s,P,b,o,l);else{var U=Z0([],T.metadata.rev_tree[0],t);T.metadata.rev_tree=U.tree,T.stemmedRevs=U.stemmedRevs||[],function u(v,y,_){var b=ji(v.metadata),E=Jr(v.metadata,b);if("was_delete"in a&&E)return s[y]=Je(Jn,"deleted"),_();var I=l&&function _k(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}(v);if(I){var T=Je(Us);return s[y]=T,_()}o(v,b,E,E,!1,E?0:1,y,_)}(T,P,b)}}E()})}var Kt="document-store",ln="by-sequence",er="attach-store",qi="attach-seq-store",Sn="meta-store",xr="local-store",Ch="detect-blob-support";function bk(t){try{return JSON.stringify(t)}catch{return I0.stringify(t)}}function Or(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(Je(sh,n))}}function Sh(t,e,n){return{data:bk(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function zi(t){if(!t)return null;var e=function Ek(t){try{return JSON.parse(t)}catch{return I0.parse(t)}}(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function ou(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function mD(t,e,n,r){n?r(t?"string"!=typeof t?t:fh(t,e):lh([""],{type:e})):t?"string"!=typeof t?U0(t,function(i){r(ia(i))}):r(t):r("")}function vD(t,e,n,r){var i=Object.keys(t._attachments||{});if(!i.length)return r&&r();var s=0;function o(){++s===i.length&&r&&r()}i.forEach(function(c){e.attachments&&e.include_docs?function a(c,u){var l=c._attachments[u],d=l.digest;n.objectStore(er).get(d).onsuccess=function(f){l.body=f.target.result.body,o()}}(t,c):(t._attachments[c].stub=!0,o())})}function Mh(t,e){return Promise.all(t.map(function(n){if(n.doc&&n.doc._attachments){var r=Object.keys(n.doc._attachments);return Promise.all(r.map(function(i){var s=n.doc._attachments[i];if("body"in s){var o=s.body,a=s.content_type;return new Promise(function(c){mD(o,a,e,function(u){n.doc._attachments[i]=Bi(ra(s,["digest","content_type"]),{data:u}),c()})})}}))}}))}function yD(t,e,n){var r=[],i=n.objectStore(ln),s=n.objectStore(er),o=n.objectStore(qi),a=t.length;function c(){--a||function u(){r.length&&r.forEach(function(l){o.index("digestSeq").count(IDBKeyRange.bound(l+"::",l+"::\uffff",!1,!1)).onsuccess=function(g){g.target.result||s.delete(l)}})}()}t.forEach(function(l){i.index("_doc_id_rev").getKey(e+"::"+l).onsuccess=function(f){var p=f.target.result;if("number"!=typeof p)return c();i.delete(p),o.index("seq").openCursor(IDBKeyRange.only(p)).onsuccess=function(y){var _=y.target.result;if(_){var b=_.value.digestSeq.split("::")[0];r.push(b),o.delete(_.primaryKey),_.continue()}else c()}}})}function mr(t,e,n){try{return{txn:t.transaction(e,n)}}catch(r){return{error:r}}}var aa=new NF;function Ck(t,e,n,r,i,s){for(var a,c,u,l,d,g,f,p,o=e.docs,v=0,y=o.length;v<y;v++){var _=o[v];_._id&&$i(_._id)||(_=o[v]=gD(_,n.new_edits,t)).error&&!f&&(f=_)}if(f)return s(f);var b=!1,E=0,I=new Array(o.length),T=new xn,P=!1;function G(){b=!0,pe()}function pe(){!p||!b||(p.docCount+=E,g.put(p))}function xe(){P||(aa.notify(r._meta.name),s(null,I))}function B(be,Oe,rt,$e,yt,C,S,O){be.metadata.winningRev=Oe,be.metadata.deleted=rt;var k=be.data;if(k._id=be.metadata.id,k._rev=be.metadata.rev,$e&&(k._deleted=!0),k._attachments&&Object.keys(k._attachments).length)return function ee(be,Oe,rt,$e,yt,C){var O=0,k=Object.keys(be.data._attachments);function ge(){O===k.length&&q(be,Oe,rt,$e,yt,C)}function Ae(){O++,ge()}k.forEach(function(st){var je=be.data._attachments[st];if(je.stub)O++,ge();else{var qe=je.data;delete je.data,je.revpos=parseInt(Oe,10),function dt(be,Oe,rt){l.count(be).onsuccess=function(yt){if(yt.target.result)return rt();l.put({digest:be,body:Oe}).onsuccess=rt}}(je.digest,qe,Ae)}})}(be,Oe,rt,yt,S,O);E+=C,pe(),q(be,Oe,rt,yt,S,O)}function q(be,Oe,rt,$e,yt,C){var S=be.data,O=be.metadata;function k(je){var qe=be.stemmedRevs||[];$e&&r.auto_compaction&&(qe=qe.concat(function nR(t){var e=[];return Hi(t.rev_tree,function(n,r,i,s,o){"available"===o.status&&!n&&(e.push(r+"-"+i),o.status="missing")}),e}(be.metadata))),qe&&qe.length&&yD(qe,be.metadata.id,a),O.seq=je.target.result;var De=Sh(O,Oe,rt);c.put(De).onsuccess=Ae}function Ae(){I[yt]={ok:!0,id:O.id,rev:O.rev},T.set(be.metadata.id,be.metadata),function Ie(be,Oe,rt){var $e=0,yt=Object.keys(be.data._attachments||{});if(!yt.length)return rt();function C(){++$e===yt.length&&rt()}function S(k){var Ae=d.put({seq:Oe,digestSeq:be.data._attachments[k].digest+"::"+Oe});Ae.onsuccess=C,Ae.onerror=function(st){st.preventDefault(),st.stopPropagation(),C()}}for(var O=0;O<yt.length;O++)S(yt[O])}(be,O.seq,C)}S._doc_id_rev=O.id+"::"+O.rev,delete S._id,delete S._rev;var st=u.put(S);st.onsuccess=k,st.onerror=function ge(je){je.preventDefault(),je.stopPropagation(),u.index("_doc_id_rev").getKey(S._doc_id_rev).onsuccess=function(He){u.put(S,He.target.result).onsuccess=k}}}!function vk(t,e,n){if(!t.length)return n();var i,r=0;function s(){r++,t.length===r&&(i?n(i):n())}t.forEach(function(o){var a=o.data&&o.data._attachments?Object.keys(o.data._attachments):[],c=0;if(!a.length)return s();function u(d){i=d,++c===a.length&&s()}for(var l in o.data._attachments)Object.prototype.hasOwnProperty.call(o.data._attachments,l)&&mk(o.data._attachments[l],e,u)})}(o,r._meta.blobSupport?"blob":"base64",function(be){if(be)return s(be);!function oe(){var Oe=mr(i,[Kt,ln,er,xr,qi,Sn],"readwrite");if(Oe.error)return s(Oe.error);(a=Oe.txn).onabort=Or(s),a.ontimeout=Or(s),a.oncomplete=xe,c=a.objectStore(Kt),u=a.objectStore(ln),l=a.objectStore(er),d=a.objectStore(qi),(g=a.objectStore(Sn)).get(Sn).onsuccess=function(rt){p=rt.target.result,pe()},function Ee(be){var Oe=[];if(o.forEach(function(C){C.data&&C.data._attachments&&Object.keys(C.data._attachments).forEach(function(S){var O=C.data._attachments[S];O.stub&&Oe.push(O.digest)})}),!Oe.length)return be();var $e,rt=0;Oe.forEach(function(C){!function Me(be,Oe){l.get(be).onsuccess=function($e){if($e.target.result)Oe();else{var yt=Je(HF,"unknown stub attachment with digest "+be);yt.status=412,Oe(yt)}}}(C,function(S){S&&!$e&&($e=S),function yt(){++rt===Oe.length&&be($e)}()})})}(function(rt){if(rt)return P=!0,s(rt);!function Re(){if(o.length)for(var be=0,$e=0,yt=o.length;$e<yt;$e++){var C=o[$e];C._id&&$i(C._id)?Oe():c.get(C.metadata.id).onsuccess=rt}function Oe(){++be===o.length&&function de(){wk(t.revs_limit,o,r,T,a,I,B,n,G)}()}function rt(O){var k=zi(O.target.result);k&&T.set(k.id,k),Oe()}}()})}()})}function _D(t,e,n,r,i){var o,a,c;function u(f){a=f.target.result,o&&i(o,a,c)}function l(f){o=f.target.result,a&&i(o,a,c)}function g(f){var p=f.target.result;if(!p)return i();i([p.key],[p.value],p)}-1===r&&(r=1e3),"function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&r>1&&!n?(c={continue:function d(){if(!o.length)return i();var p,f=o[o.length-1];if(e&&e.upper)try{p=IDBKeyRange.bound(f,e.upper,!0,e.upperOpen)}catch(v){if("DataError"===v.name&&0===v.code)return i()}else p=IDBKeyRange.lowerBound(f,!0);o=null,a=null,t.getAll(e=p,r).onsuccess=u,t.getAllKeys(e,r).onsuccess=l}},t.getAll(e,r).onsuccess=u,t.getAllKeys(e,r).onsuccess=l):n?t.openCursor(e,"prev").onsuccess=g:t.openCursor(e).onsuccess=g}var Ih=!1,Th=[];function wD(){Ih||!Th.length||(Ih=!0,Th.shift()())}var Ah,Gs=new xn,xh=new xn;function DD(t,e){var n=this;!function Pk(t,e,n){Th.push(function(){t(function(s,o){(function Ok(t,e,n,r){try{t(e,n)}catch(i){r.emit("error",i)}})(e,s,o,n),Ih=!1,Tr()(function(){wD()})})}),wD()}(function(r){!function Fk(t,e,n){var r=e.name,i=null,s=null;function o(y){return function(_,b){_&&_ instanceof Error&&!_.reason&&s&&(_.reason=s),y(_,b)}}function c(y,_){var b=y.objectStore(Kt);b.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),b.openCursor().onsuccess=function(E){var I=E.target.result;if(I){var T=I.value,P=Jr(T);T.deletedOrLocal=P?"1":"0",b.put(T),I.continue()}else _()}}function l(y,_){var b=y.objectStore(xr),E=y.objectStore(Kt),I=y.objectStore(ln);E.openCursor().onsuccess=function(P){var U=P.target.result;if(U){var oe=U.value,G=oe.id,de=$i(G),pe=ji(oe);if(de){var Re=G+"::"+pe,xe=G+"::",Me=G+"::~",Ee=I.index("_doc_id_rev"),B=IDBKeyRange.bound(xe,Me,!1,!1),q=Ee.openCursor(B);q.onsuccess=function(ee){if(q=ee.target.result){var Ie=q.value;Ie._doc_id_rev===Re&&b.put(Ie),I.delete(q.primaryKey),q.continue()}else E.delete(U.primaryKey),U.continue()}}else U.continue()}else _&&_()}}function g(y,_){var b=y.objectStore(ln),E=y.objectStore(er),I=y.objectStore(qi);E.count().onsuccess=function(P){if(!P.target.result)return _();b.openCursor().onsuccess=function(oe){var G=oe.target.result;if(!G)return _();for(var de=G.value,pe=G.primaryKey,Re=Object.keys(de._attachments||{}),xe={},Me=0;Me<Re.length;Me++)xe[de._attachments[Re[Me]].digest]=!0;var B=Object.keys(xe);for(Me=0;Me<B.length;Me++)I.put({seq:pe,digestSeq:B[Me]+"::"+pe});G.continue()}}}function f(y){var b=y.objectStore(ln),E=y.objectStore(Kt);E.openCursor().onsuccess=function(T){var P=T.target.result;if(P){var U=function _(T){return T.data?zi(T):(T.deleted="1"===T.deletedOrLocal,T)}(P.value);if(U.winningRev=U.winningRev||ji(U),U.seq)return G();!function oe(){var de=U.id+"::",pe=U.id+"::\uffff",Re=b.index("_doc_id_rev").openCursor(IDBKeyRange.bound(de,pe)),xe=0;Re.onsuccess=function(Me){var Ee=Me.target.result;if(!Ee)return U.seq=xe,G();var B=Ee.primaryKey;B>xe&&(xe=B),Ee.continue()}}()}function G(){var de=Sh(U,U.winningRev,U.deleted);E.put(de).onsuccess=function(){P.continue()}}}}t._meta=null,t._remote=!1,t.type=function(){return"idb"},t._id=O0(function(y){y(null,t._meta.instanceId)}),t._bulkDocs=function(_,b,E){Ck(e,_,b,t,i,o(E))},t._get=function(_,b,E){var I,T,P,U=b.ctx;if(!U){var oe=mr(i,[Kt,ln,er],"readonly");if(oe.error)return E(oe.error);U=oe.txn}function G(){E(P,{doc:I,metadata:T,ctx:U})}U.objectStore(Kt).get(_).onsuccess=function(de){if(!(T=zi(de.target.result)))return P=Je(Jn,"missing"),G();var pe;if(b.rev)pe=b.latest?function dR(t,e){for(var r,n=e.rev_tree.slice();r=n.pop();){var i=r.pos,s=r.ids,o=s[0],a=s[1],c=s[2],u=0===c.length,l=r.history?r.history.slice():[];if(l.push({id:o,pos:i,opts:a}),u)for(var d=0,g=l.length;d<g;d++){var f=l[d];if(f.pos+"-"+f.id===t)return i+"-"+o}for(var v=0,y=c.length;v<y;v++)n.push({pos:i+1,ids:c[v],history:l})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}(b.rev,T):b.rev;else if(pe=T.winningRev,Jr(T))return P=Je(Jn,"deleted"),G();var xe=U.objectStore(ln),Me=T.id+"::"+pe;xe.index("_doc_id_rev").get(Me).onsuccess=function(Ee){if((I=Ee.target.result)&&(I=ou(I)),!I)return P=Je(Jn,"missing"),G();G()}}},t._getAttachment=function(y,_,b,E,I){var T;if(E.ctx)T=E.ctx;else{var P=mr(i,[Kt,ln,er],"readonly");if(P.error)return I(P.error);T=P.txn}var U=b.digest,oe=b.content_type;T.objectStore(er).get(U).onsuccess=function(G){mD(G.target.result.body,oe,E.binary,function(pe){I(null,pe)})}},t._info=function(_){var b,E,I=mr(i,[Sn,ln],"readonly");if(I.error)return _(I.error);var T=I.txn;T.objectStore(Sn).get(Sn).onsuccess=function(P){E=P.target.result.docCount},T.objectStore(ln).openCursor(null,"prev").onsuccess=function(P){var U=P.target.result;b=U?U.key:0},T.oncomplete=function(){_(null,{doc_count:E,update_seq:b,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(_,b){!function Tk(t,e,n){var l,d,o="keys"in t&&t.keys,a=t.skip||0,c="number"==typeof t.limit?t.limit:-1;if(!o&&(l=function Ik(t,e,n,r,i){try{if(t&&e)return i?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return i?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return i?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(r)return IDBKeyRange.only(r)}catch(s){return{error:s}}return null}("startkey"in t&&t.startkey,"endkey"in t&&t.endkey,!1!==t.inclusive_end,"key"in t&&t.key,t.descending),(d=l&&l.error)&&("DataError"!==d.name||0!==d.code)))return n(Je(sh,d.name));var g=[Kt,ln,Sn];t.attachments&&g.push(er);var f=mr(e,g,"readonly");if(f.error)return n(f.error);var p=f.txn;p.oncomplete=function xe(){t.attachments?Mh(E,t.binary).then(Re):Re()},p.onabort=Or(n);var I,T,v=p.objectStore(Kt),y=p.objectStore(ln),_=p.objectStore(Sn),b=y.index("_doc_id_rev"),E=[];function oe(Me,Ee){var B={id:Ee.id,key:Ee.id,value:{rev:Me}};Ee.deleted?o&&(E.push(B),B.value.deleted=!0,B.doc=null):a--<=0&&(E.push(B),t.include_docs&&function U(Me,Ee,B){b.get(Me.id+"::"+B).onsuccess=function(Ie){if(Ee.doc=ou(Ie.target.result)||{},t.conflicts){var dt=mh(Me);dt.length&&(Ee.doc._conflicts=dt)}vD(Ee.doc,t,p)}}(Ee,B,Me))}function G(Me){for(var Ee=0,B=Me.length;Ee<B&&E.length!==c;Ee++){var q=Me[Ee];if(q.error&&o)E.push(q);else{var ee=zi(q);oe(ee.winningRev,ee)}}}function de(Me,Ee,B){B&&(G(Ee),E.length<c&&B.continue())}function Re(){var Me={total_rows:I,offset:t.skip,rows:E};t.update_seq&&void 0!==T&&(Me.update_seq=T),n(null,Me)}if(_.get(Sn).onsuccess=function(Me){I=Me.target.result.docCount},t.update_seq&&function P(Me,Ee){Me.openCursor(null,"prev").onsuccess=function B(q){var ee=q.target.result,Ie=void 0;return ee&&ee.key&&(Ie=ee.key),Ee({target:{result:[Ie]}})}}(y,function(Me){Me.target.result&&Me.target.result.length>0&&(T=Me.target.result[0])}),!d&&0!==c){if(o)return function Mk(t,e,n){var r=new Array(t.length),i=0;t.forEach(function(s,o){e.get(s).onsuccess=function(a){r[o]=a.target.result?a.target.result:{key:s,error:"not_found"},++i===t.length&&n(t,r,{})}})}(t.keys,v,de);if(-1===c)return function Sk(t,e,n){if("function"!=typeof t.getAll){var r=[];t.openCursor(e).onsuccess=function i(s){var o=s.target.result;o?(r.push(o.value),o.continue()):n({target:{result:r}})}}else t.getAll(e).onsuccess=n}(v,l,function pe(Me){var Ee=Me.target.result;t.descending&&(Ee=Ee.reverse()),G(Ee)});_D(v,l,t.descending,c+a,de)}}(_,i,o(b))},t._changes=function(_){return function Nk(t,e,n,r){if((t=en(t)).continuous){var i=n+":"+iu();return aa.addListener(n,i,e,t),aa.notify(n),{cancel:function(){aa.removeListener(n,i)}}}var s=t.doc_ids&&new Vs(t.doc_ids);t.since=t.since||0;var o=t.since,a="limit"in t?t.limit:-1;0===a&&(a=1);var g,f,p,v,c=[],u=0,l=oh(t),d=new xn;function _(oe,G,de,pe){return de.seq!==G?pe():de.winningRev===oe._rev?pe(de,oe):void(v.get(oe._id+"::"+de.winningRev).onsuccess=function(Me){pe(de,ou(Me.target.result))})}function E(){t.complete(null,{results:c,last_seq:o})}var T=[Kt,ln];t.attachments&&T.push(er);var P=mr(r,T,"readonly");if(P.error)return t.complete(P.error);(g=P.txn).onabort=Or(t.complete),g.oncomplete=function I(){!t.continuous&&t.attachments?Mh(c).then(E):E()},f=g.objectStore(ln),p=g.objectStore(Kt),v=f.index("_doc_id_rev"),_D(f,t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null,t.descending,a,function y(oe,G,de){if(de&&oe.length){var pe=new Array(oe.length),Re=new Array(oe.length),Ee=0;G.forEach(function(B,q){!function b(oe,G,de){if(s&&!s.has(oe._id))return de();var pe=d.get(oe._id);if(pe)return _(oe,G,pe,de);p.get(oe._id).onsuccess=function(Re){pe=zi(Re.target.result),d.set(oe._id,pe),_(oe,G,pe,de)}}(ou(B),oe[q],function(dt,be){Re[q]=dt,pe[q]=be,++Ee===oe.length&&function Me(){for(var B=[],q=0,ee=pe.length;q<ee&&u!==a;q++){var Ie=pe[q];Ie&&B.push(xe(Re[q],Ie))}Promise.all(B).then(function(be){for(var Oe=0,rt=be.length;Oe<rt;Oe++)be[Oe]&&t.onChange(be[Oe])}).catch(t.complete),u!==a&&de.continue()}()})})}function xe(B,q){var ee=t.processChange(q,B,t);o=ee.seq=B.seq;var Ie=l(ee);return"object"==typeof Ie?Promise.reject(Ie):Ie?(u++,t.return_docs&&c.push(ee),t.attachments&&t.include_docs?new Promise(function(dt){vD(q,t,g,function(){Mh([ee],t.binary).then(function(){dt(ee)})})}):Promise.resolve(ee)):Promise.resolve()}})}(_,t,r,i)},t._close=function(y){i.close(),Gs.delete(r),y()},t._getRevisionTree=function(y,_){var b=mr(i,[Kt],"readonly");if(b.error)return _(b.error);b.txn.objectStore(Kt).get(y).onsuccess=function(T){var P=zi(T.target.result);P?_(null,P.rev_tree):_(Je(Jn))}},t._doCompaction=function(y,_,b){var I=mr(i,[Kt,ln,er,qi],"readwrite");if(I.error)return b(I.error);var T=I.txn;T.objectStore(Kt).get(y).onsuccess=function(U){var oe=zi(U.target.result);Hi(oe.rev_tree,function(pe,Re,xe,Me,Ee){-1!==_.indexOf(Re+"-"+xe)&&(Ee.status="missing")}),yD(_,y,T);var G=oe.winningRev,de=oe.deleted;T.objectStore(Kt).put(Sh(oe,G,de))},T.onabort=Or(b),T.oncomplete=function(){b()}},t._getLocal=function(y,_){var b=mr(i,[xr],"readonly");if(b.error)return _(b.error);var I=b.txn.objectStore(xr).get(y);I.onerror=Or(_),I.onsuccess=function(T){var P=T.target.result;P?(delete P._doc_id_rev,_(null,P)):_(Je(Jn))}},t._putLocal=function(y,_,b){"function"==typeof _&&(b=_,_={}),delete y._revisions;var E=y._rev,I=y._id;y._rev=E?"0-"+(parseInt(E.split("-")[1],10)+1):"0-1";var P,T=_.ctx;if(!T){var U=mr(i,[xr],"readwrite");if(U.error)return b(U.error);(T=U.txn).onerror=Or(b),T.oncomplete=function(){P&&b(null,P)}}var G,oe=T.objectStore(xr);E?(G=oe.get(I)).onsuccess=function(de){var pe=de.target.result;pe&&pe._rev===E?oe.put(y).onsuccess=function(){P={ok:!0,id:y._id,rev:y._rev},_.ctx&&b(null,P)}:b(Je(Us))}:((G=oe.add(y)).onerror=function(de){b(Je(Us)),de.preventDefault(),de.stopPropagation()},G.onsuccess=function(){P={ok:!0,id:y._id,rev:y._rev},_.ctx&&b(null,P)})},t._removeLocal=function(y,_,b){"function"==typeof _&&(b=_,_={});var E=_.ctx;if(!E){var I=mr(i,[xr],"readwrite");if(I.error)return b(I.error);(E=I.txn).oncomplete=function(){T&&b(null,T)}}var T,P=y._id,U=E.objectStore(xr),oe=U.get(P);oe.onerror=Or(b),oe.onsuccess=function(G){var de=G.target.result;de&&de._rev===y._rev?(U.delete(P),T={ok:!0,id:P,rev:"0-0"},_.ctx&&b(null,T)):b(Je(Jn))}},t._destroy=function(y,_){aa.removeAllListeners(r);var b=xh.get(r);b&&b.result&&(b.result.close(),Gs.delete(r));var E=indexedDB.deleteDatabase(r);E.onsuccess=function(){xh.delete(r),eu()&&r in localStorage&&delete localStorage[r],_(null,{ok:!0})},E.onerror=Or(_)};var p=Gs.get(r);if(p)return i=p.idb,t._meta=p.global,Tr()(function(){n(null,t)});var v=indexedDB.open(r,5);xh.set(r,v),v.onupgradeneeded=function(y){var _=y.target.result;if(y.oldVersion<1)return function a(y){var _=y.createObjectStore(Kt,{keyPath:"id"});y.createObjectStore(ln,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),y.createObjectStore(er,{keyPath:"digest"}),y.createObjectStore(Sn,{keyPath:"id",autoIncrement:!1}),y.createObjectStore(Ch),_.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),y.createObjectStore(xr,{keyPath:"_id"});var b=y.createObjectStore(qi,{autoIncrement:!0});b.createIndex("seq","seq"),b.createIndex("digestSeq","digestSeq",{unique:!0})}(_);var b=y.currentTarget.transaction;y.oldVersion<3&&function u(y){y.createObjectStore(xr,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(_),y.oldVersion<4&&function d(y){var _=y.createObjectStore(qi,{autoIncrement:!0});_.createIndex("seq","seq"),_.createIndex("digestSeq","digestSeq",{unique:!0})}(_);var E=[c,l,g,f],I=y.oldVersion;!function T(){var P=E[I-1];I++,P&&P(b,T)}()},v.onsuccess=function(y){(i=y.target.result).onversionchange=function(){i.close(),Gs.delete(r)},i.onabort=function(G){Xn("error","Database has a global failure",G.target.error),s=G.target.error,i.close(),Gs.delete(r)};var E,I,T,P,_=i.transaction([Sn,Ch,Kt],"readwrite"),b=!1;function U(){typeof T>"u"||!b||(t._meta={name:r,instanceId:P,blobSupport:T},Gs.set(r,{idb:i,global:t._meta}),n(null,t))}function oe(){if(!(typeof I>"u"||typeof E>"u")){var G=r+"_id";G in E?P=E[G]:E[G]=P=iu(),E.docCount=I,_.objectStore(Sn).put(E)}}_.objectStore(Sn).get(Sn).onsuccess=function(G){E=G.target.result||{id:Sn},oe()},function xk(t,e){t.objectStore(Kt).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(r){e(r.target.result)}}(_,function(G){I=G,oe()}),Ah||(Ah=function Ak(t){return new Promise(function(e){var n=lh([""]),r=t.objectStore(Ch).put(n,"key");r.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),s=navigator.userAgent.match(/Edge\//);e(s||!i||parseInt(i[1],10)>=43)},r.onerror=t.onabort=function(i){i.preventDefault(),i.stopPropagation(),e(!1)}}).catch(function(){return!1})}(_)),Ah.then(function(G){T=G,U()}),_.oncomplete=function(){b=!0,U()},_.onabort=Or(n)},v.onerror=function(y){var _=y.target.error&&y.target.error.message;_?-1!==_.indexOf("stored database is a higher version")&&(_=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):_="Failed to open indexedDB, are you in private browsing mode?",Xn("error",_),n(Je(sh,_))}}(n,t,r)},e,n.constructor)}DD.valid=function(){try{return typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}};let Oh={};function Ph(t){let e=t.doc||t.ok,n=e&&e._attachments;n&&Object.keys(n).forEach(function(r){let i=n[r];i.data=fh(i.data,i.content_type)})}function Wi(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function ED(t){return t._attachments&&Object.keys(t._attachments)?Promise.all(Object.keys(t._attachments).map(function(e){let n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new Promise(function(r){hh(n.data,r)}).then(function(r){n.data=r})})):Promise.resolve()}function tn(t,e){return cu(t,t.db+"/"+e)}function cu(t,e){return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+(t.path?"/":"")+e}function uu(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function Nh(t,e){let n=this,r=function $k(t,e){if(function Hk(t){if(!t.prefix)return!1;let e=V0(t.prefix).protocol;return"http"===e||"https"===e}(e)){let i=e.name.substr(e.prefix.length);t=e.prefix.replace(/\/?$/,"/")+encodeURIComponent(i)}let n=V0(t);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});let r=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=r.pop(),-1===n.db.indexOf("%")&&(n.db=encodeURIComponent(n.db)),n.path=r.join("/"),n}(t.name,t),i=tn(r,"");t=en(t);const s=function(){var f=Xe(function*(p,v){if((v=v||{}).headers=v.headers||new zs,v.credentials="include",t.auth||r.auth){let b=t.auth||r.auth,I=ia(unescape(encodeURIComponent(b.username+":"+b.password)));v.headers.set("Authorization","Basic "+I)}let y=t.headers||{};return Object.keys(y).forEach(function(b){v.headers.append(b,y[b])}),function Vk(t){let e=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==e.indexOf("msie"),r=-1!==e.indexOf("trident"),i=-1!==e.indexOf("edge");return(n||r||i)&&(!("method"in t)||"GET"===t.method)}(v)&&(p+=(-1===p.indexOf("?")?"?":"&")+"_nonce="+Date.now()),yield(t.fetch||rD)(p,v)});return function(v,y){return f.apply(this,arguments)}}();function o(f,p){return Vt(f,function(...v){l().then(function(){return p.apply(this,v)}).catch(function(y){v.pop()(y)})}).bind(n)}function a(f,p){return c.apply(this,arguments)}function c(){return(c=Xe(function*(f,p){let v={};(p=p||{}).headers=p.headers||new zs,p.headers.get("Content-Type")||p.headers.set("Content-Type","application/json"),p.headers.get("Accept")||p.headers.set("Accept","application/json");const y=yield s(f,p);v.ok=y.ok,v.status=y.status;const _=yield y.json();if(v.data=_,!v.ok)throw v.data.status=v.status,qs(v.data);return Array.isArray(v.data)&&(v.data=v.data.map(function(b){return b.error||b.missing?qs(b):b})),v})).apply(this,arguments)}let u;function l(){return d.apply(this,arguments)}function d(){return(d=Xe(function*(){return t.skip_setup?Promise.resolve():u||(u=a(i).catch(function(f){return f&&f.status&&404===f.status?(th(404,"PouchDB is just detecting if the remote exists."),a(i,{method:"PUT"})):Promise.reject(f)}).catch(function(f){return!(!f||!f.status||412!==f.status)||Promise.reject(f)}),u.catch(function(){u=null}),u)})).apply(this,arguments)}function g(f){return f.split("/").map(encodeURIComponent).join("/")}Tr()(function(){e(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=o("id",function(){var f=Xe(function*(p){let v;try{v=yield(yield s(cu(r,""))).json()}catch{v={}}p(null,v&&v.uuid?v.uuid+r.db:tn(r,""))});return function(p){return f.apply(this,arguments)}}()),n.compact=o("compact",function(){var f=Xe(function*(p,v){"function"==typeof p&&(v=p,p={}),p=en(p),yield a(tn(r,"_compact"),{method:"POST"}),function y(){n.info(function(_,b){b&&!b.compact_running?v(null,{ok:!0}):setTimeout(y,p.interval||200)})}()});return function(p,v){return f.apply(this,arguments)}}()),n.bulkGet=Vt("bulkGet",function(f,p){let v=this;function y(T){return _.apply(this,arguments)}function _(){return(_=Xe(function*(T){let P={};f.revs&&(P.revs=!0),f.attachments&&(P.attachments=!0),f.latest&&(P.latest=!0);try{const U=yield a(tn(r,"_bulk_get"+uu(P)),{method:"POST",body:JSON.stringify({docs:f.docs})});f.attachments&&f.binary&&U.data.results.forEach(function(oe){oe.docs.forEach(Ph)}),T(null,U.data)}catch(U){T(U)}})).apply(this,arguments)}function b(){let P=Math.ceil(f.docs.length/50),U=0,oe=new Array(P);function G(de){return function(pe,Re){oe[de]=Re.results,++U===P&&p(null,{results:nu(oe)})}}for(let de=0;de<P;de++){let pe=ra(f,["revs","attachments","binary","latest"]);pe.docs=f.docs.slice(50*de,Math.min(f.docs.length,50*(de+1))),N0(v,pe,G(de))}}let E=cu(r,""),I=Oh[E];"boolean"!=typeof I?y(function(T,P){T?(Oh[E]=!1,th(T.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),b()):(Oh[E]=!0,p(null,P))}):I?y(p):b()}),n._info=function(){var f=Xe(function*(p){try{yield l();const y=yield(yield s(tn(r,""))).json();y.host=tn(r,""),p(null,y)}catch(v){p(v)}});return function(p){return f.apply(this,arguments)}}(),n.fetch=function(){var f=Xe(function*(p,v){yield l();const y="/"===p.substring(0,1)?cu(r,p.substring(1)):tn(r,p);return s(y,v)});return function(p,v){return f.apply(this,arguments)}}(),n.get=o("get",function(){var f=Xe(function*(p,v,y){"function"==typeof v&&(y=v,v={});let _={};function b(T){let P=T._attachments,U=P&&Object.keys(P);if(!P||!U.length)return;function G(){return(G=Xe(function*(pe){const Re=P[pe],xe=Wi(T._id)+"/"+g(pe)+"?rev="+T._rev,Me=yield s(tn(r,xe));let Ee,B;if(Ee="buffer"in Me?yield Me.buffer():yield Me.blob(),v.binary){let q=Object.getOwnPropertyDescriptor(Ee.__proto__,"type");(!q||q.set)&&(Ee.type=Re.content_type),B=Ee}else B=yield new Promise(function(q){hh(Ee,q)});delete Re.stub,delete Re.length,Re.data=B})).apply(this,arguments)}let de=U.map(function(pe){return function(){return function oe(pe){return G.apply(this,arguments)}(pe)}});return function kk(t,e){return new Promise(function(n,r){var c,i=0,s=0,o=0,a=t.length;function l(){++o===a?c?r(c):n():f()}function d(){i--,l()}function g(p){i--,c=c||p,l()}function f(){for(;i<e&&s<a;)i++,t[s++]().then(d,g)}f()})}(de,5)}(v=en(v)).revs&&(_.revs=!0),v.revs_info&&(_.revs_info=!0),v.latest&&(_.latest=!0),v.open_revs&&("all"!==v.open_revs&&(v.open_revs=JSON.stringify(v.open_revs)),_.open_revs=v.open_revs),v.rev&&(_.rev=v.rev),v.conflicts&&(_.conflicts=v.conflicts),v.update_seq&&(_.update_seq=v.update_seq),p=Wi(p);const I=tn(r,p+uu(_));try{const T=yield a(I);v.attachments&&(yield function E(T){return Array.isArray(T)?Promise.all(T.map(function(P){if(P.ok)return b(P.ok)})):b(T)}(T.data)),y(null,T.data)}catch(T){T.docId=p,y(T)}});return function(p,v,y){return f.apply(this,arguments)}}()),n.remove=o("remove",function(){var f=Xe(function*(p,v,y,_){let b;"string"==typeof v?(b={_id:p,_rev:v},"function"==typeof y&&(_=y,y={})):(b=p,"function"==typeof v?(_=v,y={}):(_=y,y=v));const E=b._rev||y.rev,I=tn(r,Wi(b._id))+"?rev="+E;try{_(null,(yield a(I,{method:"DELETE"})).data)}catch(T){_(T)}});return function(p,v,y,_){return f.apply(this,arguments)}}()),n.getAttachment=o("getAttachment",function(){var f=Xe(function*(p,v,y,_){"function"==typeof y&&(_=y,y={});const b=y.rev?"?rev="+y.rev:"",E=tn(r,Wi(p))+"/"+g(v)+b;let I;try{const P=yield s(E,{method:"GET"});if(!P.ok)throw P;let U;if(I=P.headers.get("content-type"),U=typeof process<"u"&&!process.browser&&"function"==typeof P.buffer?yield P.buffer():yield P.blob(),typeof process<"u"&&!process.browser){var T=Object.getOwnPropertyDescriptor(U.__proto__,"type");(!T||T.set)&&(U.type=I)}_(null,U)}catch(P){_(P)}});return function(p,v,y,_){return f.apply(this,arguments)}}()),n.removeAttachment=o("removeAttachment",function(){var f=Xe(function*(p,v,y,_){const b=tn(r,Wi(p)+"/"+g(v))+"?rev="+y;try{_(null,(yield a(b,{method:"DELETE"})).data)}catch(E){_(E)}});return function(p,v,y,_){return f.apply(this,arguments)}}()),n.putAttachment=o("putAttachment",function(){var f=Xe(function*(p,v,y,_,b,E){"function"==typeof b&&(E=b,b=_,_=y,y=null);const I=Wi(p)+"/"+g(v);let T=tn(r,I);if(y&&(T+="?rev="+y),"string"==typeof _){let P;try{P=uh(_)}catch{return E(Je(R0,"Attachment is not a valid base64 string"))}_=P?dh(P,b):""}try{E(null,(yield a(T,{headers:new zs({"Content-Type":b}),method:"PUT",body:_})).data)}catch(P){E(P)}});return function(p,v,y,_,b,E){return f.apply(this,arguments)}}()),n._bulkDocs=function(){var f=Xe(function*(p,v,y){p.new_edits=v.new_edits;try{yield l(),yield Promise.all(p.docs.map(ED)),y(null,(yield a(tn(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(p)})).data)}catch(_){y(_)}});return function(p,v,y){return f.apply(this,arguments)}}(),n._put=function(){var f=Xe(function*(p,v,y){try{yield l(),yield ED(p),y(null,(yield a(tn(r,Wi(p._id)),{method:"PUT",body:JSON.stringify(p)})).data)}catch(_){_.docId=p&&p._id,y(_)}});return function(p,v,y){return f.apply(this,arguments)}}(),n.allDocs=o("allDocs",function(){var f=Xe(function*(p,v){"function"==typeof p&&(v=p,p={});let _,y={},b="GET";(p=en(p)).conflicts&&(y.conflicts=!0),p.update_seq&&(y.update_seq=!0),p.descending&&(y.descending=!0),p.include_docs&&(y.include_docs=!0),p.attachments&&(y.attachments=!0),p.key&&(y.key=JSON.stringify(p.key)),p.start_key&&(p.startkey=p.start_key),p.startkey&&(y.startkey=JSON.stringify(p.startkey)),p.end_key&&(p.endkey=p.end_key),p.endkey&&(y.endkey=JSON.stringify(p.endkey)),typeof p.inclusive_end<"u"&&(y.inclusive_end=!!p.inclusive_end),typeof p.limit<"u"&&(y.limit=p.limit),typeof p.skip<"u"&&(y.skip=p.skip);let E=uu(y);typeof p.keys<"u"&&(b="POST",_={keys:p.keys});try{const I=yield a(tn(r,"_all_docs"+E),{method:b,body:JSON.stringify(_)});p.include_docs&&p.attachments&&p.binary&&I.data.rows.forEach(Ph),v(null,I.data)}catch(I){v(I)}});return function(p,v){return f.apply(this,arguments)}}()),n._changes=function(f){let p="batch_size"in f?f.batch_size:25;(f=en(f)).continuous&&!("heartbeat"in f)&&(f.heartbeat=1e4);let v="timeout"in f?f.timeout:3e4;"timeout"in f&&f.timeout&&v-f.timeout<5e3&&(v=f.timeout+5e3),"heartbeat"in f&&f.heartbeat&&v-f.heartbeat<5e3&&(v=f.heartbeat+5e3);let y={};"timeout"in f&&f.timeout&&(y.timeout=f.timeout);let _=typeof f.limit<"u"&&f.limit,b=_;if(f.style&&(y.style=f.style),(f.include_docs||f.filter&&"function"==typeof f.filter)&&(y.include_docs=!0),f.attachments&&(y.attachments=!0),f.continuous&&(y.feed="longpoll"),f.seq_interval&&(y.seq_interval=f.seq_interval),f.conflicts&&(y.conflicts=!0),f.descending&&(y.descending=!0),f.update_seq&&(y.update_seq=!0),"heartbeat"in f&&f.heartbeat&&(y.heartbeat=f.heartbeat),f.filter&&"string"==typeof f.filter&&(y.filter=f.filter),f.view&&"string"==typeof f.view&&(y.filter="_view",y.view=f.view),f.query_params&&"object"==typeof f.query_params)for(let de in f.query_params)Object.prototype.hasOwnProperty.call(f.query_params,de)&&(y[de]=f.query_params[de]);let I,E="GET";f.doc_ids?(y.filter="_doc_ids",E="POST",I={doc_ids:f.doc_ids}):f.selector&&(y.filter="_selector",E="POST",I={selector:f.selector});let P,T=new SR;const U=function(){var de=Xe(function*(pe,Re){if(f.aborted)return;y.since=pe,"object"==typeof y.since&&(y.since=JSON.stringify(y.since)),f.descending?_&&(y.limit=b):y.limit=!_||b>p?p:b;let xe=tn(r,"_changes"+uu(y)),Me={signal:T.signal,method:E,body:JSON.stringify(I)};if(P=pe,!f.aborted)try{yield l(),Re(null,(yield a(xe,Me)).data)}catch(Ee){Re(Ee)}});return function(Re,xe){return de.apply(this,arguments)}}();let oe={results:[]};const G=function(de,pe){if(f.aborted)return;let Re=0;if(pe&&pe.results){Re=pe.results.length,oe.last_seq=pe.last_seq;let Me=null,Ee=null;"number"==typeof pe.pending&&(Me=pe.pending),("string"==typeof oe.last_seq||"number"==typeof oe.last_seq)&&(Ee=oe.last_seq),pe.results=pe.results.filter(function(q){b--;let ee=oh(f)(q);return ee&&(f.include_docs&&f.attachments&&f.binary&&Ph(q),f.return_docs&&oe.results.push(q),f.onChange(q,Me,Ee)),ee})}else if(de)return f.aborted=!0,void f.complete(de);pe&&pe.last_seq&&(P=pe.last_seq),(!f.continuous||_&&b<=0)&&(_&&b<=0||pe&&Re<p||f.descending)?f.complete(null,oe):Tr()(function(){U(P,G)})};return U(f.since||0,G),{cancel:function(){f.aborted=!0,T.abort()}}},n.revsDiff=o("revsDiff",function(){var f=Xe(function*(p,v,y){"function"==typeof v&&(y=v,v={});try{y(null,(yield a(tn(r,"_revs_diff"),{method:"POST",body:JSON.stringify(p)})).data)}catch(_){y(_)}});return function(p,v,y){return f.apply(this,arguments)}}()),n._close=function(f){f()},n._destroy=function(){var f=Xe(function*(p,v){try{v(null,yield a(tn(r,""),{method:"DELETE"}))}catch(y){404===y.status?v(null,{ok:!0}):v(y)}});return function(p,v){return f.apply(this,arguments)}}()}Nh.valid=function(){return!0};class Gi extends Error{constructor(e){super(),this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Gi)}catch{}}}class lu extends Error{constructor(e){super(),this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,lu)}catch{}}}class du extends Error{constructor(e){super(),this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,du)}catch{}}}function bD(t,e){return e&&t.then(function(n){Tr()(function(){e(null,n)})},function(n){Tr()(function(){e(n)})}),t}function zk(t,e){return t.then(function(n){return e().then(function(){return n})},function(n){return e().then(function(){throw n})})}function Fh(t,e){return function(){var n=arguments,r=this;return t.add(function(){return e.apply(r,n)})}}function CD(t){var e=new Vs(t),n=new Array(e.size),r=-1;return e.forEach(function(i){n[++r]=i}),n}function Rh(t){var e=new Array(t.size),n=-1;return t.forEach(function(r,i){e[++n]=i}),e}function SD(t){return new du("builtin "+t+" function requires map values to be numbers or number arrays")}function kh(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];if("number"!=typeof i){if(!Array.isArray(i))throw SD("_sum");e="number"==typeof e?[e]:e;for(var s=0,o=i.length;s<o;s++){var a=i[s];if("number"!=typeof a)throw SD("_sum");typeof e[s]>"u"?e.push(a):e[s]+=a}}else"number"==typeof e?e+=i:e[0]+=i}return e}var Wk=Xn.bind(null,"log"),Gk=Array.isArray,Kk=JSON.parse;function MD(t,e){return ch("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:kh,log:Wk,isArray:Gk,toJSON:Kk})}class Lh{constructor(){this.promise=new Promise(function(e){e()})}add(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise}finish(){return this.promise}}function ID(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function Qk(t,e){return ID(t)+ID(e)+"undefined"}function TD(t,e,n,r,i,s){return Bh.apply(this,arguments)}function Bh(){return Bh=Xe(function*(t,e,n,r,i,s){const o=Qk(n,r);let a;if(!i&&(a=t._cachedViews=t._cachedViews||{},a[o]))return a[o];const c=t.info().then(function(){var u=Xe(function*(l){const d=l.db_name+"-mrview-"+(i?"temp":z0(o));yield ru(t,"_local/"+s,function g(_){_.views=_.views||{};let b=e;-1===b.indexOf("/")&&(b=e+"/"+e);const E=_.views[b]=_.views[b]||{};if(!E[d])return E[d]=!0,_});const p=(yield t.registerDependentDatabase(d)).db;p.auto_compaction=!0;const v={name:d,db:p,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:r};let y;try{y=yield v.db.get("_local/lastSeq")}catch(_){if(404!==_.status)throw _}return v.seq=y?y.seq:0,a&&v.db.once("destroyed",function(){delete a[o]}),v});return function(l){return u.apply(this,arguments)}}());return a&&(a[o]=c),c}),Bh.apply(this,arguments)}var AD={},xD=new Lh;function jh(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function Zk(t){return 1===t.length&&/^1-/.test(t[0].rev)}function OD(t,e,n){try{t.emit("error",e)}catch{Xn("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),Xn("error",e,n)}}var Hh__sum=function(t,e){return kh(e)},Hh__count=function(t,e){return e.length},Hh__stats=function(t,e){return{sum:kh(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function n(r){for(var i=0,s=0,o=r.length;s<o;s++){var a=r[s];i+=a*a}return i}(e)}},PD=function Xk(t,e,n,r){function i(C,S,O){try{S(O)}catch(k){OD(C,k,{fun:S,doc:O})}}function s(C,S,O,k,ge){try{return{output:S(O,k,ge)}}catch(Ae){return OD(C,Ae,{fun:S,keys:O,values:k,rereduce:ge}),{error:Ae}}}function o(C,S){const O=Ut(C.key,S.key);return 0!==O?O:Ut(C.value,S.value)}function a(C,S,O){return O=O||0,"number"==typeof S?C.slice(O,S+O):O>0?C.slice(O):C}function c(C){const S=C.value;return S&&"object"==typeof S&&S._id||C.id}function l(C){return function(S){return C.include_docs&&C.attachments&&C.binary&&function u(C){C.rows.forEach(function(S){const O=S.doc&&S.doc._attachments;O&&Object.keys(O).forEach(function(k){const ge=O[k];O[k].data=fh(ge.data,ge.content_type)})})}(S),S}}function d(C,S,O,k){let ge=S[C];typeof ge<"u"&&(k&&(ge=encodeURIComponent(JSON.stringify(ge))),O.push(C+"="+ge))}function g(C){if(typeof C<"u"){const S=Number(C);return isNaN(S)||S!==parseInt(C,10)?C:S}}function v(C,S){const O=C.descending?"endkey":"startkey",k=C.descending?"startkey":"endkey";if(typeof C[O]<"u"&&typeof C[k]<"u"&&Ut(C[O],C[k])>0)throw new Gi("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(S.reduce&&!1!==C.reduce){if(C.include_docs)throw new Gi("{include_docs:true} is invalid for reduce");if(C.keys&&C.keys.length>1&&!C.group&&!C.group_level)throw new Gi("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(ge){const Ae=function p(C){if(C){if("number"!=typeof C)return new Gi(`Invalid value for integer: "${C}"`);if(C<0)return new Gi(`Invalid value for positive integer: "${C}"`)}}(C[ge]);if(Ae)throw Ae})}function y(C,S,O){return _.apply(this,arguments)}function _(){return(_=Xe(function*(C,S,O){let ge,st,k=[],Ae="GET";if(d("reduce",O,k),d("include_docs",O,k),d("attachments",O,k),d("limit",O,k),d("descending",O,k),d("group",O,k),d("group_level",O,k),d("skip",O,k),d("stale",O,k),d("conflicts",O,k),d("startkey",O,k,!0),d("start_key",O,k,!0),d("endkey",O,k,!0),d("end_key",O,k,!0),d("inclusive_end",O,k),d("key",O,k,!0),d("update_seq",O,k),k=k.join("&"),k=""===k?"":"?"+k,typeof O.keys<"u"){const He=`keys=${encodeURIComponent(JSON.stringify(O.keys))}`;He.length+k.length+1<=2e3?k+=("?"===k[0]?"&":"?")+He:(Ae="POST","string"==typeof S?ge={keys:O.keys}:S.keys=O.keys)}if("string"==typeof S){const De=jh(S),He=yield C.fetch("_design/"+De[0]+"/_view/"+De[1]+k,{headers:new zs({"Content-Type":"application/json"}),method:Ae,body:JSON.stringify(ge)});st=He.ok;const ct=yield He.json();if(!st)throw ct.status=He.status,qs(ct);return ct.rows.forEach(function(Dt){if(Dt.value&&Dt.value.error&&"builtin_reduce_error"===Dt.value.error)throw new Error(Dt.reason)}),new Promise(function(Dt){Dt(ct)}).then(l(O))}ge=ge||{},Object.keys(S).forEach(function(De){ge[De]=Array.isArray(S[De])?S[De]:S[De].toString()});const je=yield C.fetch("_temp_view"+k,{headers:new zs({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(ge)});st=je.ok;const qe=yield je.json();if(!st)throw qe.status=je.status,qs(qe);return new Promise(function(De){De(qe)}).then(l(O))})).apply(this,arguments)}function b(C,S,O){return new Promise(function(k,ge){C._query(S,O,function(Ae,st){if(Ae)return ge(Ae);k(st)})})}function I(C){return function(S){if(404===S.status)return C;throw S}}function P(){return(P=Xe(function*(C,S,O){const k="_local/doc_"+C,ge={_id:k,keys:[]},Ae=O.get(C),st=Ae[0],je=Ae[1],ct=yield function qe(){return Zk(je)?Promise.resolve(ge):S.db.get(k).catch(I(ge))}();return function He(St,Ot){const _i=[],es=new Vs;for(let ri=0,pt=Ot.rows.length;ri<pt;ri++){const _t=Ot.rows[ri].doc;if(_t&&(_i.push(_t),es.add(_t._id),_t._deleted=!st.has(_t._id),!_t._deleted)){const On=st.get(_t._id);"value"in On&&(_t.value=On.value)}}const Bu=Rh(st);return Bu.forEach(function(ri){if(!es.has(ri)){const pt={_id:ri},Mt=st.get(ri);"value"in Mt&&(pt.value=Mt.value),_i.push(pt)}}),St.keys=CD(Bu.concat(St.keys)),_i.push(St),_i}(ct,yield function De(St){return St.keys.length?S.db.allDocs({keys:St.keys,include_docs:!0}):Promise.resolve({rows:[]})}(ct))})).apply(this,arguments)}function oe(C,S,O){var k="_local/lastSeq";return C.db.get(k).catch(I({_id:k,seq:0})).then(function(ge){var Ae=Rh(S);return Promise.all(Ae.map(function(st){return function T(C,S,O){return P.apply(this,arguments)}(st,C,S)})).then(function(st){var je=nu(st);return ge.seq=O,je.push(ge),C.db.bulkDocs({docs:je})}).then(()=>function U(C){return C.sourceDB.get("_local/purges").then(function(S){const O=S.purgeSeq;return C.db.get("_local/purgeSeq").then(function(k){return k._rev}).catch(function(k){if(404!==k.status)throw k}).then(function(k){return C.db.put({_id:"_local/purgeSeq",_rev:k,purgeSeq:O})})}).catch(function(S){if(404!==S.status)throw S})}(C))})}function G(C){const S="string"==typeof C?C:C.name;let O=AD[S];return O||(O=AD[S]=new Lh),O}function de(C,S){return pe.apply(this,arguments)}function pe(){return(pe=Xe(function*(C,S){return Fh(G(C),function(){return Re(C,S)})()})).apply(this,arguments)}function Re(C,S){return xe.apply(this,arguments)}function xe(){return xe=Xe(function*(C,S){let O,k,ge;const st=e(C.mapFun,function Ae(pt,Mt){const _t={id:k._id,key:Vi(pt)};typeof Mt<"u"&&null!==Mt&&(_t.value=Vi(Mt)),O.push(_t)});let je=C.seq||0,He=0;C.sourceDB.emit("indexing",{view:C.name,indexed_docs:He});const Dt=new Lh;function St(){return Ot.apply(this,arguments)}function Ot(){return(Ot=Xe(function*(){return es(yield C.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:je,limit:S.changes_batch_size}),yield _i())})).apply(this,arguments)}function _i(){return C.db.get("_local/purgeSeq").then(function(pt){return pt.purgeSeq}).catch(function(pt){if(pt&&404!==pt.status)throw pt;return-1}).then(function(pt){return C.sourceDB.get("_local/purges").then(function(Mt){const _t=Mt.purges.filter(function(nn,Rt){return Rt>pt}).map(nn=>nn.docId),On=_t.filter(function(nn,Rt){return _t.indexOf(nn)===Rt});return Promise.all(On.map(function(nn){return C.sourceDB.get(nn).then(function(Rt){return{docId:nn,doc:Rt}}).catch(function(Rt){if(404!==Rt.status)throw Rt;return{docId:nn}})}))}).catch(function(Mt){if(Mt&&404!==Mt.status)throw Mt;return[]})})}function es(pt,Mt){var _t=pt.results;if(_t.length||Mt.length){for(let Rt of Mt)if(_t.findIndex(function(Ea){return Ea.id===Rt.docId})<0){const Ea={_id:Rt.docId,doc:{_id:Rt.docId,_deleted:1},changes:[]};Rt.doc&&(Ea.doc=Rt.doc,Ea.changes.push({rev:Rt.doc._rev})),_t.push(Ea)}var On=function Bu(pt){const Mt=new xn;for(let _t=0,On=pt.length;_t<On;_t++){const nn=pt[_t];if("_"!==nn.doc._id[0]){O=[],k=nn.doc,k._deleted||i(C.sourceDB,st,k),O.sort(o);const Rt=ri(O);Mt.set(nn.doc._id,[Rt,nn.changes])}je=nn.seq}return Mt}(_t);return Dt.add(function De(pt,Mt){return function(){return oe(C,pt,Mt)}}(On,je)),He+=_t.length,C.sourceDB.emit("indexing",{view:C.name,last_seq:pt.last_seq,results_count:_t.length,indexed_docs:He}),C.sourceDB.activeTasks.update(ge,{completed_items:He}),_t.length<S.changes_batch_size?void 0:St()}}function ri(pt){const Mt=new xn;let _t;for(let On=0,nn=pt.length;On<nn;On++){const Rt=pt[On],Cp=[Rt.key,Rt.id];On>0&&0===Ut(Rt.key,_t)&&Cp.push(On),Mt.set(gr(Cp),Rt),_t=Rt.key}return Mt}try{yield function qe(){return C.sourceDB.info().then(function(pt){ge=C.sourceDB.activeTasks.add({name:"view_indexing",total_items:pt.update_seq-je})})}(),yield St(),yield Dt.finish(),C.seq=je,C.sourceDB.activeTasks.remove(ge)}catch(pt){C.sourceDB.activeTasks.remove(ge,pt)}}),xe.apply(this,arguments)}function Me(C,S,O){0===O.group_level&&delete O.group_level;const k=O.group||O.group_level,ge=n(C.reduceFun),Ae=[],st=isNaN(O.group_level)?Number.POSITIVE_INFINITY:O.group_level;S.forEach(function(je){const qe=Ae[Ae.length-1];let De=k?je.key:null;if(k&&Array.isArray(De)&&(De=De.slice(0,st)),qe&&0===Ut(qe.groupKey,De))return qe.keys.push([je.key,je.id]),void qe.values.push(je.value);Ae.push({keys:[[je.key,je.id]],values:[je.value],groupKey:De})}),S=[];for(let je=0,qe=Ae.length;je<qe;je++){const De=Ae[je],He=s(C.sourceDB,ge,De.keys,De.values,!1);if(He.error&&He.error instanceof du)throw He.error;S.push({value:He.error?null:He.output,key:De.groupKey})}return{rows:a(S,O.limit,O.skip)}}function Ee(C,S){return Fh(G(C),function(){return function B(C,S){return q.apply(this,arguments)}(C,S)})()}function q(){return q=Xe(function*(C,S){let O;const k=C.reduceFun&&!1!==S.reduce,ge=S.skip||0;function Ae(De){return st.apply(this,arguments)}function st(){return(st=Xe(function*(De){De.include_docs=!0;const He=yield C.db.allDocs(De);return O=He.total_rows,He.rows.map(function(ct){if("value"in ct.doc&&"object"==typeof ct.doc.value&&null!==ct.doc.value){const St=Object.keys(ct.doc.value).sort(),Ot=["id","key","value"];if(!(St<Ot||St>Ot))return ct.doc.value}const Dt=UR(ct.doc._id);return{key:Dt[0],id:Dt[1],value:"value"in ct.doc?ct.doc.value:null}})})).apply(this,arguments)}function je(De){return qe.apply(this,arguments)}function qe(){return(qe=Xe(function*(De){let He;if(He=k?Me(C,De,S):typeof S.keys>"u"?{total_rows:O,offset:ge,rows:De}:{total_rows:O,offset:ge,rows:a(De,S.limit,S.skip)},S.update_seq&&(He.update_seq=C.seq),S.include_docs){const Dt=CD(De.map(c)),St=yield C.sourceDB.allDocs({keys:Dt,include_docs:!0,conflicts:S.conflicts,attachments:S.attachments,binary:S.binary});var ct=new xn;return St.rows.forEach(function(Ot){ct.set(Ot.id,Ot.doc)}),De.forEach(function(Ot){var _i=c(Ot),es=ct.get(_i);es&&(Ot.doc=es)}),He}return He})).apply(this,arguments)}if(typeof S.keys<"u"&&!S.keys.length&&(S.limit=0,delete S.keys),typeof S.keys<"u"){const He=S.keys.map(function(St){const Ot={startkey:gr([St]),endkey:gr([St,{}])};return S.update_seq&&(Ot.update_seq=!0),Ae(Ot)});return je(nu(yield Promise.all(He)))}{const De={descending:S.descending};let He,ct;if(S.update_seq&&(De.update_seq=!0),"start_key"in S&&(He=S.start_key),"startkey"in S&&(He=S.startkey),"end_key"in S&&(ct=S.end_key),"endkey"in S&&(ct=S.endkey),typeof He<"u"&&(De.startkey=gr(S.descending?[He,{}]:[He])),typeof ct<"u"){let St=!1!==S.inclusive_end;S.descending&&(St=!St),De.endkey=gr(St?[ct,{}]:[ct])}if(typeof S.key<"u"){const St=gr([S.key]),Ot=gr([S.key,{}]);De.descending?(De.endkey=St,De.startkey=Ot):(De.startkey=St,De.endkey=Ot)}return k||("number"==typeof S.limit&&(De.limit=S.limit),De.skip=ge),je(yield Ae(De))}}),q.apply(this,arguments)}function Ie(){return(Ie=Xe(function*(C){return(yield C.fetch("_view_cleanup",{headers:new zs({"Content-Type":"application/json"}),method:"POST"})).json()})).apply(this,arguments)}function be(){return(be=Xe(function*(C){try{const S=yield C.get("_local/"+t),O=new xn;Object.keys(S.views).forEach(function(qe){const De=jh(qe),He="_design/"+De[0],ct=De[1];let Dt=O.get(He);Dt||(Dt=new Vs,O.set(He,Dt)),Dt.add(ct)});const k={keys:Rh(O),include_docs:!0},ge=yield C.allDocs(k),Ae={};ge.rows.forEach(function(qe){const De=qe.key.substring(8);O.get(qe.key).forEach(function(He){let ct=De+"/"+He;S.views[ct]||(ct=He);const Dt=Object.keys(S.views[ct]),St=qe.doc&&qe.doc.views&&qe.doc.views[He];Dt.forEach(function(Ot){Ae[Ot]=Ae[Ot]||St})})});const je=Object.keys(Ae).filter(function(qe){return!Ae[qe]}).map(function(qe){return Fh(G(qe),function(){return new C.constructor(qe,C.__opts).destroy()})()});return Promise.all(je).then(function(){return{ok:!0}})}catch(S){if(404===S.status)return{ok:!0};throw S}})).apply(this,arguments)}function rt(){return(rt=Xe(function*(C,S,O){if("function"==typeof C._query)return b(C,S,O);if(Ar(C))return y(C,S,O);const k={changes_batch_size:C.__opts.view_update_changes_batch_size||50};if("string"!=typeof S)return v(O,S),xD.add(Xe(function*(){const ge=yield TD(C,"temp_view/temp_view",S.map,S.reduce,!0,t);return zk(de(ge,k).then(function(){return Ee(ge,O)}),function(){return ge.db.destroy()})})),xD.finish();{const ge=S,Ae=jh(ge),st=Ae[0],je=Ae[1],qe=yield C.get("_design/"+st);if(!(S=qe.views&&qe.views[je]))throw new lu(`ddoc ${qe._id} has no view named ${je}`);r(qe,je),v(O,S);const De=yield TD(C,ge,S.map,S.reduce,!1,t);return"ok"===O.stale||"update_after"===O.stale?("update_after"===O.stale&&Tr()(function(){de(De,k)}),Ee(De,O)):(yield de(De,k),Ee(De,O))}})).apply(this,arguments)}return{query:function $e(C,S,O){const k=this;"function"==typeof S&&(O=S,S={}),S=S?function f(C){return C.group_level=g(C.group_level),C.limit=g(C.limit),C.skip=g(C.skip),C}(S):{},"function"==typeof C&&(C={map:C});const ge=Promise.resolve().then(function(){return function Oe(C,S,O){return rt.apply(this,arguments)}(k,C,S)});return bD(ge,O),ge},viewCleanup:function qk(t){return function(...e){var n=e.pop(),r=t.apply(this,e);return"function"==typeof n&&bD(r,n),r}}(function(){const C=this;return"function"==typeof C._viewCleanup?function E(C){return new Promise(function(S,O){C._viewCleanup(function(k,ge){if(k)return O(k);S(ge)})})}(C):Ar(C)?function ee(C){return Ie.apply(this,arguments)}(C):function dt(C){return be.apply(this,arguments)}(C)})}}("mrviews",function eL(t,e){if("function"==typeof t&&2===t.length){var n=t;return function(r){return n(r,e)}}return MD(t.toString(),e)},function tL(t){var e=t.toString();return function Jk(t){if(/^_sum/.test(t))return Hh__sum;if(/^_count/.test(t))return Hh__count;if(/^_stats/.test(t))return Hh__stats;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}(e)||MD(e)},function nL(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new lu("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}),oL={query:function iL(t,e,n){return PD.query.call(this,t,e,n)},viewCleanup:function sL(t){return PD.viewCleanup.call(this,t)}};function ND(t,e){var n=Object.keys(e._attachments);return Promise.all(n.map(function(r){return t.getAttachment(e._id,r,{rev:e._rev})}))}var RD="pouchdb";function $h(t,e,n,r,i){return t.get(e).catch(function(s){if(404===s.status)return("http"===t.adapter||"https"===t.adapter)&&th(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:RD,version:1};throw s}).then(function(s){if(!i.cancelled&&s.last_seq!==n)return s.history=(s.history||[]).filter(function(o){return o.session_id!==r}),s.history.unshift({last_seq:n,session_id:r}),s.history=s.history.slice(0,5),s.version=1,s.replicator=RD,s.session_id=r,s.last_seq=n,t.put(s).catch(function(o){if(409===o.status)return $h(t,e,n,r,i);throw o})})}class kD{constructor(e,n,r,i,s){this.src=e,this.target=n,this.id=r,this.returnValue=i,this.opts=s||{}}writeCheckpoint(e,n){var r=this;return this.updateTarget(e,n).then(function(){return r.updateSource(e,n)})}updateTarget(e,n){return this.opts.writeTargetCheckpoint?$h(this.target,this.id,e,n,this.returnValue):Promise.resolve(!0)}updateSource(e,n){if(this.opts.writeSourceCheckpoint){var r=this;return $h(this.src,this.id,e,n,this.returnValue).catch(function(i){if(jD(i))return r.opts.writeSourceCheckpoint=!1,!0;throw i})}return Promise.resolve(!0)}getCheckpoint(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(n){return n.last_seq||0}).catch(function(n){if(404!==n.status)throw n;return 0}):e.target.get(e.id).then(function(n){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?n.last_seq||0:e.src.get(e.id).then(function(r){return n.version!==r.version?0:(i=n.version?n.version.toString():"undefined")in LD?LD[i](n,r):0;var i},function(r){if(404===r.status&&n.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(i){return jD(i)?(e.opts.writeSourceCheckpoint=!1,n.last_seq):0});throw r})}).catch(function(n){if(404!==n.status)throw n;return 0})}}var LD={undefined:function(t,e){return 0===Ut(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return function fL(t,e){return t.session_id===e.session_id?{last_seq:t.last_seq,history:t.history}:BD(t.history,e.history)}(e,t).last_seq}};function BD(t,e){var n=t[0],r=t.slice(1),i=e[0],s=e.slice(1);return n&&0!==e.length?Vh(n.session_id,e)?{last_seq:n.last_seq,history:t}:Vh(i.session_id,r)?{last_seq:i.last_seq,history:s}:BD(r,s):{last_seq:0,history:[]}}function Vh(t,e){var n=e[0],r=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||Vh(t,r))}function jD(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}function HD(t,e,n,r,i){return this instanceof kD?HD:new kD(t,e,n,r,i)}function VD(t,e,n,r,i){var o,T,oe,s=[],a={seq:0,changes:[],docs:[]},c=!1,u=!1,l=!1,d=0,g=0,f=n.continuous||n.live||!1,p=n.batch_size||100,v=n.batches_limit||10,y=n.style||"all_docs",_=!1,b=n.doc_ids,E=n.selector,P=[],U=iu();i=i||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var G={};function de(){return T?Promise.resolve():function gL(t,e,n){var r=n.doc_ids?n.doc_ids.sort(Ut):"",i=n.filter?n.filter.toString():"",s="",o="",a="";return n.selector&&(a=JSON.stringify(n.selector)),n.filter&&n.query_params&&(s=JSON.stringify(function pL(t){return Object.keys(t).sort(Ut).reduce(function(e,n){return e[n]=t[n],e},{})}(n.query_params))),n.filter&&"_view"===n.filter&&(o=n.view.toString()),Promise.all([t.id(),e.id()]).then(function(c){var u=c[0]+c[1]+i+o+s+r+a;return new Promise(function(l){ph(u,l)})}).then(function(c){return"_local/"+c.replace(/\//g,".").replace(/\+/g,"_")})}(t,e,n).then(function(C){T=new HD(t,e,C,r,!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function pe(){if(P=[],0!==o.docs.length){var C=o.docs;return e.bulkDocs({docs:C,new_edits:!1},{timeout:n.timeout}).then(function(O){if(r.cancelled)throw ee(),new Error("cancelled");var k=Object.create(null);O.forEach(function(Ae){Ae.error&&(k[Ae.id]=Ae)});var ge=Object.keys(k).length;i.doc_write_failures+=ge,i.docs_written+=C.length-ge,C.forEach(function(Ae){var st=k[Ae._id];if(st){i.errors.push(st);var je=(st.name||"").toLowerCase();if("unauthorized"!==je&&"forbidden"!==je)throw st;r.emit("denied",en(st))}else P.push(Ae)})},function(O){throw i.doc_write_failures+=C.length,O})}}function Re(){if(o.error)throw new Error("There was a problem getting docs.");i.last_seq=g=o.seq;var C=en(i);return P.length&&(C.docs=P,"number"==typeof o.pending&&(C.pending=o.pending,delete o.pending),r.emit("change",C)),c=!0,t.info().then(function(S){var O=t.activeTasks.get(oe);if(o&&O){var k=O.completed_items||0,ge=parseInt(S.update_seq,10)-parseInt(d,10);t.activeTasks.update(oe,{completed_items:k+o.changes.length,total_items:ge})}}),T.writeCheckpoint(o.seq,U).then(function(){if(r.emit("checkpoint",{checkpoint:o.seq}),c=!1,r.cancelled)throw ee(),new Error("cancelled");o=void 0,Oe()}).catch(function(S){throw yt(S),S})}function Me(){return function lL(t,e,n,r){n=en(n);var i=[],s=!0;return Promise.resolve().then(function o(){var c=function uL(t){var e=[];return Object.keys(t).forEach(function(n){t[n].missing.forEach(function(i){e.push({id:n,rev:i})})}),{docs:e,revs:!0,latest:!0}}(n);if(c.docs.length)return t.bulkGet(c).then(function(u){if(r.cancelled)throw new Error("cancelled");return Promise.all(u.results.map(function(l){return Promise.all(l.docs.map(function(d){var g=d.ok;return d.error&&(s=!1),g&&g._attachments?function cL(t,e,n){var r=Ar(e)&&!Ar(t),i=Object.keys(n._attachments);return r?t.get(n._id).then(function(s){return Promise.all(i.map(function(o){return function aL(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}(s,n,o)?e.getAttachment(n._id,o):t.getAttachment(s._id,o)}))}).catch(function(s){if(404!==s.status)throw s;return ND(e,n)}):ND(e,n)}(e,t,g).then(function(f){var p=Object.keys(g._attachments);return f.forEach(function(v,y){var _=g._attachments[p[y]];delete _.stub,delete _.length,_.data=v}),g}):g}))})).then(function(l){i=i.concat(nu(l).filter(Boolean))})})}).then(function a(){return{ok:s,docs:i}})}(t,e,o.diffs,r).then(function(C){o.error=!C.ok,C.docs.forEach(function(S){delete o.diffs[S._id],i.docs_read++,o.docs.push(S)})})}function Ee(){if(!r.cancelled&&!o){if(0===s.length)return void B(!0);o=s.shift(),r.emit("checkpoint",{start_next_batch:o.seq}),function xe(){var C={};return o.changes.forEach(function(S){r.emit("checkpoint",{revs_diff:S}),"_user/"!==S.id&&(C[S.id]=S.changes.map(function(O){return O.rev}))}),e.revsDiff(C).then(function(S){if(r.cancelled)throw ee(),new Error("cancelled");o.diffs=S})}().then(Me).then(pe).then(Re).then(Ee).catch(function(C){q("batch processing terminated with error",C)})}}function B(C){0!==a.changes.length?(C||u||a.changes.length>=p)&&(s.push(a),a={seq:0,changes:[],docs:[]},("pending"===r.state||"stopped"===r.state)&&(r.state="active",r.emit("active")),Ee()):0===s.length&&!o&&((f&&G.live||u)&&(r.state="pending",r.emit("paused")),u&&ee())}function q(C,S){l||(S.message||(S.message=C),i.ok=!1,i.status="aborting",s=[],a={seq:0,changes:[],docs:[]},ee(S))}function ee(C){if(!(l||r.cancelled&&(i.status="cancelled",c)))if(i.status=i.status||"complete",i.end_time=(new Date).toISOString(),i.last_seq=g,l=!0,t.activeTasks.remove(oe,C),C){(C=Je(C)).result=i;var S=(C.name||"").toLowerCase();"unauthorized"===S||"forbidden"===S?(r.emit("error",C),r.removeAllListeners()):function hL(t,e,n,r){if(!1===t.retry)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=RF),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var i=function(){t.current_back_off=0};e.once("paused",function(){e.removeListener("active",i)}),e.once("active",i)}t.current_back_off=t.current_back_off||0,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(r,t.current_back_off)}(n,r,C,function(){VD(t,e,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function Ie(C,S,O){if(r.cancelled)return ee();if("number"==typeof S&&(a.pending=S),oh(n)(C))a.seq=C.seq||O,a.changes.push(C),r.emit("checkpoint",{pending_batch:a.seq}),Tr()(function(){B(0===s.length&&G.live)});else{var ge=t.activeTasks.get(oe);if(ge){var Ae=ge.completed_items||0;t.activeTasks.update(oe,{completed_items:++Ae})}}}function dt(C){if(_=!1,r.cancelled)return ee();if(C.results.length>0)G.since=C.results[C.results.length-1].seq,Oe(),B(!0);else{var S=function(){f?(G.live=!0,Oe()):u=!0,B(!0)};o||0!==C.results.length?S():(c=!0,T.writeCheckpoint(C.last_seq,U).then(function(){if(c=!1,i.last_seq=g=C.last_seq,r.cancelled)throw ee(),new Error("cancelled");S()}).catch(yt))}}function be(C){if(_=!1,r.cancelled)return ee();q("changes rejected",C)}function Oe(){if(!_&&!u&&s.length<v){_=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",C);var O=t.changes(G).on("change",Ie);O.then(S,S),O.then(dt).catch(be),n.retry&&(r._changes=O,r._abortChanges=C)}function C(){O.cancel()}function S(){r.removeListener("cancel",C)}}function rt(C){return t.info().then(function(S){var O=typeof n.since>"u"?parseInt(S.update_seq,10)-parseInt(C,10):parseInt(S.update_seq,10);return oe=t.activeTasks.add({name:`${f?"continuous ":""}replication from ${S.db_name}`,total_items:O}),C})}function $e(){de().then(function(){if(!r.cancelled)return T.getCheckpoint().then(rt).then(function(C){d=C,G={since:g=C,limit:p,batch_size:p,style:y,doc_ids:b,selector:E,return_docs:!0},n.filter&&("string"!=typeof n.filter?G.include_docs=!0:G.filter=n.filter),"heartbeat"in n&&(G.heartbeat=n.heartbeat),"timeout"in n&&(G.timeout=n.timeout),n.query_params&&(G.query_params=n.query_params),n.view&&(G.view=n.view),Oe()});ee()}).catch(function(C){q("getCheckpoint rejected with ",C)})}function yt(C){c=!1,q("writeCheckpoint completed with error",C)}r.ready(t,e),r.cancelled?ee():(r._addedListeners||(r.once("cancel",ee),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",function(C){n.complete(null,C)})),r._addedListeners=!0),typeof n.since>"u"?$e():de().then(function(){return c=!0,T.writeCheckpoint(n.since,U)}).then(function(){c=!1,r.cancelled?ee():(g=n.since,$e())}).catch(yt))}class mL extends(Zr()){constructor(){super(),this.cancelled=!1,this.state="pending";const e=new Promise((n,r)=>{this.once("complete",n),this.once("error",r)});this.then=function(n,r){return e.then(n,r)},this.catch=function(n){return e.catch(n)},this.catch(function(){})}cancel(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")}ready(e,n){if(this._readyCalled)return;this._readyCalled=!0;const r=()=>{this.cancel()};function i(){e.removeListener("destroyed",r),n.removeListener("destroyed",r)}e.once("destroyed",r),n.once("destroyed",r),this.once("complete",i),this.once("error",i)}}function fu(t,e){return"string"==typeof t?new(0,e.PouchConstructor)(t,e):t}function Uh(t,e,n,r){if("function"==typeof n&&(r=n,n={}),typeof n>"u"&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw Je(tu,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=en(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new mL(n);return VD(fu(t,n),fu(e,n),n,i),i}function vL(t,e,n,r){return"function"==typeof n&&(r=n,n={}),typeof n>"u"&&(n={}),(n=en(n)).PouchConstructor=n.PouchConstructor||this,t=fu(t,n),e=fu(e,n),new yL(t,e,n,r)}class yL extends(Zr()){constructor(e,n,r,i){super(),this.canceled=!1;const s=r.push?Bi({},r,r.push):r,o=r.pull?Bi({},r,r.pull):r;this.push=Uh(e,n,s),this.pull=Uh(n,e,o),this.pushPaused=!0,this.pullPaused=!0;const a=E=>{this.emit("change",{direction:"pull",change:E})},c=E=>{this.emit("change",{direction:"push",change:E})},u=E=>{this.emit("denied",{direction:"push",doc:E})},l=E=>{this.emit("denied",{direction:"pull",doc:E})},d=()=>{this.pushPaused=!0,this.pullPaused&&this.emit("paused")},g=()=>{this.pullPaused=!0,this.pushPaused&&this.emit("paused")},f=()=>{this.pushPaused=!1,this.pullPaused&&this.emit("active",{direction:"push"})},p=()=>{this.pullPaused=!1,this.pushPaused&&this.emit("active",{direction:"pull"})};let v={};const y=E=>(I,T)=>{("change"===I&&(T===a||T===c)||"denied"===I&&(T===l||T===u)||"paused"===I&&(T===g||T===d)||"active"===I&&(T===p||T===f))&&(I in v||(v[I]={}),v[I][E]=!0,2===Object.keys(v[I]).length&&this.removeAllListeners(I))};function _(E,I,T){-1==E.listeners(I).indexOf(T)&&E.on(I,T)}r.live&&(this.push.on("complete",this.pull.cancel.bind(this.pull)),this.pull.on("complete",this.push.cancel.bind(this.push))),this.on("newListener",function(E){"change"===E?(_(this.pull,"change",a),_(this.push,"change",c)):"denied"===E?(_(this.pull,"denied",l),_(this.push,"denied",u)):"active"===E?(_(this.pull,"active",p),_(this.push,"active",f)):"paused"===E&&(_(this.pull,"paused",g),_(this.push,"paused",d))}),this.on("removeListener",function(E){"change"===E?(this.pull.removeListener("change",a),this.push.removeListener("change",c)):"denied"===E?(this.pull.removeListener("denied",l),this.push.removeListener("denied",u)):"active"===E?(this.pull.removeListener("active",p),this.push.removeListener("active",f)):"paused"===E&&(this.pull.removeListener("paused",g),this.push.removeListener("paused",d))}),this.pull.on("removeListener",y("pull")),this.push.on("removeListener",y("push"));const b=Promise.all([this.push,this.pull]).then(E=>{const I={push:E[0],pull:E[1]};return this.emit("complete",I),i&&i(null,I),this.removeAllListeners(),I},E=>{if(this.cancel(),i?i(E):this.emit("error",E),this.removeAllListeners(),i)throw E});this.then=function(E,I){return b.then(E,I)},this.catch=function(E){return b.catch(E)}}cancel(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}}et.plugin(function Rk(t){t.adapter("idb",DD,!0)}).plugin(function Uk(t){t.adapter("http",Nh,!1),t.adapter("https",Nh,!1)}).plugin(oL).plugin(function _L(t){t.replicate=Uh,t.sync=vL,Object.defineProperty(t.prototype,"replicate",{get:function(){var e=this;return typeof this.replicateMethods>"u"&&(this.replicateMethods={from:function(n,r,i){return e.constructor.replicate(n,e,r,i)},to:function(n,r,i){return e.constructor.replicate(e,n,r,i)}}),this.replicateMethods}}),t.prototype.sync=function(e,n,r){return this.constructor.sync(this,e,n,r)}});const wL=et,Ki="personal_space";class Ks{constructor(){this._workspaces={},this.workspaceRegistry=this._openDb("local_spaces")}_openDb(e){return new wL(e)}_selectSpace(e){return new Promise((n,r)=>{this.workspaces().then(i=>{typeof e<"u"?Object.keys(i).includes(e)?n(i[e]):r("Space not found"):n(i[Ki])}).catch(i=>{r(i)})})}_loadWorkspaces(){return new Promise((e,n)=>{this.workspaceRegistry.allDocs({include_docs:!0,attachments:!0}).then(r=>{this._workspaces={},r.rows.map(i=>i.doc).forEach(i=>{this._workspaces[i.userWorkspaceId]=this._openDb(i._id)}),e()}).catch(r=>{n(r)})})}workspaces(){return new Promise((e,n)=>{Object.keys(this._workspaces).includes(Ki)?e(this._workspaces):this._loadWorkspaces().then(()=>{Object.keys(this._workspaces).includes(Ki)?e(this._workspaces):this.deleteAllSpaces().then(()=>{this.createSpace(Ki,"Personal Space","","").then(r=>{e(this._workspaces)}).catch(r=>{n(r)})}).catch(r=>{n(r)})}).catch(r=>{n(r)})})}createSpace(e,n,r,i){return new Promise((s,o)=>{this.workspaceRegistry.post({userWorkspaceId:e}).then(a=>{this._workspaces[e]=this._openDb(a.id),this.initSpace(r,i,e,n).then(()=>{s(e)}).catch(c=>{o(c)})}).catch(a=>{o(a)})})}spaceDocumentCount(e){return new Promise((n,r)=>{this._selectSpace(e).then(i=>{i.info().then(s=>{n(s.doc_count)})}).catch(i=>{r(i)})})}initSpace(e,n,r,i){return new Promise((s,o)=>{this.createDocument({_id:"",_rev:"",name:i,pwDoubleHash:e,pwHint:n,personal:r===Ki,type:"space-conf"},r).then(c=>{s()}).catch(c=>{o(c)})})}loadSpace(e){return new Promise((n,r)=>{this._selectSpace(e).then(i=>{i.allDocs({include_docs:!0,attachments:!0}).then(s=>{n(s.rows.map(o=>o.doc))}).catch(s=>{r(s)})}).catch(i=>{r(i)})})}deleteSpace(e){return new Promise((n,r)=>{this._selectSpace(e).then(i=>{i.info().then(s=>{const o=s.db_name;i.destroy().then(()=>{this.workspaceRegistry.get(o).then(a=>{this.workspaceRegistry.remove(a).then(()=>{typeof e>"u"&&(e=Ki),delete this._workspaces[e],n()}).catch(c=>{r(c)})})}).catch(a=>{r(a)})}).catch(s=>{r(s)})}).catch(i=>{r(i)})})}deleteAllSpaces(){var e=this;return new Promise(function(){var n=Xe(function*(r,i){const s=Object.keys(e._workspaces);Promise.all(s.map(function(){var o=Xe(function*(a){return e.deleteSpace(a)});return function(a){return o.apply(this,arguments)}}())).then(()=>{r()}).catch(o=>{i(o)})});return function(r,i){return n.apply(this,arguments)}}())}createDocument(e,n){return new Promise((r,i)=>{this._selectSpace(n).then(s=>{const o=e;delete o._id,delete o._rev,s.post(o).then(a=>{s.get(a.id).then(c=>{r(c)}).catch(c=>{i(c)})}).catch(a=>{i(a)})}).catch(s=>{i(s)})})}getDocumentByType(e,n){return new Promise((r,i)=>{this.loadSpace(n).then(s=>{r(s.filter(o=>o.type===e))}).catch(s=>{i(s)})})}updateDocument(e,n){return new Promise((r,i)=>{this._selectSpace(n).then(s=>{s.get(e._id).then(o=>{e._rev=o._rev,s.put(e).then(a=>{e._rev=a.rev,r(e)}).catch(a=>{i(a)})}).catch(o=>{i(o)})}).catch(s=>{i(s)})})}deleteDocument(e,n){return new Promise((r,i)=>{this._selectSpace(n).then(s=>{s.get(e._id).then(o=>{s.remove(o).then(()=>{r()}).then(a=>{i(a)})}).catch(o=>{i(o)})}).catch(s=>{i(s)})})}}Ks.\u0275fac=function(e){return new(e||Ks)},Ks.\u0275prov=Ze({token:Ks,factory:Ks.\u0275fac,providedIn:"root"});var EL=fe(817),bL=fe.n(EL),CL=fe(466),UD=fe.n(CL),SL=fe(384),ML=fe.n(SL);class Qs{constructor(){}hashString(e){return new Promise((n,r)=>{n(bL()(e).toString())})}encryptMessages(e,n){return new Promise((r,i)=>{Object.keys(e).forEach(s=>{e[s]=this.encrypt(e[s],n)}),r(e)})}encrypt(e,n){return UD().encrypt(e,n).toString()}decryptMessages(e,n){return new Promise((r,i)=>{Object.keys(e).forEach(s=>{e[s]=this.decrypt(e[s],n)}),r(e)})}decrypt(e,n){return UD().decrypt(e,n).toString(ML())}decryptRuntimeDocument(e,n){return new Promise((r,i)=>{if(!e.decrypted)switch(e.type){case"user-conf":e.name=this.decrypt(e.name,n),e.value=this.decrypt(e.value,n),e.decrypted=!0;break;case"space-conf":break;case"workspace":e.remoteConfig=this.decrypt(e.remoteConfig,n),e.pwHash=this.decrypt(e.pwHash,n),e.decrypted=!0;break;case"folder":e.name=this.decrypt(e.name,n),e.decrypted=!0;break;case"note":case"file":e.name=this.decrypt(e.name,n),e.content=this.decrypt(e.content,n),e.decrypted=!0;break;default:console.error("not handled document",e)}r(e)})}toStorageDocument(e,n){return new Promise((r,i)=>{switch(e.type){case"user-conf":{const s={name:e.name,value:e.value,type:"user-conf",_id:e._id,_rev:e._rev};e.decrypted&&(s.name=this.encrypt(s.name,n),s.value=this.encrypt(s.value,n)),r(s);break}case"space-conf":r({name:e.name,pwDoubleHash:e.pwDoubleHash,pwHint:e.pwHint,personal:e.personal,type:"space-conf",_id:e._id,_rev:e._rev});break;case"workspace":{const s={remoteConfig:e.remoteConfig,pwHash:e.pwHash,type:"workspace",_id:e._id,_rev:e._rev};e.decrypted&&(s.remoteConfig=this.encrypt(s.remoteConfig,n),s.pwHash=this.encrypt(s.pwHash,n)),r(s);break}case"folder":{const s={name:e.name,parent:e.parent,type:"folder",_id:e._id,_rev:e._rev};e.decrypted&&(s.name=this.encrypt(s.name,n)),r(s);break}case"note":{const s={name:e.name,content:e.content,folderId:e.folderId,type:"note",_id:e._id,_rev:e._rev};e.decrypted&&(s.name=this.encrypt(s.name,n),s.content=this.encrypt(s.content,n)),r(s);break}case"file":{const s={name:e.name,content:e.content,folderId:e.folderId,type:"file",_id:e._id,_rev:e._rev};e.decrypted&&(s.name=this.encrypt(s.name,n),s.content=this.encrypt(s.content,n)),r(s);break}default:i(["Not hanled document",e])}})}}Qs.\u0275fac=function(e){return new(e||Qs)},Qs.\u0275prov=Ze({token:Qs,factory:Qs.\u0275fac,providedIn:"root"});class Qi{constructor(e,n){this.cryptoService=e,this.persistentStorageService=n,this.spaces={}}_getSpaceId(e){return typeof e<"u"?e:Ki}init(){return new Promise((e,n)=>{this.loadSpace().then(()=>{e()}).catch(r=>{n(r)})})}getSpaceConfs(){return Object.keys(this.spaces).map(e=>this.spaces[e].spaceConf).sort((e,n)=>e.personal?-1:n.personal?1:0)}createSpace(e){return new Promise((n,r)=>{this.createDocument({remoteConfig:"",pwHash:"",type:"workspace",encryptedKeys:["remoteConfig","pwHash"],decrypted:!0,_id:"not loaded",_rev:"not loaded"}).then(s=>{this.persistentStorageService.createSpace(s._id,e,"","").then(o=>{this.loadSpace(o).then(()=>{n(o)})}).catch(o=>{r(o)})}).catch(s=>{r(s)})})}loadSpace(e){return new Promise((n,r)=>{this.persistentStorageService.loadSpace(e).then(i=>{const s={userConf:[],spaceConf:{name:"not loaded",pwHint:"not loaded",pwHash:"not loaded",pwDoubleHash:"not loaded",personal:!1,type:"space-conf",encryptedKeys:[],decrypted:!1,_id:"not loaded",_rev:"not loaded"},remoteSpaces:[],folder:[],notes:[],files:[]};i.forEach(o=>{switch(o.type){case"user-conf":s.userConf.push({name:o.name,value:o.value,type:o.type,encryptedKeys:["name","value"],decrypted:!1,_id:o._id,_rev:o._rev});break;case"space-conf":s.spaceConf={name:o.name,pwHint:o.pwHint,pwHash:"",pwDoubleHash:o.pwDoubleHash,personal:o.personal,type:o.type,encryptedKeys:[],decrypted:!1,_id:o._id,_rev:o._rev};break;case"workspace":s.remoteSpaces.push({remoteConfig:o.remoteConfig,pwHash:o.pwHash,type:o.type,encryptedKeys:["remoteConfig","pwHash"],decrypted:!1,_id:o._id,_rev:o._rev});break;case"folder":s.folder.push({name:o.name,parent:o.parent,type:o.type,encryptedKeys:["name"],decrypted:!1,_id:o._id,_rev:o._rev});break;case"note":s.notes.push({name:o.name,folderId:o.folderId,content:o.content,type:o.type,encryptedKeys:["name","content"],decrypted:!1,_id:o._id,_rev:o._rev});break;case"file":s.files.push({name:o.name,folderId:o.folderId,content:o.content,type:o.type,encryptedKeys:["name","content"],decrypted:!1,_id:o._id,_rev:o._rev});break;default:console.error("not handled document",o)}}),this.spaces[this._getSpaceId(e)]=s,n()}).catch(i=>{r(i)})})}deleteSpace(e){return new Promise((n,r)=>{delete this.spaces[this._getSpaceId(e)],this.persistentStorageService.deleteSpace(e).then(()=>{n()}).catch(i=>{r(i)})})}decryptSpace(e,n){var r=this;return new Promise((i,s)=>{this.cryptoService.hashString(e).then(function(){var o=Xe(function*(a){const c=r.spaces[r._getSpaceId(n)];if(c.spaceConf.pwDoubleHash!==a)s("The Password was not correct!");else{c.spaceConf.pwHash=a;try{c.spaceConf.decrypted=!0,c.userConf.forEach(function(){var u=Xe(function*(l){yield r.cryptoService.decryptRuntimeDocument(l,e)});return function(l){return u.apply(this,arguments)}}()),c.remoteSpaces.forEach(function(){var u=Xe(function*(l){yield r.cryptoService.decryptRuntimeDocument(l,e),yield r.loadSpace(l._id),yield r.decryptSpace(l.pwHash,l._id)});return function(l){return u.apply(this,arguments)}}()),c.folder.forEach(function(){var u=Xe(function*(l){yield r.cryptoService.decryptRuntimeDocument(l,e)});return function(l){return u.apply(this,arguments)}}()),c.notes.forEach(function(){var u=Xe(function*(l){yield r.cryptoService.decryptRuntimeDocument(l,e)});return function(l){return u.apply(this,arguments)}}()),c.files.forEach(function(){var u=Xe(function*(l){yield r.cryptoService.decryptRuntimeDocument(l,e)});return function(l){return u.apply(this,arguments)}}()),i()}catch(u){s(u)}}});return function(a){return o.apply(this,arguments)}}()).catch(o=>{s(o)})})}hashString(e){return new Promise((n,r)=>{this.cryptoService.hashString(e).then(i=>{n(i)}).catch(i=>{r(i)})})}space(e){return this.spaces[this._getSpaceId(e)]}createDocument(e,n){return new Promise((r,i)=>{const s=this.space(n);switch(e.type){case"user-conf":s.userConf.push(e);break;case"workspace":s.remoteSpaces.push(e);break;case"folder":s.folder.push(e);break;case"note":s.notes.push(e);break;case"file":s.files.push(e);break;default:console.error("Unhandled note type",e.type)}this.cryptoService.toStorageDocument(e,s.spaceConf.pwHash).then(o=>{this.persistentStorageService.createDocument(o,n).then(a=>{e._id=a._id,e._rev=a._rev,r(e)}).catch(a=>{i(a)})}).catch(o=>{i(o)})})}updateDocument(e,n){return new Promise((r,i)=>{const s=this.space(n);this.cryptoService.toStorageDocument(e,s.spaceConf.pwHash).then(o=>{this.persistentStorageService.updateDocument(o,n).then(a=>{e._rev=a._rev,r(e)}).catch(a=>{i(a)})}).catch(o=>{i(o)})})}deleteDocument(e,n){return new Promise((r,i)=>{const s=this.space(n);switch(e.type){case"user-conf":s.userConf=s.userConf.filter(o=>e._id!==o._id);break;case"workspace":s.remoteSpaces=s.remoteSpaces.filter(o=>e._id!==o._id);break;case"folder":s.folder=s.folder.filter(o=>e._id!==o._id);break;case"note":s.notes=s.notes.filter(o=>e._id!==o._id);break;case"file":s.files=s.files.filter(o=>e._id!==o._id);break;default:console.error("Unhandled note type",e.type)}this.persistentStorageService.deleteDocument(e,n).then(()=>{r()}).catch(o=>{i(o)})})}}function IL(t,e){if(1&t&&(Le(0,"div",15)(1,"div",16),Lt(2),Qe()()),2&t){const n=En().$implicit;Tt(2),Fs(" ",n.name," ")}}function TL(t,e){if(1&t){const n=vc();Le(0,"div",12),Qn("click",function(){const s=Br(n).$implicit;return jr(En().openSpace(s._id))}),Le(1,"div",13),Lt(2),Qe(),qt(3,IL,3,1,"div",14),Qe()}if(2&t){const n=e.$implicit,r=En();Tt(1),Od("title",n.name),Tt(1),Fs(" ",n.name.charAt(0)," "),Tt(1),At("ngIf","big"!==r.screenSize)}}function AL(t,e){1&t&&(Le(0,"div",17)(1,"div",18),Lt(2," Settings "),Qe()())}Qi.\u0275fac=function(e){return new(e||Qi)(Ce(Qs),Ce(Ks))},Qi.\u0275prov=Ze({token:Qi,factory:Qi.\u0275fac,providedIn:"root"});class ca{constructor(e,n){this.stateService=e,this.runtimeStorage=n,this.runtimeStorage.init().then(()=>{})}get screenSize(){return this.stateService.getScreenSize()}get spaceConfs(){return this.runtimeStorage.getSpaceConfs()}openSettings(){console.log("opening settings")}openSpace(e){console.log("opening",e)}openAddSpace(){console.log("opening add space")}}function xL(t,e){1&t&&(Le(0,"span",6),Lt(1,"\ue5ce"),Qe())}function OL(t,e){1&t&&(Le(0,"span",7),Lt(1,"\ue5cf"),Qe())}function PL(t,e){if(1&t&&(Le(0,"div",9),Hn(1,"app-folder",10),Qe()),2&t){const n=e.$implicit;Tt(1),At("folder",n)}}function NL(t,e){if(1&t&&(Le(0,"div"),qt(1,PL,2,1,"div",8),Qe()),2&t){const n=En();Tt(1),At("ngForOf",n.subFolders)}}ca.\u0275fac=function(e){return new(e||ca)(Ke(hi),Ke(Qi))},ca.\u0275cmp=oi({type:ca,selectors:[["app-spaces"]],decls:14,vars:2,consts:[[1,"spaces-wrapper"],[1,"application-icon"],["src","/assets/logo.svg",1,"icon-image"],[1,"spaces-list"],["class","space-wrapper",3,"click",4,"ngFor","ngForOf"],[1,"add-space-wrapper",3,"click"],[1,"add-space"],[1,"bottom"],[1,"item-wrapper",3,"click"],[1,"item-icon-wrapper"],["title","Settings",1,"material-icons-outlined","item-icon"],["class","item-name",4,"ngIf"],[1,"space-wrapper",3,"click"],[1,"space-icon","elevated",3,"title"],["class","space-name",4,"ngIf"],[1,"space-name"],[1,"space-name-content"],[1,"item-name"],[1,"item-name-content"]],template:function(e,n){1&e&&(Le(0,"div",0)(1,"div",1),Hn(2,"img",2),Qe(),Le(3,"div",3),qt(4,TL,4,3,"div",4),Le(5,"div",5),Qn("click",function(){return n.openAddSpace()}),Le(6,"div",6),Lt(7," + "),Qe()()(),Le(8,"div",7)(9,"div",8),Qn("click",function(){return n.openSettings()}),Le(10,"div",9)(11,"span",10),Lt(12,"\ue8b8"),Qe()(),qt(13,AL,3,0,"div",11),Qe()()()),2&e&&(Tt(4),At("ngForOf",n.spaceConfs),Tt(9),At("ngIf","big"!==n.screenSize))},dependencies:[Of,Uc],styles:[".spaces-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.spaces-wrapper[_ngcontent-%COMP%]   .application-icon[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.spaces-wrapper[_ngcontent-%COMP%]   .application-icon[_ngcontent-%COMP%]   .icon-image[_ngcontent-%COMP%]{height:var(--space-bubble-diameter);width:var(--space-bubble-diameter)}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]{flex-grow:1;height:0px;overflow:scroll;-ms-overflow-style:none;scrollbar-width:none}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]   .space-wrapper[_ngcontent-%COMP%]{padding-top:var(--internal-padding);display:flex;flex-direction:row}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]   .space-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]   .space-wrapper[_ngcontent-%COMP%]   .space-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:var(--space-bubble-diameter);width:var(--space-bubble-diameter);border-radius:var(--space-bubble-radius);background-color:var(--spaces-background-color);color:var(--spaces-text-color);font-size:2rem}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]   .space-wrapper[_ngcontent-%COMP%]   .space-name[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:center;width:0px}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]   .space-wrapper[_ngcontent-%COMP%]   .space-name[_ngcontent-%COMP%]   .space-name-content[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:var(--internal-padding)}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]   .add-space-wrapper[_ngcontent-%COMP%]{padding-top:var(--internal-padding)}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]   .add-space-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.spaces-wrapper[_ngcontent-%COMP%]   .spaces-list[_ngcontent-%COMP%]   .add-space-wrapper[_ngcontent-%COMP%]   .add-space[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:var(--space-bubble-diameter);color:var(--spaces-background-color);font-size:2rem;width:100%}.spaces-wrapper[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{color:var(--spaces-background-color)}.spaces-wrapper[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]{padding-top:var(--internal-padding);width:100%;display:flex;justify-content:center;align-items:center}.spaces-wrapper[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.spaces-wrapper[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item-icon-wrapper[_ngcontent-%COMP%]{height:var(--space-bubble-diameter);width:var(--space-bubble-diameter);display:flex;align-items:center;justify-content:center}.spaces-wrapper[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item-icon-wrapper[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:calc(var(--space-bubble-diameter) - var(--internal-padding))}.spaces-wrapper[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{display:flex;align-items:center}.spaces-wrapper[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]   .item-name-content[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:var(--internal-padding)}"]});const FL=function(t){return{invisible:t}};class Ys{constructor(e,n){this.runtimeStorageService=e,this.stateService=n,this.folder={type:"folder",decrypted:!0,_id:"",_rev:"",encryptedKeys:["name"],name:"Root Folder",parent:""},this.open=!0}showFolderContent(e){console.log("show content of folder",e)}toggleFolder(){this.open=!this.open}get subFolders(){return""===this.stateService.getCurrentSpaceId()?[]:this.runtimeStorageService.spaces[this.stateService.getCurrentSpaceId()].folder.filter(e=>e.parent===this.folder._id)}}Ys.\u0275fac=function(e){return new(e||Ys)(Ke(Qi),Ke(hi))},Ys.\u0275cmp=oi({type:Ys,selectors:[["app-folder"]],inputs:{folder:"folder"},decls:7,vars:7,consts:[[1,"folder"],[1,"toggle-folder",3,"ngClass","click"],["class","material-icons-outlined toggle-icon","title","expand",4,"ngIf"],["class","material-icons-outlined toggle-icon","title","collapse",4,"ngIf"],[3,"click"],[4,"ngIf"],["title","expand",1,"material-icons-outlined","toggle-icon"],["title","collapse",1,"material-icons-outlined","toggle-icon"],["class","subfolder-wrapper",4,"ngFor","ngForOf"],[1,"subfolder-wrapper"],[3,"folder"]],template:function(e,n){1&e&&(Le(0,"div",0)(1,"div",1),Qn("click",function(){return n.toggleFolder()}),qt(2,xL,2,0,"span",2),qt(3,OL,2,0,"span",3),Qe(),Le(4,"div",4),Qn("click",function(){return n.showFolderContent(n.folder.name)}),Lt(5),Qe()(),qt(6,NL,2,1,"div",5)),2&e&&(Tt(1),At("ngClass",Cc(5,FL,0===n.subFolders.length)),Tt(1),At("ngIf",n.open),Tt(1),At("ngIf",!n.open),Tt(2),Fs(" ",n.folder.name," "),Tt(1),At("ngIf",n.open))},dependencies:[xf,Of,Uc,Ys],styles:[".folder[_ngcontent-%COMP%]{width:calc(100% - var(--doubble-internal-padding));padding-left:var(--internal-padding);padding-right:var(--internal-padding);display:flex;flex-direction:row}.folder[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--folder-hover-color);border-radius:var(--corner-radius)}.folder[_ngcontent-%COMP%]   .toggle-folder[_ngcontent-%COMP%]{padding-right:var(--internal-padding)}.folder[_ngcontent-%COMP%]   .toggle-folder[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{font-size:small}.folder[_ngcontent-%COMP%]   .invisible[_ngcontent-%COMP%]{visibility:hidden}.subfolder-wrapper[_ngcontent-%COMP%]{padding-left:var(--internal-padding)}"]});class ua{openAllNotes(){console.log("open all notes")}openStarredNotes(){console.log("open starred notes")}openDeletedNotes(){console.log("open all notes")}}ua.\u0275fac=function(e){return new(e||ua)},ua.\u0275cmp=oi({type:ua,selectors:[["app-overview"]],decls:17,vars:0,consts:[[1,"overview-wrapper"],[1,"top-wrapper"],[1,"header-title"],[1,"title-text"],[1,"header-item"],[1,"folder-wrapper"],[1,"title"],[1,"content"]],template:function(e,n){1&e&&(Le(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Lt(4," General "),Qe()(),Le(5,"div",4),Lt(6," All notes "),Qe(),Le(7,"div",4),Lt(8," Starred "),Qe(),Le(9,"div",4),Lt(10," Trash "),Qe()(),Le(11,"div",5)(12,"div",6)(13,"div",3),Lt(14," Folder "),Qe()(),Le(15,"div",7),Hn(16,"app-folder"),Qe()()())},dependencies:[Ys],styles:[".overview-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}.overview-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.overview-wrapper[_ngcontent-%COMP%]   .top-wrapper[_ngcontent-%COMP%]{width:100%;padding-top:var(--internal-padding)}.overview-wrapper[_ngcontent-%COMP%]   .top-wrapper[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{width:calc(100% - var(--doubble-internal-padding));padding:var(--internal-padding);padding-top:0}.overview-wrapper[_ngcontent-%COMP%]   .top-wrapper[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{font-weight:500;width:100%;border-bottom:1px solid var(--folder-text-color)}.overview-wrapper[_ngcontent-%COMP%]   .top-wrapper[_ngcontent-%COMP%]   .header-item[_ngcontent-%COMP%]{width:calc(100% - var(--doubble-internal-padding) - var(--internal-padding));padding-left:var(--doubble-internal-padding);padding-right:var(--internal-padding)}.overview-wrapper[_ngcontent-%COMP%]   .top-wrapper[_ngcontent-%COMP%]   .header-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--folder-hover-color);border-radius:var(--corner-radius)}.overview-wrapper[_ngcontent-%COMP%]   .folder-wrapper[_ngcontent-%COMP%]{flex-grow:1;padding-top:var(--internal-padding)}.overview-wrapper[_ngcontent-%COMP%]   .folder-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:var(--internal-padding);padding-top:0;width:calc(100% - var(--doubble-internal-padding))}.overview-wrapper[_ngcontent-%COMP%]   .folder-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{font-weight:500;width:100%;border-bottom:1px solid var(--folder-text-color)}"]});const qD=function(t){return{"resize-hover":t}};function RL(t,e){if(1&t){const n=vc();Le(0,"div",3),Qn("pointermove",function(i){return Br(n),jr(En().resize(i))})("pointerup",function(i){return Br(n),jr(En().endResize(i))}),Le(1,"div",4)(2,"div",5),Hn(3,"app-spaces"),Qe()(),Le(4,"div",6)(5,"div",7),Hn(6,"app-overview"),Qe(),Le(7,"div",8),Qn("pointerdown",function(i){return Br(n),jr(En().startResize(i))}),Qe()(),Le(8,"div",6)(9,"div",9),Lt(10," files "),Qe(),Le(11,"div",8),Qn("pointerdown",function(i){return Br(n),jr(En().startResize(i))}),Qe()(),Le(12,"div",10)(13,"div",11),Lt(14," editor "),Qe()()()}if(2&t){const n=En();At("ngClass",Cc(1,qD,null!==n.currentResizing))}}function kL(t,e){1&t&&(Le(0,"div",21)(1,"div",22),Lt(2," header "),Qe()())}function LL(t,e){1&t&&(Le(0,"div",23),Hn(1,"app-spaces"),Qe())}function BL(t,e){1&t&&(Le(0,"div",24),Hn(1,"app-overview"),Qe())}function jL(t,e){1&t&&(Le(0,"div",25),Lt(1," files "),Qe())}function HL(t,e){if(1&t){const n=vc();Le(0,"div",12),Qn("pointermove",function(i){return Br(n),jr(En().resize(i))})("pointerup",function(i){return Br(n),jr(En().endResize(i))}),Le(1,"div",13),qt(2,kL,3,0,"div",14),Le(3,"div",15),qt(4,LL,2,0,"div",16),qt(5,BL,2,0,"div",17),qt(6,jL,2,0,"div",18),Qe(),Le(7,"div",8),Qn("pointerdown",function(i){return Br(n),jr(En().startResize(i))}),Qe()(),Le(8,"div",19)(9,"div",20),Lt(10," editor "),Qe()()()}if(2&t){const n=En();At("ngClass",Cc(5,qD,null!==n.currentResizing)),Tt(2),At("ngIf","spaces"!==n.currentMainView),Tt(2),At("ngIf","spaces"===n.currentMainView),Tt(1),At("ngIf","folder"===n.currentMainView),Tt(1),At("ngIf","files"===n.currentMainView)}}function $L(t,e){1&t&&(Le(0,"div",33),Lt(1," Header "),Qe())}function VL(t,e){1&t&&(Le(0,"div",34),Hn(1,"app-spaces"),Qe())}function UL(t,e){1&t&&(Le(0,"div",35),Hn(1,"app-overview"),Qe())}function qL(t,e){1&t&&(Le(0,"div",36),Lt(1," files "),Qe())}function zL(t,e){1&t&&(Le(0,"div",37),Lt(1," editor "),Qe())}function WL(t,e){if(1&t&&(Le(0,"div",26),qt(1,$L,2,0,"div",27),Le(2,"div",28),qt(3,VL,2,0,"div",29),qt(4,UL,2,0,"div",30),qt(5,qL,2,0,"div",31),qt(6,zL,2,0,"div",32),Qe()()),2&t){const n=En();Tt(1),At("ngIf","spaces"!==n.currentMainView),Tt(2),At("ngIf","spaces"===n.currentMainView),Tt(1),At("ngIf","folder"===n.currentMainView),Tt(1),At("ngIf","files"===n.currentMainView),Tt(1),At("ngIf","editor"===n.currentMainView)}}class la{constructor(e){this.stateService=e,this.currentResizing=null,this.baseWidth=0}get screenSize(){return this.stateService.getScreenSize()}get currentMainView(){return this.stateService.getCurrentMainView()}startResize(e){this.currentResizing=e.target.parentElement,this.baseWidth=this.currentResizing.clientWidth-e.clientX}resize(e){null!==this.currentResizing&&(this.currentResizing.style.width=`${this.baseWidth+e.clientX}px`)}endResize(e){null!==this.currentResizing&&(this.currentResizing=null)}}la.\u0275fac=function(e){return new(e||la)(Ke(hi))},la.\u0275cmp=oi({type:la,selectors:[["app-main"]],decls:3,vars:3,consts:[["class","big-wrapper",3,"ngClass","pointermove","pointerup",4,"ngIf"],["class","medium-wrapper",3,"ngClass","pointermove","pointerup",4,"ngIf"],["class","small-wrapper",4,"ngIf"],[1,"big-wrapper",3,"ngClass","pointermove","pointerup"],[1,"column-wrapper","first-column"],[1,"field-wrapper","spaces"],[1,"column-wrapper","data-column"],[1,"field-wrapper","folder","elevated"],[1,"resizer",3,"pointerdown"],[1,"field-wrapper","files","elevated"],[1,"column-wrapper","last-column"],[1,"field-wrapper","editor","elevated"],[1,"medium-wrapper",3,"ngClass","pointermove","pointerup"],[1,"left-column"],["class","header-wrapper",4,"ngIf"],[1,"content-wrapper"],["class","spaces content-field",4,"ngIf"],["class","folder content-field elevated",4,"ngIf"],["class","files content-field elevated",4,"ngIf"],[1,"editor-wrapper"],[1,"editor","field-wrapper","elevated"],[1,"header-wrapper"],[1,"header-field","elevated"],[1,"spaces","content-field"],[1,"folder","content-field","elevated"],[1,"files","content-field","elevated"],[1,"small-wrapper"],["class","small-header",4,"ngIf"],[1,"small-content"],["class","spaces small-field-wrapper",4,"ngIf"],["class","folder small-field-wrapper",4,"ngIf"],["class","files small-field-wrapper",4,"ngIf"],["class","editor small-field-wrapper",4,"ngIf"],[1,"small-header"],[1,"spaces","small-field-wrapper"],[1,"folder","small-field-wrapper"],[1,"files","small-field-wrapper"],[1,"editor","small-field-wrapper"]],template:function(e,n){1&e&&(qt(0,RL,15,3,"div",0),qt(1,HL,11,7,"div",1),qt(2,WL,7,5,"div",2)),2&e&&(At("ngIf","big"===n.screenSize),Tt(1),At("ngIf","medium"===n.screenSize),Tt(1),At("ngIf","small"===n.screenSize))},dependencies:[xf,Uc,ca,ua],styles:[".resize-hover[_ngcontent-%COMP%]:hover{cursor:ew-resize}.big-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.big-wrapper[_ngcontent-%COMP%]   .column-wrapper[_ngcontent-%COMP%]{padding:var(--padding);height:calc(100% - var(--doubble-padding));padding-left:0;position:relative}.big-wrapper[_ngcontent-%COMP%]   .column-wrapper[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]{height:calc(100% - var(--doubble-internal-padding));width:calc(100% - var(--doubble-internal-padding));border-radius:var(--corner-radius);padding:var(--internal-padding);overflow:hidden}.big-wrapper[_ngcontent-%COMP%]   .column-wrapper[_ngcontent-%COMP%]   .resizer[_ngcontent-%COMP%]{height:calc(100% - var(--doubble-padding));width:3px;position:absolute;top:var(--padding);right:var(--padding)}.big-wrapper[_ngcontent-%COMP%]   .column-wrapper[_ngcontent-%COMP%]   .resizer[_ngcontent-%COMP%]:hover{cursor:ew-resize}.big-wrapper[_ngcontent-%COMP%]   .data-column[_ngcontent-%COMP%]{width:200px;min-width:calc(var(--doubble-internal-padding) + var(--space-bubble-diameter))}.big-wrapper[_ngcontent-%COMP%]   .first-column[_ngcontent-%COMP%]{padding-left:var(--padding)}.big-wrapper[_ngcontent-%COMP%]   .last-column[_ngcontent-%COMP%]{display:flex;flex-grow:1}.big-wrapper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{resize:horizontal;overflow:scroll;width:100px}.medium-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.medium-wrapper[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;height:100%;width:250px;min-width:calc(var(--doubble-padding) + var(--doubble-padding) + var(--space-bubble-diameter))}.medium-wrapper[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%]   .header-wrapper[_ngcontent-%COMP%]{width:calc(100% - var(--doubble-padding));padding:var(--padding);padding-bottom:0}.medium-wrapper[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%]   .header-wrapper[_ngcontent-%COMP%]   .header-field[_ngcontent-%COMP%]{width:calc(100% - var(--doubble-padding));border-radius:var(--corner-radius);padding:var(--internal-padding)}.medium-wrapper[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:1;width:calc(100% - var(--doubble-padding));padding:var(--padding);border-radius:var(--corner-radius)}.medium-wrapper[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-field[_ngcontent-%COMP%]{width:calc(100% - var(--doubble-padding));border-radius:var(--corner-radius);padding:var(--internal-padding)}.medium-wrapper[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%]   .resizer[_ngcontent-%COMP%]{height:calc(100% - var(--doubble-padding));width:3px;position:absolute;top:var(--padding);right:var(--padding)}.medium-wrapper[_ngcontent-%COMP%]   .left-column[_ngcontent-%COMP%]   .resizer[_ngcontent-%COMP%]:hover{cursor:ew-resize}.medium-wrapper[_ngcontent-%COMP%]   .editor-wrapper[_ngcontent-%COMP%]{padding:var(--padding);height:calc(100% - var(--doubble-padding));padding-left:0;display:flex;flex-grow:1}.medium-wrapper[_ngcontent-%COMP%]   .editor-wrapper[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]{width:100%;padding:var(--padding);border-radius:var(--corner-radius)}.small-wrapper[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;flex-direction:column}.small-wrapper[_ngcontent-%COMP%]   .small-header[_ngcontent-%COMP%]{width:calc(100% - var(--doubble-padding));padding:var(--internal-padding)}.small-wrapper[_ngcontent-%COMP%]   .small-content[_ngcontent-%COMP%]{display:flex;flex-grow:1}.small-wrapper[_ngcontent-%COMP%]   .small-content[_ngcontent-%COMP%]   .small-field-wrapper[_ngcontent-%COMP%]{width:100%;padding:var(--internal-padding)}.folder[_ngcontent-%COMP%]{background-color:var(--folder-background-color);color:var(--folder-text-color)}.files[_ngcontent-%COMP%]{background-color:var(--files-background-color);color:var(--files-text-color)}.editor[_ngcontent-%COMP%]{background-color:var(--editor-background-color);color:var(--editor-text-color)}"]});class da{}da.\u0275fac=function(e){return new(e||da)},da.\u0275cmp=oi({type:da,selectors:[["app-view"]],decls:2,vars:0,consts:[[1,"view"]],template:function(e,n){1&e&&(Le(0,"div",0),Hn(1,"app-main"),Qe())},dependencies:[la],styles:[".view[_ngcontent-%COMP%]{height:100%;width:100%}"]});class fa{constructor(){this.title="paper-dragon"}}function zD(t){return new Te(e=>{fn(t()).subscribe(e)})}fa.\u0275fac=function(e){return new(e||fa)},fa.\u0275cmp=oi({type:fa,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"view-wrapper"]],template:function(e,n){1&e&&(Le(0,"div",0),Hn(1,"app-view"),Qe())},dependencies:[da],styles:[".view-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}"]});const GL=["addListener","removeListener"],KL=["addEventListener","removeEventListener"],QL=["on","off"];function hu(t,e,n,r){if($(n)&&(r=n,n=void 0),r)return hu(t,e,n).pipe(Gf(r));const[i,s]=function XL(t){return $(t.addEventListener)&&$(t.removeEventListener)}(t)?KL.map(o=>a=>t[o](e,a,n)):function YL(t){return $(t.addListener)&&$(t.removeListener)}(t)?GL.map(GD(t,e)):function ZL(t){return $(t.on)&&$(t.off)}(t)?QL.map(GD(t,e)):[];if(!i&&Hu(t))return ts(o=>hu(o,e,n))(fn(t));if(!i)throw new TypeError("Invalid event target");return new Te(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function GD(t,e){return n=>r=>t[n](e,r)}function ei(...t){return no(t,to(t))}const pi=new Te(X);function pu(t,e){return sn((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(on(r,c=>{i?.unsubscribe();let u=0;const l=s++;fn(t(c,l)).subscribe(i=on(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}class e2 extends Te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ye;const n=this.getSubject();e.add(this.source.subscribe(on(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ye.EMPTY)}return e}refCount(){return function JL(){return sn((t,e)=>{let n=null;t._refCount++;const r=on(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}()(this)}}const n2={connector:()=>new te};function KD(t,e=n2){const{connector:n}=e;return sn((r,i)=>{const s=n();fn(t(function t2(t){return new Te(e=>t.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function QD(t,e){return e?n=>Jo(e.pipe(Yr(1),function s2(){return sn((t,e)=>{t.subscribe(on(e,X))})}()),n.pipe(QD(t))):ts((n,r)=>fn(t(n,r)).pipe(Yr(1),function o2(t){return jt(()=>t)}(n)))}const ha="Service workers are disabled or not supported by this browser";class mu{constructor(e){if(this.serviceWorker=e,e){const r=hu(e,"controllerchange").pipe(jt(()=>e.controller)),s=Jo(zD(()=>ei(e.controller)),r);this.worker=s.pipe(fi(l=>!!l)),this.registration=this.worker.pipe(pu(()=>e.getRegistration()));const u=hu(e,"message").pipe(jt(l=>l.data)).pipe(fi(l=>l&&l.type)).pipe(function i2(t){return t?e=>KD(t)(e):e=>function r2(t,e){const n=$(t)?t:()=>t;return $(e)?KD(e,{connector:n}):r=>new e2(r,n)}(new te)(e)}());u.connect(),this.events=u}else this.worker=this.events=this.registration=function l2(t){return zD(()=>function WD(t,e){const n=$(t)?t:()=>t,r=i=>i.error(n());return new Te(e?i=>e.schedule(r,0,i):r)}(new Error(t)))}(ha)}postMessage(e,n){return this.worker.pipe(Yr(1),function gu(t,e,n){const r=$(t)||e||n?{next:t,error:e,complete:n}:t;return r?sn((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(on(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):we}(r=>{r.postMessage({action:e,...n})})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,n);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let n;return n="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(fi(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(Yr(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(fi(n=>n.nonce===e),Yr(1),jt(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let d2=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.subscriptionChanges=new te,!n.isEnabled)return this.messages=pi,this.notificationClicks=pi,void(this.subscription=pi);this.messages=this.sw.eventsOfType("PUSH").pipe(jt(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(jt(i=>i.data)),this.pushManager=this.sw.registration.pipe(jt(i=>i.pushManager));const r=this.pushManager.pipe(pu(i=>i.getSubscription()));this.subscription=Uu(r,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled)return Promise.reject(new Error(ha));const r={userVisibleOnly:!0};let i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(pu(o=>o.subscribe(r)),Yr(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Yr(1),pu(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(ha))}decodeBase64(n){return atob(n)}}return t.\u0275fac=function(n){return new(n||t)(Ce(mu))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})(),f2=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=pi,this.available=pi,this.activated=pi,void(this.unrecoverable=pi);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(fi(r=>"VERSION_READY"===r.type),jt(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ha));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ha));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}}return t.\u0275fac=function(n){return new(n||t)(Ce(mu))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();class qh{}const YD=new Se("NGSW_REGISTER_SCRIPT");function h2(t,e,n,r){return()=>{if(!kf(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)i=n.registrationStrategy();else{const[o,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=ei(null);break;case"registerWithDelay":i=ZD(+a[0]||0);break;case"registerWhenStable":i=a[0]?Uu(XD(t),ZD(+a[0])):XD(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(zt).runOutsideAngular(()=>i.pipe(Yr(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function ZD(t){return ei(null).pipe(function u2(t,e=Kf){const n=function c2(t=0,e,n=nF){let r=-1;return null!=e&&(jp(e)?n=e:r=e),new Te(i=>{let s=function a2(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(t,e);return QD(()=>n)}(t))}function XD(t){return t.get(zo).isStable.pipe(fi(n=>n))}function p2(t,e){return new mu(kf(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let g2=(()=>{class t{static register(n,r={}){return{ngModule:t,providers:[{provide:YD,useValue:n},{provide:qh,useValue:r},{provide:mu,useFactory:p2,deps:[qh,qo]},{provide:rf,useFactory:h2,deps:[qr,YD,qh,qo],multi:!0}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=vr({type:t}),t.\u0275inj=rr({providers:[d2,f2]}),t})();class JD{}class m2{}const ti="*";function eE(t,e=null){return{type:2,steps:t,options:e}}function tE(t){return{type:6,styles:t,offset:null}}function nE(t){Promise.resolve().then(t)}class pa{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){nE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class rE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0;const s=this.players.length;0==s?nE(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((n,r)=>null===n||r.totalTime>n.totalTime?r:n,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}function iE(t){return new ne(3e3,!1)}function Z2(){return typeof window<"u"&&typeof window.document<"u"}function Wh(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function gi(t){switch(t.length){case 0:return new pa;case 1:return t[0];default:return new rE(t)}}function sE(t,e,n,r,i=new Map,s=new Map){const o=[],a=[];let c=-1,u=null;if(r.forEach(l=>{const d=l.get("offset"),g=d==c,f=g&&u||new Map;l.forEach((p,v)=>{let y=v,_=p;if("offset"!==v)switch(y=e.normalizePropertyName(y,o),_){case"!":_=i.get(v);break;case ti:_=s.get(v);break;default:_=e.normalizeStyleValue(v,y,_,o)}f.set(y,_)}),g||a.push(f),u=f,c=d}),o.length)throw function j2(t){return new ne(3502,!1)}();return a}function Gh(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Kh(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Kh(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Kh(n,"destroy",t)))}}function Kh(t,e,n){const s=Qh(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,n.totalTime??t.totalTime,!!n.disabled),o=t._data;return null!=o&&(s._data=o),s}function Qh(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function $n(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function oE(t){const e=t.indexOf(":");return[t.substring(1,e),t.slice(e+1)]}let Yh=(t,e)=>!1,aE=(t,e,n)=>[],cE=null;function Zh(t){const e=t.parentNode||t.host;return e===cE?null:e}(Wh()||typeof Element<"u")&&(Z2()?(cE=(()=>document.documentElement)(),Yh=(t,e)=>{for(;e;){if(e===t)return!0;e=Zh(e)}return!1}):Yh=(t,e)=>t.contains(e),aE=(t,e,n)=>{if(n)return Array.from(t.querySelectorAll(e));const r=t.querySelector(e);return r?[r]:[]});let Yi=null,uE=!1;const lE=Yh,dE=aE;let fE=(()=>{class t{validateStyleProperty(n){return function J2(t){Yi||(Yi=function eB(){return typeof document<"u"?document.body:null}()||{},uE=!!Yi.style&&"WebkitAppearance"in Yi.style);let e=!0;return Yi.style&&!function X2(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Yi.style,!e&&uE&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Yi.style)),e}(n)}matchesElement(n,r){return!1}containsElement(n,r){return lE(n,r)}getParentElement(n){return Zh(n)}query(n,r,i){return dE(n,r,i)}computeStyle(n,r,i){return i||""}animate(n,r,i,s,o,a=[],c){return new pa(i,s)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})(),Xh=(()=>{class t{}return t.NOOP=new fE,t})();const Jh="ng-enter",vu="ng-leave",yu="ng-trigger",_u=".ng-trigger",pE="ng-animating",ep=".ng-animating";function ni(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tp(parseFloat(e[1]),e[2])}function tp(t,e){return"s"===e?1e3*t:t}function wu(t,e,n){return t.hasOwnProperty("duration")?t:function rB(t,e,n){let i,s=0,o="";if("string"==typeof t){const a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(iE()),{duration:0,delay:0,easing:""};i=tp(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=tp(parseFloat(c),a[4]));const u=a[5];u&&(o=u)}else i=t;if(!n){let a=!1,c=e.length;i<0&&(e.push(function v2(){return new ne(3100,!1)}()),a=!0),s<0&&(e.push(function y2(){return new ne(3101,!1)}()),a=!0),a&&e.splice(c,0,iE())}return{duration:i,delay:s,easing:o}}(t,e,n)}function ga(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function gE(t){const e=new Map;return Object.keys(t).forEach(n=>{e.set(n,t[n])}),e}function mi(t,e=new Map,n){if(n)for(let[r,i]of n)e.set(r,i);for(let[r,i]of t)e.set(r,i);return e}function vE(t,e,n){return n?e+":"+n+";":""}function yE(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=vE(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=vE(0,aB(n),t.style[n]));t.setAttribute("style",e)}function Nr(t,e,n){t.style&&(e.forEach((r,i)=>{const s=rp(i);n&&!n.has(i)&&n.set(i,t.style[s]),t.style[s]=r}),Wh()&&yE(t))}function Zi(t,e){t.style&&(e.forEach((n,r)=>{const i=rp(r);t.style[i]=""}),Wh()&&yE(t))}function ma(t){return Array.isArray(t)?1==t.length?t[0]:eE(t):t}const np=new RegExp("{{\\s*(.+?)\\s*}}","g");function _E(t){let e=[];if("string"==typeof t){let n;for(;n=np.exec(t);)e.push(n[1]);np.lastIndex=0}return e}function va(t,e,n){const r=t.toString(),i=r.replace(np,(s,o)=>{let a=e[o];return null==a&&(n.push(function w2(t){return new ne(3003,!1)}()),a=""),a.toString()});return i==r?t:i}function Du(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const oB=/-+([a-z0-9])/g;function rp(t){return t.replace(oB,(...e)=>e[1].toUpperCase())}function aB(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Vn(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw function D2(t){return new ne(3004,!1)}()}}function wE(t,e){return window.getComputedStyle(t)[e]}function hB(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(r=>function pB(t,e,n){if(":"==t[0]){const c=function gB(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(function R2(t){return new ne(3016,!1)}()),"* => *"}}(t,n);if("function"==typeof c)return void e.push(c);t=c}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(function F2(t){return new ne(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(DE(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(DE(o,i))}(r,n,e)):n.push(t),n}const Su=new Set(["true","1"]),Mu=new Set(["false","0"]);function DE(t,e){const n=Su.has(t)||Mu.has(t),r=Su.has(e)||Mu.has(e);return(i,s)=>{let o="*"==t||t==i,a="*"==e||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?Su.has(t):Mu.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?Su.has(e):Mu.has(e)),o&&a}}const mB=new RegExp("s*:selfs*,?","g");function ip(t,e,n,r){return new vB(t).build(e,n,r)}class vB{constructor(e){this._driver=e}build(e,n,r){const i=new wB(n);return this._resetContextStyleTimingState(i),Vn(this,ma(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&n.errors.push(function b2(){return new ne(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(l=>{c.name=l,s.push(this.visitState(c,n))}),c.name=u}else if(1==a.type){const c=this.visitTransition(a,n);r+=c.queryCount,i+=c.depCount,o.push(c)}else n.errors.push(function C2(){return new ne(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,n){const r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{_E(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(Du(s.values()),n.errors.push(function S2(t,e){return new ne(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const r=Vn(this,ma(e.animation),n);return{type:1,matchers:hB(e.expr,n.errors),animation:r,queryCount:n.queryCount,depCount:n.depCount,options:Xi(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(r=>Vn(this,r,n)),options:Xi(e.options)}}visitGroup(e,n){const r=n.currentTime;let i=0;const s=e.steps.map(o=>{n.currentTime=r;const a=Vn(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:3,steps:s,options:Xi(e.options)}}visitAnimate(e,n){const r=function EB(t,e){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return sp(wu(t,e).duration,0,"");const n=t;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=sp(0,0,"");return s.dynamic=!0,s.strValue=n,s}const i=wu(n,e);return sp(i.duration,i.delay,i.easing)}(e.timings,n.errors);n.currentAnimateTimings=r;let i,s=e.styles?e.styles:tE({});if(5==s.type)i=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=tE(u)}n.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,n);c.isEmptyStep=a,i=c}return n.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,n){const r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===ti?r.push(a):n.errors.push(new ne(3002,!1)):r.push(gE(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){const r=n.currentAnimateTimings;let i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const u=n.collectedStyles.get(n.currentQuerySelector),l=u.get(c);let d=!0;l&&(s!=i&&s>=l.startTime&&i<=l.endTime&&(n.errors.push(function I2(t,e,n,r,i){return new ne(3010,!1)}()),d=!1),s=l.startTime),d&&u.set(c,{startTime:s,endTime:i}),n.options&&function sB(t,e,n){const r=e.params||{},i=_E(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(function _2(t){return new ne(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(e,n){const r={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function T2(){return new ne(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,u=0;const l=e.steps.map(_=>{const b=this._makeStyleAst(_,n);let E=null!=b.offset?b.offset:function DB(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){const r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}(b.styles),I=0;return null!=E&&(s++,I=b.offset=E),c=c||I<0||I>1,a=a||I<u,u=I,o.push(I),b});c&&n.errors.push(function A2(){return new ne(3012,!1)}()),a&&n.errors.push(function x2(){return new ne(3200,!1)}());const d=e.steps.length;let g=0;s>0&&s<d?n.errors.push(function O2(){return new ne(3202,!1)}()):0==s&&(g=1/(d-1));const f=d-1,p=n.currentTime,v=n.currentAnimateTimings,y=v.duration;return l.forEach((_,b)=>{const E=g>0?b==f?1:g*b:o[b],I=E*y;n.currentTime=p+v.delay+I,v.duration=I,this._validateStyleAst(_,n),_.offset=E,r.styles.push(_)}),r}visitReference(e,n){return{type:8,animation:Vn(this,ma(e.animation),n),options:Xi(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:Xi(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Xi(e.options)}}visitQuery(e,n){const r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;const[s,o]=function yB(t){const e=!!t.split(/\s*,\s*/).find(n=>":self"==n);return e&&(t=t.replace(mB,"")),t=t.replace(/@\*/g,_u).replace(/@\w+/g,n=>_u+"-"+n.slice(1)).replace(/:animating/g,ep),[t,e]}(e.selector);n.currentQuerySelector=r.length?r+" "+s:s,$n(n.collectedStyles,n.currentQuerySelector,new Map);const a=Vn(this,ma(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Xi(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(function P2(){return new ne(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:wu(e.timings,n.errors,!0);return{type:12,animation:Vn(this,ma(e.animation),n),timings:r,options:null}}}class wB{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Xi(t){return t?(t=ga(t)).params&&(t.params=function _B(t){return t?ga(t):null}(t.params)):t={},t}function sp(t,e,n){return{duration:t,delay:e,easing:n}}function op(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Iu{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const SB=new RegExp(":enter","g"),IB=new RegExp(":leave","g");function ap(t,e,n,r,i,s=new Map,o=new Map,a,c,u=[]){return(new TB).buildKeyframes(t,e,n,r,i,s,o,a,c,u)}class TB{buildKeyframes(e,n,r,i,s,o,a,c,u,l=[]){u=u||new Iu;const d=new cp(e,n,u,i,s,l,[]);d.options=c;const g=c.delay?ni(c.delay):0;d.currentTimeline.delayNextStep(g),d.currentTimeline.setStyles([o],null,d.errors,c),Vn(this,r,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let v=f.length-1;v>=0;v--){const y=f[v];if(y.element===n){p=y;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[op(n,[],[],[],0,g,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const r=n.subInstructions.get(n.element);if(r){const i=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){const r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:ni(va(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,n,r){let s=n.currentTimeline.currentTime;const o=null!=r.duration?ni(r.duration):null,a=null!=r.delay?ni(r.delay):null;return 0!==o&&e.forEach(c=>{const u=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),Vn(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const r=n.subContextCount;let i=n;const s=e.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Tu);const o=ni(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Vn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const r=[];let i=n.currentTimeline.currentTime;const s=e.options&&e.options.delay?ni(e.options.delay):0;e.steps.forEach(o=>{const a=n.createSubContext(e.options);s&&a.delayNextStep(s),Vn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const r=e.strValue;return wu(n.params?va(r,n.params,n.errors):r,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=e}visitQuery(e,n){const r=n.currentTimeline.currentTime,i=e.options||{},s=i.delay?ni(i.delay):0;s&&(6===n.previousNode.type||0==r&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Tu);let o=r;const a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((u,l)=>{n.currentQueryIndex=l;const d=n.createSubContext(e.options,u);s&&d.delayNextStep(s),u===n.element&&(c=d.currentTimeline),Vn(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const r=n.parentContext,i=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1);let c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const l=n.currentTimeline;c&&l.delayNextStep(c);const d=l.currentTime;Vn(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const Tu={};class cp{constructor(e,n,r,i,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Tu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Au(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ni(r.duration)),null!=r.delay&&(i.delay=ni(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=va(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){const i=n||this.element,s=new cp(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Tu,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){const i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new AB(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(SB,"."+this._enterClassName)).replace(IB,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function N2(t){return new ne(3014,!1)}()),a}}class Au{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new Au(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||ti),this._currentKeyframe.set(n,ti);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);const s=i&&i.params||{},o=function xB(t,e){const n=new Map;let r;return t.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)n.set(s,ti)}else mi(i,n)}),n}(e,this._globalTimelineStyles);for(let[a,c]of o){const u=va(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ti),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{const i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const u=mi(a,new Map,this._backFill);u.forEach((l,d)=>{"!"===l?e.add(d):l===ti&&n.add(d)}),r||u.set("offset",c/this.duration),i.push(u)});const s=e.size?Du(e.values()):[],o=n.size?Du(n.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return op(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class AB extends Au{constructor(e,n,r,i,s,o,a=!1){super(e,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],o=r+n,a=n/o,c=mi(e[0]);c.set("offset",0),s.push(c);const u=mi(e[0]);u.set("offset",CE(a)),s.push(u);const l=e.length-1;for(let d=1;d<=l;d++){let g=mi(e[d]);const f=g.get("offset");g.set("offset",CE((n+f*r)/o)),s.push(g)}r=o,n=0,i="",e=s}return op(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}function CE(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class up{}const OB=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class PB extends up{normalizePropertyName(e,n){return rp(e)}normalizeStyleValue(e,n,r,i){let s="";const o=r.toString().trim();if(OB.has(n)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function E2(t,e){return new ne(3005,!1)}())}return o+s}}function SE(t,e,n,r,i,s,o,a,c,u,l,d,g){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:l,totalTime:d,errors:g}}const lp={};class ME{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return function NB(t,e,n,r,i){return t.some(s=>s(e,n,r,i))}(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,s,o,a,c,u,l){const d=[],g=this.ast.options&&this.ast.options.params||lp,p=this.buildStyles(r,a&&a.params||lp,d),v=c&&c.params||lp,y=this.buildStyles(i,v,d),_=new Set,b=new Map,E=new Map,I="void"===i,T={params:FB(v,g),delay:this.ast.options?.delay},P=l?[]:ap(e,n,this.ast.animation,s,o,p,y,T,u,d);let U=0;if(P.forEach(G=>{U=Math.max(G.duration+G.delay,U)}),d.length)return SE(n,this._triggerName,r,i,I,p,y,[],[],b,E,U,d);P.forEach(G=>{const de=G.element,pe=$n(b,de,new Set);G.preStyleProps.forEach(xe=>pe.add(xe));const Re=$n(E,de,new Set);G.postStyleProps.forEach(xe=>Re.add(xe)),de!==n&&_.add(de)});const oe=Du(_.values());return SE(n,this._triggerName,r,i,I,p,y,P,oe,b,E,U)}}function FB(t,e){const n=ga(e);for(const r in t)t.hasOwnProperty(r)&&null!=t[r]&&(n[r]=t[r]);return n}class RB{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){const r=new Map,i=ga(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=va(o,i,n));const c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),r.set(a,o)})}),r}}class LB{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{this.states.set(i.name,new RB(i.style,i.options&&i.options.params||{},r))}),IE(this.states,"true","1"),IE(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new ME(e,i,this.states))}),this.fallbackTransition=function BB(t,e,n){return new ME(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(o=>o.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}}function IE(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}const jB=new Iu;class HB{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){const r=[],s=ip(this._driver,n,r,[]);if(r.length)throw function H2(t){return new ne(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,n,r){const i=e.element,s=sE(0,this._normalizer,0,e.keyframes,n,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=ap(this._driver,n,s,Jh,vu,new Map,new Map,r,jB,i),o.forEach(l=>{const d=$n(a,l.element,new Map);l.postStyleProps.forEach(g=>d.set(g,null))})):(i.push(function $2(){return new ne(3300,!1)}()),o=[]),i.length)throw function V2(t){return new ne(3504,!1)}();a.forEach((l,d)=>{l.forEach((g,f)=>{l.set(f,this._driver.computeStyle(d,f,ti))})});const u=gi(o.map(l=>{const d=a.get(l.element);return this._buildPlayer(l,new Map,d)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);const r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){const n=this._playersById.get(e);if(!n)throw function U2(t){return new ne(3301,!1)}();return n}listen(e,n,r,i){const s=Qh(n,"","","");return Gh(this._getPlayer(e),r,s,i),()=>{}}command(e,n,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,n,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const TE="ng-animate-queued",dp="ng-animate-disabled",zB=[],AE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},WB={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},tr="__ng_removed";class fp{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;const r=e&&e.hasOwnProperty("value");if(this.value=function YB(t){return t??null}(r?e.value:e),r){const s=ga(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const n=e.params;if(n){const r=this.options.params;Object.keys(n).forEach(i=>{null==r[i]&&(r[i]=n[i])})}}}const ya="void",hp=new fp(ya);class GB{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,nr(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw function q2(t,e){return new ne(3302,!1)}();if(null==r||0==r.length)throw function z2(t){return new ne(3303,!1)}();if(!function ZB(t){return"start"==t||"done"==t}(r))throw function W2(t,e){return new ne(3400,!1)}();const s=$n(this._elementListeners,e,[]),o={name:n,phase:r,callback:i};s.push(o);const a=$n(this._engine.statesByElement,e,new Map);return a.has(n)||(nr(e,yu),nr(e,yu+"-"+n),a.set(n,hp)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return!this._triggers.has(e)&&(this._triggers.set(e,n),!0)}_getTrigger(e){const n=this._triggers.get(e);if(!n)throw function G2(t){return new ne(3401,!1)}();return n}trigger(e,n,r,i=!0){const s=this._getTrigger(n),o=new pp(this.id,n,e);let a=this._engine.statesByElement.get(e);a||(nr(e,yu),nr(e,yu+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n);const u=new fp(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(n,u),c||(c=hp),u.value!==ya&&c.value===u.value){if(!function ej(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}(c.params,u.params)){const v=[],y=s.matchStyles(c.value,c.params,v),_=s.matchStyles(u.value,u.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{Zi(e,y),Nr(e,_)})}return}const g=$n(this._engine.playersByElement,e,[]);g.forEach(v=>{v.namespaceId==this.id&&v.triggerName==n&&v.queued&&v.destroy()});let f=s.matchTransition(c.value,u.value,e,u.params),p=!1;if(!f){if(!i)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:u,player:o,isFallbackTransition:p}),p||(nr(e,TE),o.onStart(()=>{Zs(e,TE)})),o.onDone(()=>{let v=this.players.indexOf(o);v>=0&&this.players.splice(v,1);const y=this._engine.playersByElement.get(e);if(y){let _=y.indexOf(o);_>=0&&y.splice(_,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){const r=this._engine.driver.query(e,_u,!0);r.forEach(i=>{if(i[tr])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){const l=this.trigger(e,u,ya,i);l&&a.push(l)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),r&&gi(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){const i=new Set;n.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,u=r.get(o)||hp,l=new fp(ya),d=new pp(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:l,player:d,isFallbackTransition:!0})})}}removeNode(e,n){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{const s=e[tr];(!s||s===AE)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){nr(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=Qh(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Gh(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let n=!1;return this._elementListeners.has(e)&&(n=!0),n=!!this._queue.find(r=>r.element===e)||n,n}}class KB{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r){this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){const r=new GB(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){const c=i.get(a);if(c){const u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(n))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}return n}trigger(e,n,r,i){if(xu(n)){const s=this._fetchNamespace(e);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!xu(n))return;const s=n[tr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),nr(e,dp)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Zs(e,dp))}removeNode(e,n,r,i){if(xu(n)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i),r){const o=this.namespacesByHostElement.get(n);o&&o.id!==e&&o.removeNode(n,i)}}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,r,i,s){this.collectedLeaveElements.push(n),n[tr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,r,i,s){return xu(n)?this._fetchNamespace(e).listen(n,r,i,s):()=>{}}_buildInstruction(e,n,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,_u,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,ep,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return gi(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[tr];if(n&&n.setForRemoval){if(e[tr]=AE,n.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(dp)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)nr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],n.length?gi(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function K2(t){return new ne(3402,!1)}()}_flushAnimations(e,n){const r=new Iu,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,l=new Set;this.disabledNodes.forEach(B=>{l.add(B);const q=this.driver.query(B,".ng-animate-queued",!0);for(let ee=0;ee<q.length;ee++)l.add(q[ee])});const d=this.bodyNode,g=Array.from(this.statesByElement.keys()),f=PE(g,this.collectedEnterElements),p=new Map;let v=0;f.forEach((B,q)=>{const ee=Jh+v++;p.set(q,ee),B.forEach(Ie=>nr(Ie,ee))});const y=[],_=new Set,b=new Set;for(let B=0;B<this.collectedLeaveElements.length;B++){const q=this.collectedLeaveElements[B],ee=q[tr];ee&&ee.setForRemoval&&(y.push(q),_.add(q),ee.hasAnimation?this.driver.query(q,".ng-star-inserted",!0).forEach(Ie=>_.add(Ie)):b.add(q))}const E=new Map,I=PE(g,Array.from(_));I.forEach((B,q)=>{const ee=vu+v++;E.set(q,ee),B.forEach(Ie=>nr(Ie,ee))}),e.push(()=>{f.forEach((B,q)=>{const ee=p.get(q);B.forEach(Ie=>Zs(Ie,ee))}),I.forEach((B,q)=>{const ee=E.get(q);B.forEach(Ie=>Zs(Ie,ee))}),y.forEach(B=>{this.processLeaveNode(B)})});const T=[],P=[];for(let B=this._namespaceList.length-1;B>=0;B--)this._namespaceList[B].drainQueuedTransitions(n).forEach(ee=>{const Ie=ee.player,dt=ee.element;if(T.push(Ie),this.collectedEnterElements.length){const S=dt[tr];if(S&&S.setForMove){if(S.previousTriggersValues&&S.previousTriggersValues.has(ee.triggerName)){const O=S.previousTriggersValues.get(ee.triggerName),k=this.statesByElement.get(ee.element);if(k&&k.has(ee.triggerName)){const ge=k.get(ee.triggerName);ge.value=O,k.set(ee.triggerName,ge)}}return void Ie.destroy()}}const be=!d||!this.driver.containsElement(d,dt),Oe=E.get(dt),rt=p.get(dt),$e=this._buildInstruction(ee,r,rt,Oe,be);if($e.errors&&$e.errors.length)return void P.push($e);if(be)return Ie.onStart(()=>Zi(dt,$e.fromStyles)),Ie.onDestroy(()=>Nr(dt,$e.toStyles)),void i.push(Ie);if(ee.isFallbackTransition)return Ie.onStart(()=>Zi(dt,$e.fromStyles)),Ie.onDestroy(()=>Nr(dt,$e.toStyles)),void i.push(Ie);const yt=[];$e.timelines.forEach(S=>{S.stretchStartingKeyframe=!0,this.disabledNodes.has(S.element)||yt.push(S)}),$e.timelines=yt,r.append(dt,$e.timelines),o.push({instruction:$e,player:Ie,element:dt}),$e.queriedElements.forEach(S=>$n(a,S,[]).push(Ie)),$e.preStyleProps.forEach((S,O)=>{if(S.size){let k=c.get(O);k||c.set(O,k=new Set),S.forEach((ge,Ae)=>k.add(Ae))}}),$e.postStyleProps.forEach((S,O)=>{let k=u.get(O);k||u.set(O,k=new Set),S.forEach((ge,Ae)=>k.add(Ae))})});if(P.length){const B=[];P.forEach(q=>{B.push(function Q2(t,e){return new ne(3505,!1)}())}),T.forEach(q=>q.destroy()),this.reportError(B)}const U=new Map,oe=new Map;o.forEach(B=>{const q=B.element;r.has(q)&&(oe.set(q,q),this._beforeAnimationBuild(B.player.namespaceId,B.instruction,U))}),i.forEach(B=>{const q=B.element;this._getPreviousPlayers(q,!1,B.namespaceId,B.triggerName,null).forEach(Ie=>{$n(U,q,[]).push(Ie),Ie.destroy()})});const G=y.filter(B=>FE(B,c,u)),de=new Map;OE(de,this.driver,b,u,ti).forEach(B=>{FE(B,c,u)&&G.push(B)});const Re=new Map;f.forEach((B,q)=>{OE(Re,this.driver,new Set(B),c,"!")}),G.forEach(B=>{const q=de.get(B),ee=Re.get(B);de.set(B,new Map([...Array.from(q?.entries()??[]),...Array.from(ee?.entries()??[])]))});const xe=[],Me=[],Ee={};o.forEach(B=>{const{element:q,player:ee,instruction:Ie}=B;if(r.has(q)){if(l.has(q))return ee.onDestroy(()=>Nr(q,Ie.toStyles)),ee.disabled=!0,ee.overrideTotalTime(Ie.totalTime),void i.push(ee);let dt=Ee;if(oe.size>1){let Oe=q;const rt=[];for(;Oe=Oe.parentNode;){const $e=oe.get(Oe);if($e){dt=$e;break}rt.push(Oe)}rt.forEach($e=>oe.set($e,dt))}const be=this._buildAnimation(ee.namespaceId,Ie,U,s,Re,de);if(ee.setRealPlayer(be),dt===Ee)xe.push(ee);else{const Oe=this.playersByElement.get(dt);Oe&&Oe.length&&(ee.parentPlayer=gi(Oe)),i.push(ee)}}else Zi(q,Ie.fromStyles),ee.onDestroy(()=>Nr(q,Ie.toStyles)),Me.push(ee),l.has(q)&&i.push(ee)}),Me.forEach(B=>{const q=s.get(B.element);if(q&&q.length){const ee=gi(q);B.setRealPlayer(ee)}}),i.forEach(B=>{B.parentPlayer?B.syncPlayerEvents(B.parentPlayer):B.destroy()});for(let B=0;B<y.length;B++){const q=y[B],ee=q[tr];if(Zs(q,vu),ee&&ee.hasAnimation)continue;let Ie=[];if(a.size){let be=a.get(q);be&&be.length&&Ie.push(...be);let Oe=this.driver.query(q,ep,!0);for(let rt=0;rt<Oe.length;rt++){let $e=a.get(Oe[rt]);$e&&$e.length&&Ie.push(...$e)}}const dt=Ie.filter(be=>!be.destroyed);dt.length?XB(this,q,dt):this.processLeaveNode(q)}return y.length=0,xe.forEach(B=>{this.players.push(B),B.onDone(()=>{B.destroy();const q=this.players.indexOf(B);this.players.splice(q,1)}),B.play()}),xe}elementContainsData(e,n){let r=!1;const i=n[tr];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(n)&&(r=!0),this.playersByQueriedElement.has(n)&&(r=!0),this.statesByElement.has(n)&&(r=!0),this._fetchNamespace(e).elementContainsData(n)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,s){let o=[];if(n){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==ya;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,n,r){const s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:n.triggerName;for(const c of n.timelines){const u=c.element,l=u!==s,d=$n(r,u,[]);this._getPreviousPlayers(u,l,o,a,n.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Zi(s,n.fromStyles)}_buildAnimation(e,n,r,i,s,o){const a=n.triggerName,c=n.element,u=[],l=new Set,d=new Set,g=n.timelines.map(p=>{const v=p.element;l.add(v);const y=v[tr];if(y&&y.removedBeforeQueried)return new pa(p.duration,p.delay);const _=v!==c,b=function JB(t){const e=[];return NE(t,e),e}((r.get(v)||zB).map(U=>U.getRealPlayer())).filter(U=>!!U.element&&U.element===v),E=s.get(v),I=o.get(v),T=sE(0,this._normalizer,0,p.keyframes,E,I),P=this._buildPlayer(p,T,b);if(p.subTimeline&&i&&d.add(v),_){const U=new pp(e,a,v);U.setRealPlayer(P),u.push(U)}return P});u.forEach(p=>{$n(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function QB(t,e,n){let r=t.get(e);if(r){if(r.length){const i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}return r}(this.playersByQueriedElement,p.element,p))}),l.forEach(p=>nr(p,pE));const f=gi(g);return f.onDestroy(()=>{l.forEach(p=>Zs(p,pE)),Nr(c,n.toStyles)}),d.forEach(p=>{$n(i,p,[]).push(f)}),f}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new pa(e.duration,e.delay)}}class pp{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new pa,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>Gh(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){$n(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function xu(t){return t&&1===t.nodeType}function xE(t,e){const n=t.style.display;return t.style.display=e??"none",n}function OE(t,e,n,r,i){const s=[];n.forEach(c=>s.push(xE(c)));const o=[];r.forEach((c,u)=>{const l=new Map;c.forEach(d=>{const g=e.computeStyle(u,d,i);l.set(d,g),(!g||0==g.length)&&(u[tr]=WB,o.push(u))}),t.set(u,l)});let a=0;return n.forEach(c=>xE(c,s[a++])),o}function PE(t,e){const n=new Map;if(t.forEach(a=>n.set(a,[])),0==e.length)return n;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const u=a.parentNode;return c=n.has(u)?u:i.has(u)?1:o(u),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&n.get(c).push(a)}),n}function nr(t,e){t.classList?.add(e)}function Zs(t,e){t.classList?.remove(e)}function XB(t,e,n){gi(n).onDone(()=>t.processLeaveNode(e))}function NE(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof rE?NE(r.players,e):e.push(r)}}function FE(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(s=>i.add(s)):e.set(t,r),n.delete(t),!0}class Ou{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new KB(e,n,r),this._timelineEngine=new HB(e,n,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,n,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],l=ip(this._driver,s,c,[]);if(c.length)throw function B2(t,e){return new ne(3404,!1)}();a=function kB(t,e,n){return new LB(t,e,n)}(i,l,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r,i){this._transitionEngine.removeNode(e,n,i||!1,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if("@"==r.charAt(0)){const[s,o]=oE(r);this._timelineEngine.command(s,n,o,i)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,s){if("@"==r.charAt(0)){const[o,a]=oE(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let nj=(()=>{class t{constructor(n,r,i){this._element=n,this._startStyles=r,this._endStyles=i,this._state=0;let s=t.initialStylesByElement.get(n);s||t.initialStylesByElement.set(n,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Nr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nr(this._element,this._initialStyles),this._endStyles&&(Nr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Zi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zi(this._element,this._endStyles),this._endStyles=null),Nr(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function gp(t){let e=null;return t.forEach((n,r)=>{(function rj(t){return"display"===t||"position"===t})(r)&&(e=e||new Map,e.set(r,n))}),e}class RE{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:wE(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const n="start"===e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class ij{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return lE(e,n)}getParentElement(e){return Zh(e)}query(e,n,r){return dE(e,n,r)}computeStyle(e,n,r){return window.getComputedStyle(e)[n]}animate(e,n,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const u=new Map,l=o.filter(f=>f instanceof RE);(function cB(t,e){return 0===t||0===e})(r,i)&&l.forEach(f=>{f.currentSnapshot.forEach((p,v)=>u.set(v,p))});let d=function iB(t){return t.length?t[0]instanceof Map?t:t.map(e=>gE(e)):[]}(n).map(f=>mi(f));d=function uB(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,wE(t,a)))}}return e}(e,d,u);const g=function tj(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=gp(e[0]),e.length>1&&(r=gp(e[e.length-1]))):e instanceof Map&&(n=gp(e)),n||r?new nj(t,n,r):null}(e,d);return new RE(e,d,c,g)}}let sj=(()=>{class t extends JD{constructor(n,r){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(r.body,{id:"0",encapsulation:sr.None,styles:[],data:{animation:[]}})}build(n){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(n)?eE(n):n;return kE(this._renderer,null,r,"register",[i]),new oj(r,this._renderer)}}return t.\u0275fac=function(n){return new(n||t)(Ce(To),Ce(Zt))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();class oj extends m2{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new aj(this._id,e,n||{},this._renderer)}}class aj{constructor(e,n,r,i){this.id=e,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return kE(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function kE(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const LE="@.disabled";let cj=(()=>{class t{constructor(n,r,i){this.delegate=n,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(n,r){const s=this.delegate.createRenderer(n,r);if(!(n&&r&&r.data&&r.data.animation)){let l=this._rendererCache.get(s);return l||(l=new BE("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,l)),l}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const c=l=>{Array.isArray(l)?l.forEach(c):this.engine.registerTrigger(o,a,n,l.name,l)};return r.data.animation.forEach(c),new uj(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,r,i){n>=0&&n<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(n){return new(n||t)(Ce(To),Ce(Ou),Ce(zt))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})();class BE{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>n.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate,r)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){"@"==n.charAt(0)&&n==LE?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class uj extends BE{constructor(e,n,r,i,s){super(n,r,i,s),this.factory=e,this.namespaceId=n}setProperty(e,n,r){"@"==n.charAt(0)?"."==n.charAt(1)&&n==LE?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if("@"==n.charAt(0)){const i=function lj(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(e);let s=n.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function dj(t){const e=t.indexOf(".");return[t.substring(0,e),t.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,n,r)}}const jE=[{provide:JD,useClass:sj},{provide:up,useFactory:function hj(){return new PB}},{provide:Ou,useClass:(()=>{class t extends Ou{constructor(n,r,i,s){super(n.body,r,i)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(n){return new(n||t)(Ce(Zt),Ce(Xh),Ce(up),Ce(zo))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac}),t})()},{provide:To,useFactory:function pj(t,e,n){return new cj(t,e,n)},deps:[Kc,Ou,zt]}],mp=[{provide:Xh,useFactory:()=>new ij},{provide:tw,useValue:"BrowserAnimations"},...jE],HE=[{provide:Xh,useClass:fE},{provide:tw,useValue:"NoopAnimations"},...jE];let gj=(()=>{class t{static withConfig(n){return{ngModule:t,providers:n.disableAnimations?HE:mp}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=vr({type:t}),t.\u0275inj=rr({providers:mp,imports:[d0]}),t})();const qE="cdk-high-contrast-black-on-white",zE="cdk-high-contrast-white-on-black",vp="cdk-high-contrast-active";let Oj=(()=>{class t{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=so(C0).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(n):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(n.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(vp,qE,zE),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?n.add(vp,qE):2===r&&n.add(vp,zE)}}}return t.\u0275fac=function(n){return new(n||t)(Ce(D0),Ce(Zt))},t.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),WE=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=vr({type:t}),t.\u0275inj=rr({}),t})();const Rj=new Se("mat-sanity-checks",{providedIn:"root",factory:function Fj(){return!0}});let QE=(()=>{class t{constructor(n,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!function uF(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}}return t.\u0275fac=function(n){return new(n||t)(Ce(Oj),Ce(Rj,8),Ce(Zt))},t.\u0275mod=vr({type:t}),t.\u0275inj=rr({imports:[WE,WE]}),t})();class Lj{constructor(e,n,r,i=!1){this._renderer=e,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const YE=Yc({passive:!0,capture:!0});class Bj{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=function cF(t){return t.composedPath?t.composedPath()[0]:t.target}(e);n&&this._events.get(e.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,r,i){const s=this._events.get(n);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,YE)})}removeHandler(e,n,r){const i=this._events.get(e);if(!i)return;const s=i.get(n);s&&(s.delete(r),0===s.size&&i.delete(n),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,YE)))}}const ZE={enterDuration:225,exitDuration:150},XE=Yc({passive:!0,capture:!0}),JE=["mousedown","touchstart"],eb=["mouseup","mouseleave","touchend","touchcancel"];class Nu{constructor(e,n,r,i){this._target=e,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=m0(r))}fadeInRipple(e,n,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...ZE,...r.animation};r.centered&&(e=i.left+i.width/2,n=i.top+i.height/2);const o=r.radius||function Hj(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(e,n,i),a=e-i.left,c=n-i.top,u=s.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=a-o+"px",l.style.top=c-o+"px",l.style.height=2*o+"px",l.style.width=2*o+"px",null!=r.color&&(l.style.backgroundColor=r.color),l.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(l);const d=window.getComputedStyle(l),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f||0===i.width&&0===i.height,v=new Lj(this,l,r,p);l.style.transform="scale3d(1, 1, 1)",v.state=0,r.persistent||(this._mostRecentTransientRipple=v);let y=null;return!p&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _=()=>this._finishRippleTransition(v),b=()=>this._destroyRipple(v);l.addEventListener("transitionend",_),l.addEventListener("transitioncancel",b),y={onTransitionEnd:_,onTransitionCancel:b}}),this._activeRipples.set(v,y),(p||!u)&&this._finishRippleTransition(v),v}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,r={...ZE,...e.config.animation};n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=m0(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,JE.forEach(r=>{Nu._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{eb.forEach(n=>{this._triggerElement.addEventListener(n,this,XE)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=function Tj(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function Aj(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(JE.forEach(n=>Nu._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&eb.forEach(n=>e.removeEventListener(n,this,XE)))}}Nu._eventManager=new Bj;let gH=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=vr({type:t}),t.\u0275inj=rr({imports:[QE,QE]}),t})();class eo{}eo.\u0275fac=function(e){return new(e||eo)},eo.\u0275mod=vr({type:eo,bootstrap:[fa]}),eo.\u0275inj=rr({imports:[d0,g2.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"}),gj,gH]}),ON().bootstrapModule(eo).catch(t=>console.error(t))},466:function(ut,Pe,fe){var $;ut.exports=($=fe(585),fe(319),fe(493),fe(865),fe(57),function(){var J=$,H=J.lib.BlockCipher,ye=J.algo,me=[],Ve=[],L=[],se=[],K=[],Y=[],X=[],Q=[],F=[],N=[];!function(){for(var m=[],h=0;h<256;h++)m[h]=h<128?h<<1:h<<1^283;var w=0,D=0;for(h=0;h<256;h++){var R=D^D<<1^D<<2^D<<3^D<<4;me[w]=R=R>>>8^255&R^99,Ve[R]=w;var Ne,j=m[w],he=m[j],W=m[he];L[w]=(Ne=257*m[R]^16843008*R)<<24|Ne>>>8,se[w]=Ne<<16|Ne>>>16,K[w]=Ne<<8|Ne>>>24,Y[w]=Ne,X[R]=(Ne=16843009*W^65537*he^257*j^16843008*w)<<24|Ne>>>8,Q[R]=Ne<<16|Ne>>>16,F[R]=Ne<<8|Ne>>>24,N[R]=Ne,w?(w=j^m[m[m[W^j]]],D^=m[m[D]]):w=D=1}}();var x=[0,1,2,4,8,16,32,64,128,27,54],M=ye.AES=H.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var h=this._keyPriorReset=this._key,w=h.words,D=h.sigBytes/4,j=4*((this._nRounds=D+6)+1),he=this._keySchedule=[],W=0;W<j;W++)W<D?he[W]=w[W]:(m=he[W-1],W%D?D>6&&W%D==4&&(m=me[m>>>24]<<24|me[m>>>16&255]<<16|me[m>>>8&255]<<8|me[255&m]):(m=me[(m=m<<8|m>>>24)>>>24]<<24|me[m>>>16&255]<<16|me[m>>>8&255]<<8|me[255&m],m^=x[W/D|0]<<24),he[W]=he[W-D]^m);for(var Ne=this._invKeySchedule=[],ot=0;ot<j;ot++){if(W=j-ot,ot%4)var m=he[W];else m=he[W-4];Ne[ot]=ot<4||W<=4?m:X[me[m>>>24]]^Q[me[m>>>16&255]]^F[me[m>>>8&255]]^N[me[255&m]]}}},encryptBlock:function(m,h){this._doCryptBlock(m,h,this._keySchedule,L,se,K,Y,me)},decryptBlock:function(m,h){var w=m[h+1];m[h+1]=m[h+3],m[h+3]=w,this._doCryptBlock(m,h,this._invKeySchedule,X,Q,F,N,Ve),w=m[h+1],m[h+1]=m[h+3],m[h+3]=w},_doCryptBlock:function(m,h,w,D,R,j,he,W){for(var Ne=this._nRounds,ot=m[h]^w[0],z=m[h+1]^w[1],ue=m[h+2]^w[2],we=m[h+3]^w[3],le=4,Ye=1;Ye<Ne;Ye++){var Te=D[ot>>>24]^R[z>>>16&255]^j[ue>>>8&255]^he[255&we]^w[le++],Pt=D[z>>>24]^R[ue>>>16&255]^j[we>>>8&255]^he[255&ot]^w[le++],rn=D[ue>>>24]^R[we>>>16&255]^j[ot>>>8&255]^he[255&z]^w[le++],re=D[we>>>24]^R[ot>>>16&255]^j[z>>>8&255]^he[255&ue]^w[le++];ot=Te,z=Pt,ue=rn,we=re}Te=(W[ot>>>24]<<24|W[z>>>16&255]<<16|W[ue>>>8&255]<<8|W[255&we])^w[le++],Pt=(W[z>>>24]<<24|W[ue>>>16&255]<<16|W[we>>>8&255]<<8|W[255&ot])^w[le++],rn=(W[ue>>>24]<<24|W[we>>>16&255]<<16|W[ot>>>8&255]<<8|W[255&z])^w[le++],re=(W[we>>>24]<<24|W[ot>>>16&255]<<16|W[z>>>8&255]<<8|W[255&ue])^w[le++],m[h]=Te,m[h+1]=Pt,m[h+2]=rn,m[h+3]=re},keySize:8});J.AES=H._createHelper(M)}(),$.AES)},57:function(ut,Pe,fe){var ie,H,ye,me,Ve,L,K,X,Q,N,x,M,h,D,j,he,Ne,ot,$;ut.exports=($=fe(585),fe(865),void($.lib.Cipher||(ie=$,H=ie.lib,ye=H.Base,me=H.WordArray,Ve=H.BufferedBlockAlgorithm,L=ie.enc,K=L.Base64,X=ie.algo.EvpKDF,Q=H.Cipher=Ve.extend({cfg:ye.extend(),createEncryptor:function(z,ue){return this.create(this._ENC_XFORM_MODE,z,ue)},createDecryptor:function(z,ue){return this.create(this._DEC_XFORM_MODE,z,ue)},init:function(z,ue,we){this.cfg=this.cfg.extend(we),this._xformMode=z,this._key=ue,this.reset()},reset:function(){Ve.reset.call(this),this._doReset()},process:function(z){return this._append(z),this._process()},finalize:function(z){return z&&this._append(z),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function z(ue){return"string"==typeof ue?ot:he}return function(ue){return{encrypt:function(we,le,Ye){return z(le).encrypt(ue,we,le,Ye)},decrypt:function(we,le,Ye){return z(le).decrypt(ue,we,le,Ye)}}}}()}),H.StreamCipher=Q.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),N=ie.mode={},x=H.BlockCipherMode=ye.extend({createEncryptor:function(z,ue){return this.Encryptor.create(z,ue)},createDecryptor:function(z,ue){return this.Decryptor.create(z,ue)},init:function(z,ue){this._cipher=z,this._iv=ue}}),M=N.CBC=function(){var z=x.extend();function ue(we,le,Ye){var Te,Pt=this._iv;Pt?(Te=Pt,this._iv=undefined):Te=this._prevBlock;for(var rn=0;rn<Ye;rn++)we[le+rn]^=Te[rn]}return z.Encryptor=z.extend({processBlock:function(we,le){var Ye=this._cipher,Te=Ye.blockSize;ue.call(this,we,le,Te),Ye.encryptBlock(we,le),this._prevBlock=we.slice(le,le+Te)}}),z.Decryptor=z.extend({processBlock:function(we,le){var Ye=this._cipher,Te=Ye.blockSize,Pt=we.slice(le,le+Te);Ye.decryptBlock(we,le),ue.call(this,we,le,Te),this._prevBlock=Pt}}),z}(),h=(ie.pad={}).Pkcs7={pad:function(z,ue){for(var we=4*ue,le=we-z.sigBytes%we,Ye=le<<24|le<<16|le<<8|le,Te=[],Pt=0;Pt<le;Pt+=4)Te.push(Ye);var rn=me.create(Te,le);z.concat(rn)},unpad:function(z){z.sigBytes-=255&z.words[z.sigBytes-1>>>2]}},H.BlockCipher=Q.extend({cfg:Q.cfg.extend({mode:M,padding:h}),reset:function(){var z;Q.reset.call(this);var ue=this.cfg,we=ue.iv,le=ue.mode;this._xformMode==this._ENC_XFORM_MODE?z=le.createEncryptor:(z=le.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==z?this._mode.init(this,we&&we.words):(this._mode=z.call(le,this,we&&we.words),this._mode.__creator=z)},_doProcessBlock:function(z,ue){this._mode.processBlock(z,ue)},_doFinalize:function(){var z,ue=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(ue.pad(this._data,this.blockSize),z=this._process(!0)):(z=this._process(!0),ue.unpad(z)),z},blockSize:4}),D=H.CipherParams=ye.extend({init:function(z){this.mixIn(z)},toString:function(z){return(z||this.formatter).stringify(this)}}),j=(ie.format={}).OpenSSL={stringify:function(z){var we=z.ciphertext,le=z.salt;return(le?me.create([1398893684,1701076831]).concat(le).concat(we):we).toString(K)},parse:function(z){var ue,we=K.parse(z),le=we.words;return 1398893684==le[0]&&1701076831==le[1]&&(ue=me.create(le.slice(2,4)),le.splice(0,4),we.sigBytes-=16),D.create({ciphertext:we,salt:ue})}},he=H.SerializableCipher=ye.extend({cfg:ye.extend({format:j}),encrypt:function(z,ue,we,le){le=this.cfg.extend(le);var Ye=z.createEncryptor(we,le),Te=Ye.finalize(ue),Pt=Ye.cfg;return D.create({ciphertext:Te,key:we,iv:Pt.iv,algorithm:z,mode:Pt.mode,padding:Pt.padding,blockSize:z.blockSize,formatter:le.format})},decrypt:function(z,ue,we,le){return le=this.cfg.extend(le),ue=this._parse(ue,le.format),z.createDecryptor(we,le).finalize(ue.ciphertext)},_parse:function(z,ue){return"string"==typeof z?ue.parse(z,this):z}}),Ne=(ie.kdf={}).OpenSSL={execute:function(z,ue,we,le){le||(le=me.random(8));var Ye=X.create({keySize:ue+we}).compute(z,le),Te=me.create(Ye.words.slice(ue),4*we);return Ye.sigBytes=4*ue,D.create({key:Ye,iv:Te,salt:le})}},ot=H.PasswordBasedCipher=he.extend({cfg:he.cfg.extend({kdf:Ne}),encrypt:function(z,ue,we,le){var Ye=(le=this.cfg.extend(le)).kdf.execute(we,z.keySize,z.ivSize);le.iv=Ye.iv;var Te=he.encrypt.call(this,z,ue,Ye.key,le);return Te.mixIn(Ye),Te},decrypt:function(z,ue,we,le){le=this.cfg.extend(le),ue=this._parse(ue,le.format);var Ye=le.kdf.execute(we,z.keySize,z.ivSize,ue.salt);return le.iv=Ye.iv,he.decrypt.call(this,z,ue,Ye.key,le)}}))))},585:function(ut,Pe,fe){var $;ut.exports=($=$||function(J,ie){var H;if(typeof window<"u"&&window.crypto&&(H=window.crypto),typeof self<"u"&&self.crypto&&(H=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(H=globalThis.crypto),!H&&typeof window<"u"&&window.msCrypto&&(H=window.msCrypto),!H&&typeof global<"u"&&global.crypto&&(H=global.crypto),!H)try{H=fe(480)}catch{}var ye=function(){if(H){if("function"==typeof H.getRandomValues)try{return H.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof H.randomBytes)try{return H.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},me=Object.create||function(){function m(){}return function(h){var w;return m.prototype=h,w=new m,m.prototype=null,w}}(),Ve={},L=Ve.lib={},se=L.Base={extend:function(m){var h=me(this);return m&&h.mixIn(m),(!h.hasOwnProperty("init")||this.init===h.init)&&(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var h in m)m.hasOwnProperty(h)&&(this[h]=m[h]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}},K=L.WordArray=se.extend({init:function(m,h){m=this.words=m||[],this.sigBytes=null!=h?h:4*m.length},toString:function(m){return(m||X).stringify(this)},concat:function(m){var h=this.words,w=m.words,D=this.sigBytes,R=m.sigBytes;if(this.clamp(),D%4)for(var j=0;j<R;j++)h[D+j>>>2]|=(w[j>>>2]>>>24-j%4*8&255)<<24-(D+j)%4*8;else for(var W=0;W<R;W+=4)h[D+W>>>2]=w[W>>>2];return this.sigBytes+=R,this},clamp:function(){var m=this.words,h=this.sigBytes;m[h>>>2]&=4294967295<<32-h%4*8,m.length=J.ceil(h/4)},clone:function(){var m=se.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var h=[],w=0;w<m;w+=4)h.push(ye());return new K.init(h,m)}}),Y=Ve.enc={},X=Y.Hex={stringify:function(m){for(var h=m.words,w=m.sigBytes,D=[],R=0;R<w;R++){var j=h[R>>>2]>>>24-R%4*8&255;D.push((j>>>4).toString(16)),D.push((15&j).toString(16))}return D.join("")},parse:function(m){for(var h=m.length,w=[],D=0;D<h;D+=2)w[D>>>3]|=parseInt(m.substr(D,2),16)<<24-D%8*4;return new K.init(w,h/2)}},Q=Y.Latin1={stringify:function(m){for(var h=m.words,w=m.sigBytes,D=[],R=0;R<w;R++)D.push(String.fromCharCode(h[R>>>2]>>>24-R%4*8&255));return D.join("")},parse:function(m){for(var h=m.length,w=[],D=0;D<h;D++)w[D>>>2]|=(255&m.charCodeAt(D))<<24-D%4*8;return new K.init(w,h)}},F=Y.Utf8={stringify:function(m){try{return decodeURIComponent(escape(Q.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return Q.parse(unescape(encodeURIComponent(m)))}},N=L.BufferedBlockAlgorithm=se.extend({reset:function(){this._data=new K.init,this._nDataBytes=0},_append:function(m){"string"==typeof m&&(m=F.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var h,w=this._data,D=w.words,R=w.sigBytes,j=this.blockSize,W=R/(4*j),Ne=(W=m?J.ceil(W):J.max((0|W)-this._minBufferSize,0))*j,ot=J.min(4*Ne,R);if(Ne){for(var z=0;z<Ne;z+=j)this._doProcessBlock(D,z);h=D.splice(0,Ne),w.sigBytes-=ot}return new K.init(h,ot)},clone:function(){var m=se.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0}),M=(L.Hasher=N.extend({cfg:se.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){N.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){return m&&this._append(m),this._doFinalize()},blockSize:16,_createHelper:function(m){return function(h,w){return new m.init(w).finalize(h)}},_createHmacHelper:function(m){return function(h,w){return new M.HMAC.init(m,w).finalize(h)}}}),Ve.algo={});return Ve}(Math),$)},319:function(ut,Pe,fe){var $,H;ut.exports=($=fe(585),H=$.lib.WordArray,$.enc.Base64={stringify:function(L){var se=L.words,K=L.sigBytes,Y=this._map;L.clamp();for(var X=[],Q=0;Q<K;Q+=3)for(var M=(se[Q>>>2]>>>24-Q%4*8&255)<<16|(se[Q+1>>>2]>>>24-(Q+1)%4*8&255)<<8|se[Q+2>>>2]>>>24-(Q+2)%4*8&255,m=0;m<4&&Q+.75*m<K;m++)X.push(Y.charAt(M>>>6*(3-m)&63));var h=Y.charAt(64);if(h)for(;X.length%4;)X.push(h);return X.join("")},parse:function(L){var se=L.length,K=this._map,Y=this._reverseMap;if(!Y){Y=this._reverseMap=[];for(var X=0;X<K.length;X++)Y[K.charCodeAt(X)]=X}var Q=K.charAt(64);if(Q){var F=L.indexOf(Q);-1!==F&&(se=F)}return function Ve(L,se,K){for(var Y=[],X=0,Q=0;Q<se;Q++)if(Q%4){var F=K[L.charCodeAt(Q-1)]<<Q%4*2,N=K[L.charCodeAt(Q)]>>>6-Q%4*2;Y[X>>>2]|=(F|N)<<24-X%4*8,X++}return H.create(Y,X)}(L,se,Y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},$.enc.Base64)},384:function(ut,Pe,fe){ut.exports=fe(585).enc.Utf8},865:function(ut,Pe,fe){var J,ie,H,ye,me,L,$;ut.exports=($=fe(585),fe(162),fe(764),ye=(ie=(J=$).lib).WordArray,L=(me=J.algo).EvpKDF=(H=ie.Base).extend({cfg:H.extend({keySize:4,hasher:me.MD5,iterations:1}),init:function(se){this.cfg=this.cfg.extend(se)},compute:function(se,K){for(var Y,X=this.cfg,Q=X.hasher.create(),F=ye.create(),N=F.words,x=X.keySize,M=X.iterations;N.length<x;){Y&&Q.update(Y),Y=Q.update(se).finalize(K),Q.reset();for(var m=1;m<M;m++)Y=Q.finalize(Y),Q.reset();F.concat(Y)}return F.sigBytes=4*x,F}}),J.EvpKDF=function(se,K,Y){return L.create(Y).compute(se,K)},$.EvpKDF)},764:function(ut,Pe,fe){var $,me;ut.exports=($=fe(585),me=$.enc.Utf8,void($.algo.HMAC=$.lib.Base.extend({init:function(se,K){se=this._hasher=new se.init,"string"==typeof K&&(K=me.parse(K));var Y=se.blockSize,X=4*Y;K.sigBytes>X&&(K=se.finalize(K)),K.clamp();for(var Q=this._oKey=K.clone(),F=this._iKey=K.clone(),N=Q.words,x=F.words,M=0;M<Y;M++)N[M]^=1549556828,x[M]^=909522486;Q.sigBytes=F.sigBytes=X,this.reset()},reset:function(){var se=this._hasher;se.reset(),se.update(this._iKey)},update:function(se){return this._hasher.update(se),this},finalize:function(se){var K=this._hasher,Y=K.finalize(se);return K.reset(),K.finalize(this._oKey.clone().concat(Y))}})))},493:function(ut,Pe,fe){var $;ut.exports=($=fe(585),function(J){var ie=$,H=ie.lib,ye=H.WordArray,me=H.Hasher,Ve=ie.algo,L=[];!function(){for(var F=0;F<64;F++)L[F]=4294967296*J.abs(J.sin(F+1))|0}();var se=Ve.MD5=me.extend({_doReset:function(){this._hash=new ye.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(F,N){for(var x=0;x<16;x++){var M=N+x,m=F[M];F[M]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8)}var h=this._hash.words,w=F[N+0],D=F[N+1],R=F[N+2],j=F[N+3],he=F[N+4],W=F[N+5],Ne=F[N+6],ot=F[N+7],z=F[N+8],ue=F[N+9],we=F[N+10],le=F[N+11],Ye=F[N+12],Te=F[N+13],Pt=F[N+14],rn=F[N+15],re=h[0],ce=h[1],te=h[2],ae=h[3];re=K(re,ce,te,ae,w,7,L[0]),ae=K(ae,re,ce,te,D,12,L[1]),te=K(te,ae,re,ce,R,17,L[2]),ce=K(ce,te,ae,re,j,22,L[3]),re=K(re,ce,te,ae,he,7,L[4]),ae=K(ae,re,ce,te,W,12,L[5]),te=K(te,ae,re,ce,Ne,17,L[6]),ce=K(ce,te,ae,re,ot,22,L[7]),re=K(re,ce,te,ae,z,7,L[8]),ae=K(ae,re,ce,te,ue,12,L[9]),te=K(te,ae,re,ce,we,17,L[10]),ce=K(ce,te,ae,re,le,22,L[11]),re=K(re,ce,te,ae,Ye,7,L[12]),ae=K(ae,re,ce,te,Te,12,L[13]),te=K(te,ae,re,ce,Pt,17,L[14]),re=Y(re,ce=K(ce,te,ae,re,rn,22,L[15]),te,ae,D,5,L[16]),ae=Y(ae,re,ce,te,Ne,9,L[17]),te=Y(te,ae,re,ce,le,14,L[18]),ce=Y(ce,te,ae,re,w,20,L[19]),re=Y(re,ce,te,ae,W,5,L[20]),ae=Y(ae,re,ce,te,we,9,L[21]),te=Y(te,ae,re,ce,rn,14,L[22]),ce=Y(ce,te,ae,re,he,20,L[23]),re=Y(re,ce,te,ae,ue,5,L[24]),ae=Y(ae,re,ce,te,Pt,9,L[25]),te=Y(te,ae,re,ce,j,14,L[26]),ce=Y(ce,te,ae,re,z,20,L[27]),re=Y(re,ce,te,ae,Te,5,L[28]),ae=Y(ae,re,ce,te,R,9,L[29]),te=Y(te,ae,re,ce,ot,14,L[30]),re=X(re,ce=Y(ce,te,ae,re,Ye,20,L[31]),te,ae,W,4,L[32]),ae=X(ae,re,ce,te,z,11,L[33]),te=X(te,ae,re,ce,le,16,L[34]),ce=X(ce,te,ae,re,Pt,23,L[35]),re=X(re,ce,te,ae,D,4,L[36]),ae=X(ae,re,ce,te,he,11,L[37]),te=X(te,ae,re,ce,ot,16,L[38]),ce=X(ce,te,ae,re,we,23,L[39]),re=X(re,ce,te,ae,Te,4,L[40]),ae=X(ae,re,ce,te,w,11,L[41]),te=X(te,ae,re,ce,j,16,L[42]),ce=X(ce,te,ae,re,Ne,23,L[43]),re=X(re,ce,te,ae,ue,4,L[44]),ae=X(ae,re,ce,te,Ye,11,L[45]),te=X(te,ae,re,ce,rn,16,L[46]),re=Q(re,ce=X(ce,te,ae,re,R,23,L[47]),te,ae,w,6,L[48]),ae=Q(ae,re,ce,te,ot,10,L[49]),te=Q(te,ae,re,ce,Pt,15,L[50]),ce=Q(ce,te,ae,re,W,21,L[51]),re=Q(re,ce,te,ae,Ye,6,L[52]),ae=Q(ae,re,ce,te,j,10,L[53]),te=Q(te,ae,re,ce,we,15,L[54]),ce=Q(ce,te,ae,re,D,21,L[55]),re=Q(re,ce,te,ae,z,6,L[56]),ae=Q(ae,re,ce,te,rn,10,L[57]),te=Q(te,ae,re,ce,Ne,15,L[58]),ce=Q(ce,te,ae,re,Te,21,L[59]),re=Q(re,ce,te,ae,he,6,L[60]),ae=Q(ae,re,ce,te,le,10,L[61]),te=Q(te,ae,re,ce,R,15,L[62]),ce=Q(ce,te,ae,re,ue,21,L[63]),h[0]=h[0]+re|0,h[1]=h[1]+ce|0,h[2]=h[2]+te|0,h[3]=h[3]+ae|0},_doFinalize:function(){var F=this._data,N=F.words,x=8*this._nDataBytes,M=8*F.sigBytes;N[M>>>5]|=128<<24-M%32;var m=J.floor(x/4294967296),h=x;N[15+(M+64>>>9<<4)]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),N[14+(M+64>>>9<<4)]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),F.sigBytes=4*(N.length+1),this._process();for(var w=this._hash,D=w.words,R=0;R<4;R++){var j=D[R];D[R]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8)}return w},clone:function(){var F=me.clone.call(this);return F._hash=this._hash.clone(),F}});function K(F,N,x,M,m,h,w){var D=F+(N&x|~N&M)+m+w;return(D<<h|D>>>32-h)+N}function Y(F,N,x,M,m,h,w){var D=F+(N&M|x&~M)+m+w;return(D<<h|D>>>32-h)+N}function X(F,N,x,M,m,h,w){var D=F+(N^x^M)+m+w;return(D<<h|D>>>32-h)+N}function Q(F,N,x,M,m,h,w){var D=F+(x^(N|~M))+m+w;return(D<<h|D>>>32-h)+N}ie.MD5=me._createHelper(se),ie.HmacMD5=me._createHmacHelper(se)}(Math),$.MD5)},162:function(ut,Pe,fe){var J,ie,H,ye,Ve,L,$;ut.exports=($=fe(585),H=(ie=(J=$).lib).WordArray,Ve=[],L=J.algo.SHA1=(ye=ie.Hasher).extend({_doReset:function(){this._hash=new H.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(se,K){for(var Y=this._hash.words,X=Y[0],Q=Y[1],F=Y[2],N=Y[3],x=Y[4],M=0;M<80;M++){if(M<16)Ve[M]=0|se[K+M];else{var m=Ve[M-3]^Ve[M-8]^Ve[M-14]^Ve[M-16];Ve[M]=m<<1|m>>>31}var h=(X<<5|X>>>27)+x+Ve[M];h+=M<20?1518500249+(Q&F|~Q&N):M<40?1859775393+(Q^F^N):M<60?(Q&F|Q&N|F&N)-1894007588:(Q^F^N)-899497514,x=N,N=F,F=Q<<30|Q>>>2,Q=X,X=h}Y[0]=Y[0]+X|0,Y[1]=Y[1]+Q|0,Y[2]=Y[2]+F|0,Y[3]=Y[3]+N|0,Y[4]=Y[4]+x|0},_doFinalize:function(){var se=this._data,K=se.words,Y=8*this._nDataBytes,X=8*se.sigBytes;return K[X>>>5]|=128<<24-X%32,K[14+(X+64>>>9<<4)]=Math.floor(Y/4294967296),K[15+(X+64>>>9<<4)]=Y,se.sigBytes=4*K.length,this._process(),this._hash},clone:function(){var se=ye.clone.call(this);return se._hash=this._hash.clone(),se}}),J.SHA1=ye._createHelper(L),J.HmacSHA1=ye._createHmacHelper(L),$.SHA1)},817:function(ut,Pe,fe){var $;ut.exports=($=fe(585),function(J){var ie=$,H=ie.lib,ye=H.WordArray,me=H.Hasher,Ve=ie.algo,L=[],se=[];!function(){function X(x){for(var M=J.sqrt(x),m=2;m<=M;m++)if(!(x%m))return!1;return!0}function Q(x){return 4294967296*(x-(0|x))|0}for(var F=2,N=0;N<64;)X(F)&&(N<8&&(L[N]=Q(J.pow(F,.5))),se[N]=Q(J.pow(F,1/3)),N++),F++}();var K=[],Y=Ve.SHA256=me.extend({_doReset:function(){this._hash=new ye.init(L.slice(0))},_doProcessBlock:function(X,Q){for(var F=this._hash.words,N=F[0],x=F[1],M=F[2],m=F[3],h=F[4],w=F[5],D=F[6],R=F[7],j=0;j<64;j++){if(j<16)K[j]=0|X[Q+j];else{var he=K[j-15],Ne=K[j-2];K[j]=((he<<25|he>>>7)^(he<<14|he>>>18)^he>>>3)+K[j-7]+((Ne<<15|Ne>>>17)^(Ne<<13|Ne>>>19)^Ne>>>10)+K[j-16]}var ue=N&x^N&M^x&M,Ye=R+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&w^~h&D)+se[j]+K[j];R=D,D=w,w=h,h=m+Ye|0,m=M,M=x,x=N,N=Ye+(((N<<30|N>>>2)^(N<<19|N>>>13)^(N<<10|N>>>22))+ue)|0}F[0]=F[0]+N|0,F[1]=F[1]+x|0,F[2]=F[2]+M|0,F[3]=F[3]+m|0,F[4]=F[4]+h|0,F[5]=F[5]+w|0,F[6]=F[6]+D|0,F[7]=F[7]+R|0},_doFinalize:function(){var X=this._data,Q=X.words,F=8*this._nDataBytes,N=8*X.sigBytes;return Q[N>>>5]|=128<<24-N%32,Q[14+(N+64>>>9<<4)]=J.floor(F/4294967296),Q[15+(N+64>>>9<<4)]=F,X.sigBytes=4*Q.length,this._process(),this._hash},clone:function(){var X=me.clone.call(this);return X._hash=this._hash.clone(),X}});ie.SHA256=me._createHelper(Y),ie.HmacSHA256=me._createHmacHelper(Y)}(Math),$.SHA256)},69:ut=>{"use strict";var $,Pe="object"==typeof Reflect?Reflect:null,fe=Pe&&"function"==typeof Pe.apply?Pe.apply:function(w,D,R){return Function.prototype.apply.call(w,D,R)};$=Pe&&"function"==typeof Pe.ownKeys?Pe.ownKeys:Object.getOwnPropertySymbols?function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:function(w){return Object.getOwnPropertyNames(w)};var ie=Number.isNaN||function(w){return w!=w};function H(){H.init.call(this)}ut.exports=H,ut.exports.once=function x(h,w){return new Promise(function(D,R){function j(W){h.removeListener(w,he),R(W)}function he(){"function"==typeof h.removeListener&&h.removeListener("error",j),D([].slice.call(arguments))}m(h,w,he,{once:!0}),"error"!==w&&function M(h,w,D){"function"==typeof h.on&&m(h,"error",w,D)}(h,j,{once:!0})})},H.EventEmitter=H,H.prototype._events=void 0,H.prototype._eventsCount=0,H.prototype._maxListeners=void 0;var ye=10;function me(h){if("function"!=typeof h)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}function Ve(h){return void 0===h._maxListeners?H.defaultMaxListeners:h._maxListeners}function L(h,w,D,R){var j,he,W;if(me(D),void 0===(he=h._events)?(he=h._events=Object.create(null),h._eventsCount=0):(void 0!==he.newListener&&(h.emit("newListener",w,D.listener?D.listener:D),he=h._events),W=he[w]),void 0===W)W=he[w]=D,++h._eventsCount;else if("function"==typeof W?W=he[w]=R?[D,W]:[W,D]:R?W.unshift(D):W.push(D),(j=Ve(h))>0&&W.length>j&&!W.warned){W.warned=!0;var Ne=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ne.name="MaxListenersExceededWarning",Ne.emitter=h,Ne.type=w,Ne.count=W.length,function J(h){console&&console.warn&&console.warn(h)}(Ne)}return h}function se(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function K(h,w,D){var R={fired:!1,wrapFn:void 0,target:h,type:w,listener:D},j=se.bind(R);return j.listener=D,R.wrapFn=j,j}function Y(h,w,D){var R=h._events;if(void 0===R)return[];var j=R[w];return void 0===j?[]:"function"==typeof j?D?[j.listener||j]:[j]:D?function N(h){for(var w=new Array(h.length),D=0;D<w.length;++D)w[D]=h[D].listener||h[D];return w}(j):Q(j,j.length)}function X(h){var w=this._events;if(void 0!==w){var D=w[h];if("function"==typeof D)return 1;if(void 0!==D)return D.length}return 0}function Q(h,w){for(var D=new Array(w),R=0;R<w;++R)D[R]=h[R];return D}function m(h,w,D,R){if("function"==typeof h.on)R.once?h.once(w,D):h.on(w,D);else{if("function"!=typeof h.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof h);h.addEventListener(w,function j(he){R.once&&h.removeEventListener(w,j),D(he)})}}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return ye},set:function(h){if("number"!=typeof h||h<0||ie(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");ye=h}}),H.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},H.prototype.setMaxListeners=function(w){if("number"!=typeof w||w<0||ie(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this},H.prototype.getMaxListeners=function(){return Ve(this)},H.prototype.emit=function(w){for(var D=[],R=1;R<arguments.length;R++)D.push(arguments[R]);var j="error"===w,he=this._events;if(void 0!==he)j=j&&void 0===he.error;else if(!j)return!1;if(j){var W;if(D.length>0&&(W=D[0]),W instanceof Error)throw W;var Ne=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw Ne.context=W,Ne}var ot=he[w];if(void 0===ot)return!1;if("function"==typeof ot)fe(ot,this,D);else{var z=ot.length,ue=Q(ot,z);for(R=0;R<z;++R)fe(ue[R],this,D)}return!0},H.prototype.on=H.prototype.addListener=function(w,D){return L(this,w,D,!1)},H.prototype.prependListener=function(w,D){return L(this,w,D,!0)},H.prototype.once=function(w,D){return me(D),this.on(w,K(this,w,D)),this},H.prototype.prependOnceListener=function(w,D){return me(D),this.prependListener(w,K(this,w,D)),this},H.prototype.off=H.prototype.removeListener=function(w,D){var R,j,he,W,Ne;if(me(D),void 0===(j=this._events))return this;if(void 0===(R=j[w]))return this;if(R===D||R.listener===D)0==--this._eventsCount?this._events=Object.create(null):(delete j[w],j.removeListener&&this.emit("removeListener",w,R.listener||D));else if("function"!=typeof R){for(he=-1,W=R.length-1;W>=0;W--)if(R[W]===D||R[W].listener===D){Ne=R[W].listener,he=W;break}if(he<0)return this;0===he?R.shift():function F(h,w){for(;w+1<h.length;w++)h[w]=h[w+1];h.pop()}(R,he),1===R.length&&(j[w]=R[0]),void 0!==j.removeListener&&this.emit("removeListener",w,Ne||D)}return this},H.prototype.removeAllListeners=function(w){var D,R,j;if(void 0===(R=this._events))return this;if(void 0===R.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==R[w]&&(0==--this._eventsCount?this._events=Object.create(null):delete R[w]),this;if(0===arguments.length){var W,he=Object.keys(R);for(j=0;j<he.length;++j)"removeListener"!==(W=he[j])&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(D=R[w]))this.removeListener(w,D);else if(void 0!==D)for(j=D.length-1;j>=0;j--)this.removeListener(w,D[j]);return this},H.prototype.listeners=function(w){return Y(this,w,!0)},H.prototype.rawListeners=function(w){return Y(this,w,!1)},H.listenerCount=function(h,w){return"function"==typeof h.listenerCount?h.listenerCount(w):X.call(h,w)},H.prototype.listenerCount=X,H.prototype.eventNames=function(){return this._eventsCount>0?$(this._events):[]}},294:(ut,Pe,fe)=>{"use strict";var J,ie,$=[fe(525),fe(814),fe(607),fe(628),fe(683),fe(710)],H=-1,ye=[],me=!1;function Ve(){!J||!ie||(J=!1,ie.length?ye=ie.concat(ye):H=-1,ye.length&&L())}function L(){if(!J){me=!1,J=!0;for(var F=ye.length,N=setTimeout(Ve);F;){for(ie=ye,ye=[];ie&&++H<F;)ie[H].run();H=-1,F=ye.length}ie=null,H=-1,J=!1,clearTimeout(N)}}for(var se,K=-1,Y=$.length;++K<Y;)if($[K]&&$[K].test&&$[K].test()){se=$[K].install(L);break}function X(F,N){this.fun=F,this.array=N}X.prototype.run=function(){var F=this.fun,N=this.array;switch(N.length){case 0:return F();case 1:return F(N[0]);case 2:return F(N[0],N[1]);case 3:return F(N[0],N[1],N[2]);default:return F.apply(null,N)}},ut.exports=function Q(F){var N=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)N[x-1]=arguments[x];ye.push(new X(F,N)),!me&&!J&&(me=!0,se())}},628:(ut,Pe)=>{"use strict";Pe.test=function(){return!global.setImmediate&&typeof global.MessageChannel<"u"},Pe.install=function(fe){var $=new global.MessageChannel;return $.port1.onmessage=fe,function(){$.port2.postMessage(0)}}},607:(ut,Pe)=>{"use strict";var fe=global.MutationObserver||global.WebKitMutationObserver;Pe.test=function(){return fe},Pe.install=function($){var J=0,ie=new fe($),H=global.document.createTextNode("");return ie.observe(H,{characterData:!0}),function(){H.data=J=++J%2}}},814:(ut,Pe)=>{"use strict";Pe.test=function(){return"function"==typeof global.queueMicrotask},Pe.install=function(fe){return function(){global.queueMicrotask(fe)}}},683:(ut,Pe)=>{"use strict";Pe.test=function(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")},Pe.install=function(fe){return function(){var $=global.document.createElement("script");return $.onreadystatechange=function(){fe(),$.onreadystatechange=null,$.parentNode.removeChild($),$=null},global.document.documentElement.appendChild($),fe}}},710:(ut,Pe)=>{"use strict";Pe.test=function(){return!0},Pe.install=function(fe){return function(){setTimeout(fe,0)}}},452:ut=>{ut.exports=function(Pe){"use strict";var $=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function ie(x,M){var m=x[0],h=x[1],w=x[2],D=x[3];h=((h+=((w=((w+=((D=((D+=((m=((m+=(h&w|~h&D)+M[0]-680876936|0)<<7|m>>>25)+h|0)&h|~m&w)+M[1]-389564586|0)<<12|D>>>20)+m|0)&m|~D&h)+M[2]+606105819|0)<<17|w>>>15)+D|0)&D|~w&m)+M[3]-1044525330|0)<<22|h>>>10)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h&w|~h&D)+M[4]-176418897|0)<<7|m>>>25)+h|0)&h|~m&w)+M[5]+1200080426|0)<<12|D>>>20)+m|0)&m|~D&h)+M[6]-1473231341|0)<<17|w>>>15)+D|0)&D|~w&m)+M[7]-45705983|0)<<22|h>>>10)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h&w|~h&D)+M[8]+1770035416|0)<<7|m>>>25)+h|0)&h|~m&w)+M[9]-1958414417|0)<<12|D>>>20)+m|0)&m|~D&h)+M[10]-42063|0)<<17|w>>>15)+D|0)&D|~w&m)+M[11]-1990404162|0)<<22|h>>>10)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h&w|~h&D)+M[12]+1804603682|0)<<7|m>>>25)+h|0)&h|~m&w)+M[13]-40341101|0)<<12|D>>>20)+m|0)&m|~D&h)+M[14]-1502002290|0)<<17|w>>>15)+D|0)&D|~w&m)+M[15]+1236535329|0)<<22|h>>>10)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h&D|w&~D)+M[1]-165796510|0)<<5|m>>>27)+h|0)&w|h&~w)+M[6]-1069501632|0)<<9|D>>>23)+m|0)&h|m&~h)+M[11]+643717713|0)<<14|w>>>18)+D|0)&m|D&~m)+M[0]-373897302|0)<<20|h>>>12)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h&D|w&~D)+M[5]-701558691|0)<<5|m>>>27)+h|0)&w|h&~w)+M[10]+38016083|0)<<9|D>>>23)+m|0)&h|m&~h)+M[15]-660478335|0)<<14|w>>>18)+D|0)&m|D&~m)+M[4]-405537848|0)<<20|h>>>12)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h&D|w&~D)+M[9]+568446438|0)<<5|m>>>27)+h|0)&w|h&~w)+M[14]-1019803690|0)<<9|D>>>23)+m|0)&h|m&~h)+M[3]-187363961|0)<<14|w>>>18)+D|0)&m|D&~m)+M[8]+1163531501|0)<<20|h>>>12)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h&D|w&~D)+M[13]-1444681467|0)<<5|m>>>27)+h|0)&w|h&~w)+M[2]-51403784|0)<<9|D>>>23)+m|0)&h|m&~h)+M[7]+1735328473|0)<<14|w>>>18)+D|0)&m|D&~m)+M[12]-1926607734|0)<<20|h>>>12)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h^w^D)+M[5]-378558|0)<<4|m>>>28)+h|0)^h^w)+M[8]-2022574463|0)<<11|D>>>21)+m|0)^m^h)+M[11]+1839030562|0)<<16|w>>>16)+D|0)^D^m)+M[14]-35309556|0)<<23|h>>>9)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h^w^D)+M[1]-1530992060|0)<<4|m>>>28)+h|0)^h^w)+M[4]+1272893353|0)<<11|D>>>21)+m|0)^m^h)+M[7]-155497632|0)<<16|w>>>16)+D|0)^D^m)+M[10]-1094730640|0)<<23|h>>>9)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h^w^D)+M[13]+681279174|0)<<4|m>>>28)+h|0)^h^w)+M[0]-358537222|0)<<11|D>>>21)+m|0)^m^h)+M[3]-722521979|0)<<16|w>>>16)+D|0)^D^m)+M[6]+76029189|0)<<23|h>>>9)+w|0,h=((h+=((w=((w+=((D=((D+=((m=((m+=(h^w^D)+M[9]-640364487|0)<<4|m>>>28)+h|0)^h^w)+M[12]-421815835|0)<<11|D>>>21)+m|0)^m^h)+M[15]+530742520|0)<<16|w>>>16)+D|0)^D^m)+M[2]-995338651|0)<<23|h>>>9)+w|0,h=((h+=((D=((D+=(h^((m=((m+=(w^(h|~D))+M[0]-198630844|0)<<6|m>>>26)+h|0)|~w))+M[7]+1126891415|0)<<10|D>>>22)+m|0)^((w=((w+=(m^(D|~h))+M[14]-1416354905|0)<<15|w>>>17)+D|0)|~m))+M[5]-57434055|0)<<21|h>>>11)+w|0,h=((h+=((D=((D+=(h^((m=((m+=(w^(h|~D))+M[12]+1700485571|0)<<6|m>>>26)+h|0)|~w))+M[3]-1894986606|0)<<10|D>>>22)+m|0)^((w=((w+=(m^(D|~h))+M[10]-1051523|0)<<15|w>>>17)+D|0)|~m))+M[1]-2054922799|0)<<21|h>>>11)+w|0,h=((h+=((D=((D+=(h^((m=((m+=(w^(h|~D))+M[8]+1873313359|0)<<6|m>>>26)+h|0)|~w))+M[15]-30611744|0)<<10|D>>>22)+m|0)^((w=((w+=(m^(D|~h))+M[6]-1560198380|0)<<15|w>>>17)+D|0)|~m))+M[13]+1309151649|0)<<21|h>>>11)+w|0,h=((h+=((D=((D+=(h^((m=((m+=(w^(h|~D))+M[4]-145523070|0)<<6|m>>>26)+h|0)|~w))+M[11]-1120210379|0)<<10|D>>>22)+m|0)^((w=((w+=(m^(D|~h))+M[2]+718787259|0)<<15|w>>>17)+D|0)|~m))+M[9]-343485551|0)<<21|h>>>11)+w|0,x[0]=m+x[0]|0,x[1]=h+x[1]|0,x[2]=w+x[2]|0,x[3]=D+x[3]|0}function H(x){var m,M=[];for(m=0;m<64;m+=4)M[m>>2]=x.charCodeAt(m)+(x.charCodeAt(m+1)<<8)+(x.charCodeAt(m+2)<<16)+(x.charCodeAt(m+3)<<24);return M}function ye(x){var m,M=[];for(m=0;m<64;m+=4)M[m>>2]=x[m]+(x[m+1]<<8)+(x[m+2]<<16)+(x[m+3]<<24);return M}function me(x){var h,w,D,R,j,he,M=x.length,m=[1732584193,-271733879,-1732584194,271733878];for(h=64;h<=M;h+=64)ie(m,H(x.substring(h-64,h)));for(w=(x=x.substring(h-64)).length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<w;h+=1)D[h>>2]|=x.charCodeAt(h)<<(h%4<<3);if(D[h>>2]|=128<<(h%4<<3),h>55)for(ie(m,D),h=0;h<16;h+=1)D[h]=0;return R=(R=8*M).toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(R[2],16),he=parseInt(R[1],16)||0,D[14]=j,D[15]=he,ie(m,D),m}function L(x){var m,M="";for(m=0;m<4;m+=1)M+=$[x>>8*m+4&15]+$[x>>8*m&15];return M}function se(x){var M;for(M=0;M<x.length;M+=1)x[M]=L(x[M]);return x.join("")}function K(x){return/[\u0080-\uFFFF]/.test(x)&&(x=unescape(encodeURIComponent(x))),x}function F(x){var h,M=[],m=x.length;for(h=0;h<m-1;h+=2)M.push(parseInt(x.substr(h,2),16));return String.fromCharCode.apply(String,M)}function N(){this.reset()}return se(me("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function x(M,m){return(M=0|M||0)<0?Math.max(M+m,0):Math.min(M,m)}ArrayBuffer.prototype.slice=function(M,m){var R,j,he,W,h=this.byteLength,w=x(M,h),D=h;return undefined!==m&&(D=x(m,h)),w>D?new ArrayBuffer(0):(R=D-w,j=new ArrayBuffer(R),he=new Uint8Array(j),W=new Uint8Array(this,w,R),he.set(W),j)}}(),N.prototype.append=function(x){return this.appendBinary(K(x)),this},N.prototype.appendBinary=function(x){this._buff+=x,this._length+=x.length;var m,M=this._buff.length;for(m=64;m<=M;m+=64)ie(this._hash,H(this._buff.substring(m-64,m)));return this._buff=this._buff.substring(m-64),this},N.prototype.end=function(x){var h,D,M=this._buff,m=M.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(h=0;h<m;h+=1)w[h>>2]|=M.charCodeAt(h)<<(h%4<<3);return this._finish(w,m),D=se(this._hash),x&&(D=F(D)),this.reset(),D},N.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},N.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},N.prototype.setState=function(x){return this._buff=x.buff,this._length=x.length,this._hash=x.hash,this},N.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},N.prototype._finish=function(x,M){var h,w,D,m=M;if(x[m>>2]|=128<<(m%4<<3),m>55)for(ie(this._hash,x),m=0;m<16;m+=1)x[m]=0;h=(h=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),w=parseInt(h[2],16),D=parseInt(h[1],16)||0,x[14]=w,x[15]=D,ie(this._hash,x)},N.hash=function(x,M){return N.hashBinary(K(x),M)},N.hashBinary=function(x,M){var h=se(me(x));return M?F(h):h},(N.ArrayBuffer=function(){this.reset()}).prototype.append=function(x){var h,M=function Q(x,M,m){var h=new Uint8Array(x.byteLength+M.byteLength);return h.set(new Uint8Array(x)),h.set(new Uint8Array(M),x.byteLength),m?h:h.buffer}(this._buff.buffer,x,!0),m=M.length;for(this._length+=x.byteLength,h=64;h<=m;h+=64)ie(this._hash,ye(M.subarray(h-64,h)));return this._buff=h-64<m?new Uint8Array(M.buffer.slice(h-64)):new Uint8Array(0),this},N.ArrayBuffer.prototype.end=function(x){var w,D,M=this._buff,m=M.length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(w=0;w<m;w+=1)h[w>>2]|=M[w]<<(w%4<<3);return this._finish(h,m),D=se(this._hash),x&&(D=F(D)),this.reset(),D},N.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},N.ArrayBuffer.prototype.getState=function(){var x=N.prototype.getState.call(this);return x.buff=function X(x){return String.fromCharCode.apply(null,new Uint8Array(x))}(x.buff),x},N.ArrayBuffer.prototype.setState=function(x){return x.buff=function Y(x,M){var D,m=x.length,h=new ArrayBuffer(m),w=new Uint8Array(h);for(D=0;D<m;D+=1)w[D]=x.charCodeAt(D);return M?w:h}(x.buff,!0),N.prototype.setState.call(this,x)},N.ArrayBuffer.prototype.destroy=N.prototype.destroy,N.ArrayBuffer.prototype._finish=N.prototype._finish,N.ArrayBuffer.hash=function(x,M){var h=se(function Ve(x){var h,w,D,R,j,he,M=x.length,m=[1732584193,-271733879,-1732584194,271733878];for(h=64;h<=M;h+=64)ie(m,ye(x.subarray(h-64,h)));for(w=(x=h-64<M?x.subarray(h-64):new Uint8Array(0)).length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<w;h+=1)D[h>>2]|=x[h]<<(h%4<<3);if(D[h>>2]|=128<<(h%4<<3),h>55)for(ie(m,D),h=0;h<16;h+=1)D[h]=0;return R=(R=8*M).toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(R[2],16),he=parseInt(R[1],16)||0,D[14]=j,D[15]=he,ie(m,D),m}(new Uint8Array(x)));return M?F(h):h},N}()},899:(ut,Pe)=>{"use strict";function fe($,J,ie){var H=ie[ie.length-1];$===H.element&&(ie.pop(),H=ie[ie.length-1]);var ye=H.element,me=H.index;Array.isArray(ye)?ye.push($):me===J.length-2?ye[J.pop()]=$:J.push($)}Pe.stringify=function(J){var ie=[];ie.push({obj:J});for(var ye,me,L,se,Y,X,Q,F,N,H="";ye=ie.pop();)if(me=ye.obj,H+=ye.prefix||"",L=ye.val||"")H+=L;else if("object"!=typeof me)H+=typeof me>"u"?null:JSON.stringify(me);else if(null===me)H+="null";else if(Array.isArray(me)){for(ie.push({val:"]"}),se=me.length-1;se>=0;se--)ie.push({obj:me[se],prefix:0===se?"":","});ie.push({val:"["})}else{for(X in Y=[],me)me.hasOwnProperty(X)&&Y.push(X);for(ie.push({val:"}"}),se=Y.length-1;se>=0;se--)F=me[Q=Y[se]],N=se>0?",":"",N+=JSON.stringify(Q)+":",ie.push({obj:F,prefix:N});ie.push({val:"{"})}return H},Pe.parse=function($){for(var ye,me,Ve,L,se,K,Y,X,Q,J=[],ie=[],H=0;;)if("}"===(ye=$[H++])||"]"===ye||typeof ye>"u"){if(1===J.length)return J.pop();fe(J.pop(),J,ie)}else switch(ye){case" ":case"\t":case"\n":case":":case",":break;case"n":H+=3,fe(null,J,ie);break;case"t":H+=3,fe(!0,J,ie);break;case"f":H+=4,fe(!1,J,ie);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(me="",H--;;){if(Ve=$[H++],!/[\d\.\-e\+]/.test(Ve)){H--;break}me+=Ve}fe(parseFloat(me),J,ie);break;case'"':for(L="",se=void 0,K=0;'"'!==(Y=$[H++])||"\\"===se&&K%2==1;)L+=Y,"\\"===(se=Y)?K++:K=0;fe(JSON.parse('"'+L+'"'),J,ie);break;case"[":J.push((X={element:[],index:J.length}).element),ie.push(X);break;case"{":J.push((Q={element:{},index:J.length}).element),ie.push(Q);break;default:throw new Error("unexpectedly reached end of input: "+ye)}}},480:()=>{},525:()=>{}},ut=>{ut(ut.s=189)}]);